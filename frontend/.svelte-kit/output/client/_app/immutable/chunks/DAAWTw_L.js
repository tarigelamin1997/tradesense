import{_ as p}from"./C1FmrZbK.js";import{g as m}from"./KzgLiahW.js";const g=()=>"https://tradesense-gateway-production.up.railway.app";let r=null;async function o(){if(!r){const{default:t}=await p(async()=>{const{default:e}=await import("./DIycyeiE.js");return{default:e}},[],import.meta.url),a=t.create({baseURL:g(),timeout:3e4,headers:{"Content-Type":"application/json"}}),s=localStorage.getItem("authToken");s&&(a.defaults.headers.common.Authorization=`Bearer ${s}`),a.interceptors.request.use(e=>(console.log("Making request to:",e.url),e),e=>Promise.reject(e)),a.interceptors.response.use(e=>e,async e=>{var c,i,l;console.error("API Error:",e.message),((c=e.response)==null?void 0:c.status)===401&&(localStorage.removeItem("authToken"),m("/login"));const n=(i=e.response)==null?void 0:i.data,u={message:(n==null?void 0:n.detail)||(n==null?void 0:n.message)||e.message||"An error occurred",status:((l=e.response)==null?void 0:l.status)||500,detail:n};return Promise.reject(u)}),r=a}return r}const w={async get(t,a){return(await(await o()).get(t,{params:a})).data},async post(t,a,s){return(await(await o()).post(t,a,s)).data},async put(t,a){return(await(await o()).put(t,a)).data},async patch(t,a){return(await(await o()).patch(t,a)).data},async delete(t){return(await(await o()).delete(t)).data},setAuthToken(t){localStorage.setItem("authToken",t)},clearAuth(){localStorage.removeItem("authToken")},getAuthToken(){return localStorage.getItem("authToken")},isAuthenticated(){return!!localStorage.getItem("authToken")}};export{w as a};
