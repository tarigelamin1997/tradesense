import{S as _e,i as be,s as we,d as p,t as j,a as U,c as ye,b as L,e as i,f as u,I as Ce,u as P,g as v,h as D,y as x,j as h,k as ge,P as ke,A as pe,l as Q,o as W,q as X,v as V,x as ee,r as Pe,L as K,B as ve,p as ne,w as he,z as me,n as xe}from"../chunks/BizRtQrO.js";import"../chunks/IHki7fMi.js";import{p as Ee}from"../chunks/C4tCgbJx.js";import{g as Ie}from"../chunks/CMDLyNOv.js";import{a as Le}from"../chunks/CNsmtZI0.js";import{C as De}from"../chunks/LY3CT-Vd.js";import{C as Ve}from"../chunks/BC5gv1j_.js";import{L as fe}from"../chunks/mkWhIWP_.js";function Te(y){let e,s="Reset Your Password",r,t,o="Enter your new password below",g,m,a,b,n,f="New Password",k,w,c,d,C,H,T,M="Must be at least 8 characters with letters and numbers",te,z,N,oe="Confirm Password",se,q,B,le,I,re,R,Y=y[2]?"Resetting...":"Reset Password",F,O,A,ue='<a href="/login" class="svelte-1uy39p8">Back to Login</a>',$,ae,ie,E=y[3]&&de(y);return c=new fe({props:{size:20}}),B=new fe({props:{size:20}}),{c(){e=h("h1"),e.textContent=s,r=x(),t=h("p"),t.textContent=o,g=x(),E&&E.c(),m=x(),a=h("form"),b=h("div"),n=h("label"),n.textContent=f,k=x(),w=h("div"),ee(c.$$.fragment),d=x(),C=h("input"),H=x(),T=h("p"),T.textContent=M,te=x(),z=h("div"),N=h("label"),N.textContent=oe,se=x(),q=h("div"),ee(B.$$.fragment),le=x(),I=h("input"),re=x(),R=h("button"),F=me(Y),O=x(),A=h("div"),A.innerHTML=ue,this.h()},l(l){e=v(l,"H1",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1a693r7"&&(e.textContent=s),r=P(l),t=v(l,"P",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-tdqkhi"&&(t.textContent=o),g=P(l),E&&E.l(l),m=P(l),a=v(l,"FORM",{});var _=D(a);b=v(_,"DIV",{class:!0});var S=D(b);n=v(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(n)!=="svelte-1fqrm48"&&(n.textContent=f),k=P(S),w=v(S,"DIV",{class:!0});var G=D(w);X(c.$$.fragment,G),d=P(G),C=v(G,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),G.forEach(p),H=P(S),T=v(S,"P",{class:!0,"data-svelte-h":!0}),V(T)!=="svelte-dns8ui"&&(T.textContent=M),S.forEach(p),te=P(_),z=v(_,"DIV",{class:!0});var Z=D(z);N=v(Z,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(N)!=="svelte-ckuh5e"&&(N.textContent=oe),se=P(Z),q=v(Z,"DIV",{class:!0});var J=D(q);X(B.$$.fragment,J),le=P(J),I=v(J,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),J.forEach(p),Z.forEach(p),re=P(_),R=v(_,"BUTTON",{type:!0,class:!0});var ce=D(R);F=he(ce,Y),ce.forEach(p),_.forEach(p),O=P(l),A=v(l,"DIV",{class:!0,"data-svelte-h":!0}),V(A)!=="svelte-1897lpg"&&(A.innerHTML=ue),this.h()},h(){u(e,"class","svelte-1uy39p8"),u(t,"class","subtitle svelte-1uy39p8"),u(n,"for","password"),u(n,"class","svelte-1uy39p8"),u(C,"id","password"),u(C,"type","password"),u(C,"placeholder","Enter new password"),C.required=!0,C.disabled=y[2],u(C,"class","svelte-1uy39p8"),u(w,"class","input-wrapper svelte-1uy39p8"),u(T,"class","password-hint svelte-1uy39p8"),u(b,"class","form-group svelte-1uy39p8"),u(N,"for","confirmPassword"),u(N,"class","svelte-1uy39p8"),u(I,"id","confirmPassword"),u(I,"type","password"),u(I,"placeholder","Confirm new password"),I.required=!0,I.disabled=y[2],u(I,"class","svelte-1uy39p8"),u(q,"class","input-wrapper svelte-1uy39p8"),u(z,"class","form-group svelte-1uy39p8"),u(R,"type","submit"),u(R,"class","submit-button svelte-1uy39p8"),R.disabled=y[2],u(A,"class","auth-footer svelte-1uy39p8")},m(l,_){L(l,e,_),L(l,r,_),L(l,t,_),L(l,g,_),E&&E.m(l,_),L(l,m,_),L(l,a,_),i(a,b),i(b,n),i(b,k),i(b,w),W(c,w,null),i(w,d),i(w,C),K(C,y[0]),i(b,H),i(b,T),i(a,te),i(a,z),i(z,N),i(z,se),i(z,q),W(B,q,null),i(q,le),i(q,I),K(I,y[1]),i(a,re),i(a,R),i(R,F),L(l,O,_),L(l,A,_),$=!0,ae||(ie=[ne(C,"input",y[7]),ne(I,"input",y[8]),ne(a,"submit",y[6])],ae=!0)},p(l,_){l[3]?E?E.p(l,_):(E=de(l),E.c(),E.m(m.parentNode,m)):E&&(E.d(1),E=null),(!$||_&4)&&(C.disabled=l[2]),_&1&&C.value!==l[0]&&K(C,l[0]),(!$||_&4)&&(I.disabled=l[2]),_&2&&I.value!==l[1]&&K(I,l[1]),(!$||_&4)&&Y!==(Y=l[2]?"Resetting...":"Reset Password")&&ve(F,Y),(!$||_&4)&&(R.disabled=l[2])},i(l){$||(U(c.$$.fragment,l),U(B.$$.fragment,l),$=!0)},o(l){j(c.$$.fragment,l),j(B.$$.fragment,l),$=!1},d(l){l&&(p(e),p(r),p(t),p(g),p(m),p(a),p(O),p(A)),E&&E.d(l),Q(c),Q(B),ae=!1,Pe(ie)}}}function Re(y){let e,s,r,t,o,g="Invalid or Expired Link",m,a,b="This password reset link is invalid or has expired. Password reset links are valid for 1 hour.",n,f,k="Request New Link",w;return r=new Ve({props:{size:64}}),{c(){e=h("div"),s=h("div"),ee(r.$$.fragment),t=x(),o=h("h1"),o.textContent=g,m=x(),a=h("p"),a.textContent=b,n=x(),f=h("a"),f.textContent=k,this.h()},l(c){e=v(c,"DIV",{class:!0});var d=D(e);s=v(d,"DIV",{class:!0});var C=D(s);X(r.$$.fragment,C),C.forEach(p),t=P(d),o=v(d,"H1",{class:!0,"data-svelte-h":!0}),V(o)!=="svelte-1e7l5nr"&&(o.textContent=g),m=P(d),a=v(d,"P",{class:!0,"data-svelte-h":!0}),V(a)!=="svelte-112pywi"&&(a.textContent=b),n=P(d),f=v(d,"A",{href:!0,class:!0,"data-svelte-h":!0}),V(f)!=="svelte-1coziz"&&(f.textContent=k),d.forEach(p),this.h()},h(){u(s,"class","error-icon svelte-1uy39p8"),u(o,"class","svelte-1uy39p8"),u(a,"class","svelte-1uy39p8"),u(f,"href","/forgot-password"),u(f,"class","primary-button svelte-1uy39p8"),u(e,"class","error-state svelte-1uy39p8")},m(c,d){L(c,e,d),i(e,s),W(r,s,null),i(e,t),i(e,o),i(e,m),i(e,a),i(e,n),i(e,f),w=!0},p:pe,i(c){w||(U(r.$$.fragment,c),w=!0)},o(c){j(r.$$.fragment,c),w=!1},d(c){c&&p(e),Q(r)}}}function ze(y){let e,s,r,t,o,g="Password Reset Successful!",m,a,b="Your password has been successfully reset. You'll be redirected to login in a moment...",n,f,k="Go to Login",w;return r=new De({props:{size:64}}),{c(){e=h("div"),s=h("div"),ee(r.$$.fragment),t=x(),o=h("h1"),o.textContent=g,m=x(),a=h("p"),a.textContent=b,n=x(),f=h("a"),f.textContent=k,this.h()},l(c){e=v(c,"DIV",{class:!0});var d=D(e);s=v(d,"DIV",{class:!0});var C=D(s);X(r.$$.fragment,C),C.forEach(p),t=P(d),o=v(d,"H1",{class:!0,"data-svelte-h":!0}),V(o)!=="svelte-wxl127"&&(o.textContent=g),m=P(d),a=v(d,"P",{class:!0,"data-svelte-h":!0}),V(a)!=="svelte-j75gam"&&(a.textContent=b),n=P(d),f=v(d,"A",{href:!0,class:!0,"data-svelte-h":!0}),V(f)!=="svelte-1b6wjrp"&&(f.textContent=k),d.forEach(p),this.h()},h(){u(s,"class","success-icon svelte-1uy39p8"),u(o,"class","svelte-1uy39p8"),u(a,"class","svelte-1uy39p8"),u(f,"href","/login"),u(f,"class","login-button svelte-1uy39p8"),u(e,"class","success-state svelte-1uy39p8")},m(c,d){L(c,e,d),i(e,s),W(r,s,null),i(e,t),i(e,o),i(e,m),i(e,a),i(e,n),i(e,f),w=!0},p:pe,i(c){w||(U(r.$$.fragment,c),w=!0)},o(c){j(r.$$.fragment,c),w=!1},d(c){c&&p(e),Q(r)}}}function de(y){let e,s;return{c(){e=h("div"),s=me(y[3]),this.h()},l(r){e=v(r,"DIV",{class:!0});var t=D(e);s=he(t,y[3]),t.forEach(p),this.h()},h(){u(e,"class","error-message svelte-1uy39p8")},m(r,t){L(r,e,t),i(e,s)},p(r,t){t&8&&ve(s,r[3])},d(r){r&&p(e)}}}function Ne(y){let e,s,r,t,o,g;const m=[ze,Re,Te],a=[];function b(n,f){return n[4]?0:n[5]?2:1}return t=b(y),o=a[t]=m[t](y),{c(){e=x(),s=h("div"),r=h("div"),o.c(),this.h()},l(n){Ce("svelte-1l9lag7",document.head).forEach(p),e=P(n),s=v(n,"DIV",{class:!0});var k=D(s);r=v(k,"DIV",{class:!0});var w=D(r);o.l(w),w.forEach(p),k.forEach(p),this.h()},h(){document.title="Reset Password - TradeSense",u(r,"class","auth-card svelte-1uy39p8"),u(s,"class","auth-container svelte-1uy39p8")},m(n,f){L(n,e,f),L(n,s,f),i(s,r),a[t].m(r,null),g=!0},p(n,[f]){let k=t;t=b(n),t===k?a[t].p(n,f):(xe(),j(a[k],1,1,()=>{a[k]=null}),ye(),o=a[t],o?o.p(n,f):(o=a[t]=m[t](n),o.c()),U(o,1),o.m(r,null))},i(n){g||(U(o),g=!0)},o(n){j(o),g=!1},d(n){n&&(p(e),p(s)),a[t].d()}}}function qe(y,e,s){let r;ge(y,Ee,c=>s(10,r=c));let t="",o="",g=!1,m="",a=!1,b=!0,n="";ke(()=>{n=r.url.searchParams.get("token")||"",n||(s(5,b=!1),s(3,m="No reset token provided"))});async function f(c){var H,T;if(c.preventDefault(),!t||!o){s(3,m="Please fill in all fields");return}if(t!==o){s(3,m="Passwords do not match");return}if(t.length<8){s(3,m="Password must be at least 8 characters long");return}const d=/[a-zA-Z]/.test(t),C=/[0-9]/.test(t);if(!d||!C){s(3,m="Password must contain both letters and numbers");return}s(2,g=!0),s(3,m="");try{await Le.resetPassword(n,t),s(4,a=!0),setTimeout(()=>{Ie("/login")},3e3)}catch(M){s(3,m=M.message||"Failed to reset password. The link may be expired."),((H=M.message)!=null&&H.includes("expired")||(T=M.message)!=null&&T.includes("invalid"))&&s(5,b=!1)}finally{s(2,g=!1)}}function k(){t=this.value,s(0,t)}function w(){o=this.value,s(1,o)}return[t,o,g,m,a,b,f,k,w]}class Ye extends _e{constructor(e){super(),be(this,e,qe,Ne,we,{})}}export{Ye as component};
