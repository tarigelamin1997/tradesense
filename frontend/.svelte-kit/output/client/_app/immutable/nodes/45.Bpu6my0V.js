import{S as oe,i as ue,s as ce,d as a,t as F,a as H,I as fe,f as m,h as g,D as d,E as pe,o as V,k as _,l as P,r as w,q as h,F as de,w as me,n as ne,y as U,z as A,A as G,m as q,B as Y,G as W,N as ve,e as te,O as se,T as _e,p as le,v as re,J as he}from"../chunks/Lbc7qOuA.js";import"../chunks/IHki7fMi.js";import{p as Ce}from"../chunks/PD3FE_ro.js";import{g as be}from"../chunks/COKI2rXe.js";import{a as ie}from"../chunks/rrxRWJDg.js";import{L as ye}from"../chunks/BHHaxnWU.js";import{C as ke}from"../chunks/C4vSTWbX.js";import{C as xe}from"../chunks/DNA3zxjK.js";import{M as ge}from"../chunks/DmtiYh4C.js";function Ee(b){let l,t,n,s,f="Verification Failed",u,i,p,v,e,r,E="Need a new verification link?",y,I,M="Enter your email address and we'll send you a new verification link.",c,C,D,z,j,$,J,T,O=b[4]?"Sending...":"Resend Verification",R,K,N,Q,X;t=new xe({props:{size:64}}),z=new ge({props:{size:20}});let x=b[5]&&ae();return{c(){l=h("div"),Y(t.$$.fragment),n=w(),s=h("h1"),s.textContent=f,u=w(),i=h("p"),p=re(b[2]),v=w(),e=h("div"),r=h("h2"),r.textContent=E,y=w(),I=h("p"),I.textContent=M,c=w(),C=h("form"),D=h("div"),Y(z.$$.fragment),j=w(),$=h("input"),J=w(),T=h("button"),R=re(O),K=w(),x&&x.c(),this.h()},l(o){l=_(o,"DIV",{class:!0});var k=P(l);G(t.$$.fragment,k),k.forEach(a),n=V(o),s=_(o,"H1",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-14rcri2"&&(s.textContent=f),u=V(o),i=_(o,"P",{class:!0});var Z=P(i);p=le(Z,b[2]),Z.forEach(a),v=V(o),e=_(o,"DIV",{class:!0});var S=P(e);r=_(S,"H2",{class:!0,"data-svelte-h":!0}),q(r)!=="svelte-1xxd70x"&&(r.textContent=E),y=V(S),I=_(S,"P",{class:!0,"data-svelte-h":!0}),q(I)!=="svelte-lad488"&&(I.textContent=M),c=V(S),C=_(S,"FORM",{class:!0});var B=P(C);D=_(B,"DIV",{class:!0});var L=P(D);G(z.$$.fragment,L),j=V(L),$=_(L,"INPUT",{type:!0,placeholder:!0,class:!0}),L.forEach(a),J=V(B),T=_(B,"BUTTON",{type:!0,class:!0});var ee=P(T);R=le(ee,O),ee.forEach(a),B.forEach(a),K=V(S),x&&x.l(S),S.forEach(a),this.h()},h(){d(l,"class","status-icon error svelte-p5u1e1"),d(s,"class","svelte-p5u1e1"),d(i,"class","error-message svelte-p5u1e1"),d(r,"class","svelte-p5u1e1"),d(I,"class","svelte-p5u1e1"),d($,"type","email"),d($,"placeholder","Enter your email"),$.required=!0,$.disabled=b[4],d($,"class","svelte-p5u1e1"),d(D,"class","form-group svelte-p5u1e1"),d(T,"type","submit"),T.disabled=b[4],d(T,"class","primary-button svelte-p5u1e1"),d(C,"class","resend-form svelte-p5u1e1"),d(e,"class","resend-section svelte-p5u1e1")},m(o,k){m(o,l,k),A(t,l,null),m(o,n,k),m(o,s,k),m(o,u,k),m(o,i,k),g(i,p),m(o,v,k),m(o,e,k),g(e,r),g(e,y),g(e,I),g(e,c),g(e,C),g(C,D),A(z,D,null),g(D,j),g(D,$),se($,b[3]),g(C,J),g(C,T),g(T,R),g(e,K),x&&x.m(e,null),N=!0,Q||(X=[W($,"input",b[8]),W(C,"submit",_e(b[6]))],Q=!0)},p(o,k){(!N||k&4)&&te(p,o[2]),(!N||k&16)&&($.disabled=o[4]),k&8&&$.value!==o[3]&&se($,o[3]),(!N||k&16)&&O!==(O=o[4]?"Sending...":"Resend Verification")&&te(R,O),(!N||k&16)&&(T.disabled=o[4]),o[5]?x||(x=ae(),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},i(o){N||(H(t.$$.fragment,o),H(z.$$.fragment,o),N=!0)},o(o){F(t.$$.fragment,o),F(z.$$.fragment,o),N=!1},d(o){o&&(a(l),a(n),a(s),a(u),a(i),a(v),a(e)),U(t),U(z),x&&x.d(),Q=!1,ve(X)}}}function Ve(b){let l,t,n,s,f="Email Verified!",u,i,p="Your email has been successfully verified. You can now access all features.",v,e,r,E="Go to Login",y,I,M;return t=new ke({props:{size:64}}),{c(){l=h("div"),Y(t.$$.fragment),n=w(),s=h("h1"),s.textContent=f,u=w(),i=h("p"),i.textContent=p,v=w(),e=h("div"),r=h("button"),r.textContent=E,this.h()},l(c){l=_(c,"DIV",{class:!0});var C=P(l);G(t.$$.fragment,C),C.forEach(a),n=V(c),s=_(c,"H1",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-1dkb0jr"&&(s.textContent=f),u=V(c),i=_(c,"P",{class:!0,"data-svelte-h":!0}),q(i)!=="svelte-1sgrxqn"&&(i.textContent=p),v=V(c),e=_(c,"DIV",{class:!0});var D=P(e);r=_(D,"BUTTON",{class:!0,"data-svelte-h":!0}),q(r)!=="svelte-1yvi359"&&(r.textContent=E),D.forEach(a),this.h()},h(){d(l,"class","status-icon success svelte-p5u1e1"),d(s,"class","svelte-p5u1e1"),d(i,"class","svelte-p5u1e1"),d(r,"class","primary-button svelte-p5u1e1"),d(e,"class","actions svelte-p5u1e1")},m(c,C){m(c,l,C),A(t,l,null),m(c,n,C),m(c,s,C),m(c,u,C),m(c,i,C),m(c,v,C),m(c,e,C),g(e,r),y=!0,I||(M=W(r,"click",b[7]),I=!0)},p:ne,i(c){y||(H(t.$$.fragment,c),y=!0)},o(c){F(t.$$.fragment,c),y=!1},d(c){c&&(a(l),a(n),a(s),a(u),a(i),a(v),a(e)),U(t),I=!1,M()}}}function we(b){let l,t,n,s,f="Verifying your email...",u,i,p="Please wait while we confirm your email address.",v;return t=new ye({props:{size:64,class:"animate-spin"}}),{c(){l=h("div"),Y(t.$$.fragment),n=w(),s=h("h1"),s.textContent=f,u=w(),i=h("p"),i.textContent=p,this.h()},l(e){l=_(e,"DIV",{class:!0});var r=P(l);G(t.$$.fragment,r),r.forEach(a),n=V(e),s=_(e,"H1",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-1xas3dy"&&(s.textContent=f),u=V(e),i=_(e,"P",{class:!0,"data-svelte-h":!0}),q(i)!=="svelte-1ibkrrr"&&(i.textContent=p),this.h()},h(){d(l,"class","status-icon svelte-p5u1e1"),d(s,"class","svelte-p5u1e1"),d(i,"class","svelte-p5u1e1")},m(e,r){m(e,l,r),A(t,l,null),m(e,n,r),m(e,s,r),m(e,u,r),m(e,i,r),v=!0},p:ne,i(e){v||(H(t.$$.fragment,e),v=!0)},o(e){F(t.$$.fragment,e),v=!1},d(e){e&&(a(l),a(n),a(s),a(u),a(i)),U(t)}}}function ae(b){let l,t="Verification email sent! Please check your inbox.";return{c(){l=h("div"),l.textContent=t,this.h()},l(n){l=_(n,"DIV",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-kl9q1c"&&(l.textContent=t),this.h()},h(){d(l,"class","success-message svelte-p5u1e1")},m(n,s){m(n,l,s)},d(n){n&&a(l)}}}function Ie(b){let l,t,n,s,f,u;const i=[we,Ve,Ee],p=[];function v(e,r){return e[0]?0:e[1]?1:2}return s=v(b),f=p[s]=i[s](b),{c(){l=w(),t=h("div"),n=h("div"),f.c(),this.h()},l(e){pe("svelte-9yc3qs",document.head).forEach(a),l=V(e),t=_(e,"DIV",{class:!0});var E=P(t);n=_(E,"DIV",{class:!0});var y=P(n);f.l(y),y.forEach(a),E.forEach(a),this.h()},h(){document.title="Email Verification - TradeSense",d(n,"class","verification-card svelte-p5u1e1"),d(t,"class","verification-container svelte-p5u1e1")},m(e,r){m(e,l,r),m(e,t,r),g(t,n),p[s].m(n,null),u=!0},p(e,[r]){let E=s;s=v(e),s===E?p[s].p(e,r):(he(),F(p[E],1,1,()=>{p[E]=null}),fe(),f=p[s],f?f.p(e,r):(f=p[s]=i[s](e),f.c()),H(f,1),f.m(n,null))},i(e){u||(H(f),u=!0)},o(e){F(f),u=!1},d(e){e&&(a(l),a(t)),p[s].d()}}}function $e(b,l,t){let n;de(b,Ce,y=>t(9,n=y));let s=!0,f=!1,u="",i="",p=!1,v=!1;me(async()=>{const y=n.url.searchParams.get("token");if(!y){t(2,u="No verification token provided"),t(0,s=!1);return}try{await ie.verifyEmail(y),t(1,f=!0)}catch(I){t(2,u=I.message||"Verification failed. The link may be expired or invalid.")}finally{t(0,s=!1)}});async function e(){if(!(!i||p))try{t(4,p=!0),t(2,u=""),t(5,v=!1),await ie.resendVerification(i),t(5,v=!0)}catch(y){t(2,u=y.message||"Failed to resend verification email")}finally{t(4,p=!1)}}const r=()=>be("/login");function E(){i=this.value,t(3,i)}return[s,f,u,i,p,v,e,r,E]}class Me extends oe{constructor(l){super(),ue(this,l,$e,Ie,ce,{})}}export{Me as component};
