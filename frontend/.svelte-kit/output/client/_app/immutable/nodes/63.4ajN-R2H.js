import{S as xt,i as Gt,s as Yt,A as Et,d as c,b as we,D as Jt,a9 as Zt,r as $t,B as qe,L as b,M as Kt,K as Ce,a0 as _e,e as t,p as q,_ as es,f as e,N as ts,g as r,h as _,w as me,u as v,v as z,j as n,z as he,y as p,$ as ss,J as ls,l as as,t as rs,a as ns,o as is,I as os,q as us,x as ds,P as fs,W as cs}from"../chunks/BizRtQrO.js";import"../chunks/IHki7fMi.js";import{g as zt}from"../chunks/CMDLyNOv.js";import{i as vs}from"../chunks/CNsmtZI0.js";import{t as Qt}from"../chunks/KWZs6rA_.js";function Wt(l){var Ft,Ot;let u,s,o,m,d=(Ft=l[0])!=null&&Ft.id?"Edit Trade":"New Trade",y,N,a,F="Ã—",w,je,E,h,O,M,Le="Symbol",ze,k,Ee,H,R,Ae="Side",P,g,K,Tt="Long",Q,It="Short",Ge,x,G,Dt="Entry Price",Ye,T,Ze,Y,Z,qt="Exit Price",$e,I,et,$,ee,wt="Quantity",tt,D,st,te,se,Lt="Strategy",lt,L,at,le,ae,At="Entry Date",rt,V,nt,re,ne,Nt="Exit Date",it,S,ot,ie,oe,Pt="Notes",ut,A,dt,ue,ge,Vt="P&L Preview",ft,de,fe,be,St="Amount:",ct,B,vt,Te=l[3].toFixed(2)+"",Ne,pt,ce,ye,Bt="Percentage:",_t,U,Ie=l[6].toFixed(2)+"",Pe,mt,ht,ve,J,gt,bt,W,De=l[4]?"Saving...":(Ot=l[0])!=null&&Ot.id?"Update Trade":"Create Trade",Ve,yt,Ut,j=l[5]&&Xt(l);return{c(){u=n("div"),s=n("div"),o=n("div"),m=n("h2"),y=he(d),N=p(),a=n("button"),a.textContent=F,w=p(),j&&j.c(),je=p(),E=n("form"),h=n("div"),O=n("div"),M=n("label"),M.textContent=Le,ze=p(),k=n("input"),Ee=p(),H=n("div"),R=n("label"),R.textContent=Ae,P=p(),g=n("select"),K=n("option"),K.textContent=Tt,Q=n("option"),Q.textContent=It,Ge=p(),x=n("div"),G=n("label"),G.textContent=Dt,Ye=p(),T=n("input"),Ze=p(),Y=n("div"),Z=n("label"),Z.textContent=qt,$e=p(),I=n("input"),et=p(),$=n("div"),ee=n("label"),ee.textContent=wt,tt=p(),D=n("input"),st=p(),te=n("div"),se=n("label"),se.textContent=Lt,lt=p(),L=n("input"),at=p(),le=n("div"),ae=n("label"),ae.textContent=At,rt=p(),V=n("input"),nt=p(),re=n("div"),ne=n("label"),ne.textContent=Nt,it=p(),S=n("input"),ot=p(),ie=n("div"),oe=n("label"),oe.textContent=Pt,ut=p(),A=n("textarea"),dt=p(),ue=n("div"),ge=n("h3"),ge.textContent=Vt,ft=p(),de=n("div"),fe=n("div"),be=n("span"),be.textContent=St,ct=p(),B=n("span"),vt=he("$"),Ne=he(Te),pt=p(),ce=n("div"),ye=n("span"),ye.textContent=Bt,_t=p(),U=n("span"),Pe=he(Ie),mt=he("%"),ht=p(),ve=n("div"),J=n("button"),gt=he("Cancel"),bt=p(),W=n("button"),Ve=he(De),this.h()},l(i){u=r(i,"DIV",{class:!0});var f=_(u);s=r(f,"DIV",{class:!0});var X=_(s);o=r(X,"DIV",{class:!0});var ke=_(o);m=r(ke,"H2",{class:!0});var Mt=_(m);y=me(Mt,d),Mt.forEach(c),N=v(ke),a=r(ke,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),z(a)!=="svelte-39g3rs"&&(a.textContent=F),ke.forEach(c),w=v(X),j&&j.l(X),je=v(X),E=r(X,"FORM",{});var pe=_(E);h=r(pe,"DIV",{class:!0});var C=_(h);O=r(C,"DIV",{class:!0});var Se=_(O);M=r(Se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(M)!=="svelte-7yir0i"&&(M.textContent=Le),ze=v(Se),k=r(Se,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Se.forEach(c),Ee=v(C),H=r(C,"DIV",{class:!0});var Be=_(H);R=r(Be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(R)!=="svelte-1wbajoe"&&(R.textContent=Ae),P=v(Be),g=r(Be,"SELECT",{id:!0,class:!0});var kt=_(g);K=r(kt,"OPTION",{"data-svelte-h":!0}),z(K)!=="svelte-1hun0tq"&&(K.textContent=Tt),Q=r(kt,"OPTION",{"data-svelte-h":!0}),z(Q)!=="svelte-16o2ctq"&&(Q.textContent=It),kt.forEach(c),Be.forEach(c),Ge=v(C),x=r(C,"DIV",{class:!0});var Ue=_(x);G=r(Ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(G)!=="svelte-1k01jwx"&&(G.textContent=Dt),Ye=v(Ue),T=r(Ue,"INPUT",{id:!0,type:!0,step:!0,placeholder:!0,class:!0}),Ue.forEach(c),Ze=v(C),Y=r(C,"DIV",{class:!0});var Fe=_(Y);Z=r(Fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(Z)!=="svelte-24szo9"&&(Z.textContent=qt),$e=v(Fe),I=r(Fe,"INPUT",{id:!0,type:!0,step:!0,placeholder:!0,class:!0}),Fe.forEach(c),et=v(C),$=r(C,"DIV",{class:!0});var Oe=_($);ee=r(Oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(ee)!=="svelte-1ognb32"&&(ee.textContent=wt),tt=v(Oe),D=r(Oe,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Oe.forEach(c),st=v(C),te=r(C,"DIV",{class:!0});var Me=_(te);se=r(Me,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(se)!=="svelte-15fzmo2"&&(se.textContent=Lt),lt=v(Me),L=r(Me,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Me.forEach(c),at=v(C),le=r(C,"DIV",{class:!0});var He=_(le);ae=r(He,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(ae)!=="svelte-mqxc8z"&&(ae.textContent=At),rt=v(He),V=r(He,"INPUT",{id:!0,type:!0,class:!0}),He.forEach(c),nt=v(C),re=r(C,"DIV",{class:!0});var Re=_(re);ne=r(Re,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(ne)!=="svelte-1ws85sl"&&(ne.textContent=Nt),it=v(Re),S=r(Re,"INPUT",{id:!0,type:!0,class:!0}),Re.forEach(c),C.forEach(c),ot=v(pe),ie=r(pe,"DIV",{class:!0});var Je=_(ie);oe=r(Je,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),z(oe)!=="svelte-j2fx5w"&&(oe.textContent=Pt),ut=v(Je),A=r(Je,"TEXTAREA",{id:!0,rows:!0,placeholder:!0,class:!0}),_(A).forEach(c),Je.forEach(c),dt=v(pe),ue=r(pe,"DIV",{class:!0});var Ke=_(ue);ge=r(Ke,"H3",{class:!0,"data-svelte-h":!0}),z(ge)!=="svelte-546h54"&&(ge.textContent=Vt),ft=v(Ke),de=r(Ke,"DIV",{class:!0});var Qe=_(de);fe=r(Qe,"DIV",{class:!0});var We=_(fe);be=r(We,"SPAN",{class:!0,"data-svelte-h":!0}),z(be)!=="svelte-ksgs7g"&&(be.textContent=St),ct=v(We),B=r(We,"SPAN",{class:!0});var jt=_(B);vt=me(jt,"$"),Ne=me(jt,Te),jt.forEach(c),We.forEach(c),pt=v(Qe),ce=r(Qe,"DIV",{class:!0});var Xe=_(ce);ye=r(Xe,"SPAN",{class:!0,"data-svelte-h":!0}),z(ye)!=="svelte-1erd2sg"&&(ye.textContent=Bt),_t=v(Xe),U=r(Xe,"SPAN",{class:!0});var Ct=_(U);Pe=me(Ct,Ie),mt=me(Ct,"%"),Ct.forEach(c),Xe.forEach(c),Qe.forEach(c),Ke.forEach(c),ht=v(pe),ve=r(pe,"DIV",{class:!0});var xe=_(ve);J=r(xe,"BUTTON",{type:!0,class:!0});var Ht=_(J);gt=me(Ht,"Cancel"),Ht.forEach(c),bt=v(xe),W=r(xe,"BUTTON",{type:!0,class:!0});var Rt=_(W);Ve=me(Rt,De),Rt.forEach(c),xe.forEach(c),pe.forEach(c),X.forEach(c),f.forEach(c),this.h()},h(){e(m,"class","svelte-kmjgfz"),e(a,"type","button"),e(a,"class","close-button svelte-kmjgfz"),e(o,"class","modal-header svelte-kmjgfz"),e(M,"for","symbol"),e(M,"class","svelte-kmjgfz"),e(k,"id","symbol"),e(k,"type","text"),k.required=!0,e(k,"placeholder","e.g., AAPL"),k.disabled=l[4],e(k,"class","svelte-kmjgfz"),e(O,"class","form-group svelte-kmjgfz"),e(R,"for","side"),e(R,"class","svelte-kmjgfz"),K.__value="long",b(K,K.__value),Q.__value="short",b(Q,Q.__value),e(g,"id","side"),g.disabled=l[4],e(g,"class","svelte-kmjgfz"),l[2].side===void 0&&ts(()=>l[11].call(g)),e(H,"class","form-group svelte-kmjgfz"),e(G,"for","entry_price"),e(G,"class","svelte-kmjgfz"),e(T,"id","entry_price"),e(T,"type","number"),e(T,"step","0.01"),T.required=!0,e(T,"placeholder","0.00"),T.disabled=l[4],e(T,"class","svelte-kmjgfz"),e(x,"class","form-group svelte-kmjgfz"),e(Z,"for","exit_price"),e(Z,"class","svelte-kmjgfz"),e(I,"id","exit_price"),e(I,"type","number"),e(I,"step","0.01"),I.required=!0,e(I,"placeholder","0.00"),I.disabled=l[4],e(I,"class","svelte-kmjgfz"),e(Y,"class","form-group svelte-kmjgfz"),e(ee,"for","quantity"),e(ee,"class","svelte-kmjgfz"),e(D,"id","quantity"),e(D,"type","number"),D.required=!0,e(D,"placeholder","0"),D.disabled=l[4],e(D,"class","svelte-kmjgfz"),e($,"class","form-group svelte-kmjgfz"),e(se,"for","strategy"),e(se,"class","svelte-kmjgfz"),e(L,"id","strategy"),e(L,"type","text"),e(L,"placeholder","e.g., Momentum"),L.disabled=l[4],e(L,"class","svelte-kmjgfz"),e(te,"class","form-group svelte-kmjgfz"),e(ae,"for","entry_date"),e(ae,"class","svelte-kmjgfz"),e(V,"id","entry_date"),e(V,"type","datetime-local"),V.required=!0,V.disabled=l[4],e(V,"class","svelte-kmjgfz"),e(le,"class","form-group svelte-kmjgfz"),e(ne,"for","exit_date"),e(ne,"class","svelte-kmjgfz"),e(S,"id","exit_date"),e(S,"type","datetime-local"),S.required=!0,S.disabled=l[4],e(S,"class","svelte-kmjgfz"),e(re,"class","form-group svelte-kmjgfz"),e(h,"class","form-grid svelte-kmjgfz"),e(oe,"for","notes"),e(oe,"class","svelte-kmjgfz"),e(A,"id","notes"),e(A,"rows","3"),e(A,"placeholder","Trade notes..."),A.disabled=l[4],e(A,"class","svelte-kmjgfz"),e(ie,"class","form-group full-width svelte-kmjgfz"),e(ge,"class","svelte-kmjgfz"),e(be,"class","svelte-kmjgfz"),e(B,"class","svelte-kmjgfz"),_e(B,"profit",l[3]>0),_e(B,"loss",l[3]<0),e(fe,"class","pnl-item svelte-kmjgfz"),e(ye,"class","svelte-kmjgfz"),e(U,"class","svelte-kmjgfz"),_e(U,"profit",l[3]>0),_e(U,"loss",l[3]<0),e(ce,"class","pnl-item svelte-kmjgfz"),e(de,"class","pnl-values svelte-kmjgfz"),e(ue,"class","pnl-preview svelte-kmjgfz"),e(J,"type","button"),e(J,"class","cancel-button svelte-kmjgfz"),J.disabled=l[4],e(W,"type","submit"),e(W,"class","submit-button svelte-kmjgfz"),W.disabled=l[4],e(ve,"class","form-actions svelte-kmjgfz"),e(s,"class","modal svelte-kmjgfz"),e(u,"class","modal-backdrop svelte-kmjgfz")},m(i,f){we(i,u,f),t(u,s),t(s,o),t(o,m),t(m,y),t(o,N),t(o,a),t(s,w),j&&j.m(s,null),t(s,je),t(s,E),t(E,h),t(h,O),t(O,M),t(O,ze),t(O,k),b(k,l[2].symbol),t(h,Ee),t(h,H),t(H,R),t(H,P),t(H,g),t(g,K),t(g,Q),Kt(g,l[2].side,!0),t(h,Ge),t(h,x),t(x,G),t(x,Ye),t(x,T),b(T,l[2].entry_price),t(h,Ze),t(h,Y),t(Y,Z),t(Y,$e),t(Y,I),b(I,l[2].exit_price),t(h,et),t(h,$),t($,ee),t($,tt),t($,D),b(D,l[2].quantity),t(h,st),t(h,te),t(te,se),t(te,lt),t(te,L),b(L,l[2].strategy),t(h,at),t(h,le),t(le,ae),t(le,rt),t(le,V),b(V,l[2].entry_date),t(h,nt),t(h,re),t(re,ne),t(re,it),t(re,S),b(S,l[2].exit_date),t(E,ot),t(E,ie),t(ie,oe),t(ie,ut),t(ie,A),b(A,l[2].notes),t(E,dt),t(E,ue),t(ue,ge),t(ue,ft),t(ue,de),t(de,fe),t(fe,be),t(fe,ct),t(fe,B),t(B,vt),t(B,Ne),t(de,pt),t(de,ce),t(ce,ye),t(ce,_t),t(ce,U),t(U,Pe),t(U,mt),t(E,ht),t(E,ve),t(ve,J),t(J,gt),t(ve,bt),t(ve,W),t(W,Ve),yt||(Ut=[q(a,"click",l[8]),q(k,"input",l[10]),q(g,"change",l[11]),q(T,"input",l[12]),q(I,"input",l[13]),q(D,"input",l[14]),q(L,"input",l[15]),q(V,"input",l[16]),q(S,"input",l[17]),q(A,"input",l[18]),q(J,"click",l[8]),q(E,"submit",l[7]),q(s,"click",es(l[9])),q(u,"click",l[8])],yt=!0)},p(i,f){var X,ke;f&1&&d!==(d=(X=i[0])!=null&&X.id?"Edit Trade":"New Trade")&&qe(y,d),i[5]?j?j.p(i,f):(j=Xt(i),j.c(),j.m(s,je)):j&&(j.d(1),j=null),f&16&&(k.disabled=i[4]),f&4&&k.value!==i[2].symbol&&b(k,i[2].symbol),f&16&&(g.disabled=i[4]),f&4&&Kt(g,i[2].side),f&16&&(T.disabled=i[4]),f&4&&Ce(T.value)!==i[2].entry_price&&b(T,i[2].entry_price),f&16&&(I.disabled=i[4]),f&4&&Ce(I.value)!==i[2].exit_price&&b(I,i[2].exit_price),f&16&&(D.disabled=i[4]),f&4&&Ce(D.value)!==i[2].quantity&&b(D,i[2].quantity),f&16&&(L.disabled=i[4]),f&4&&L.value!==i[2].strategy&&b(L,i[2].strategy),f&16&&(V.disabled=i[4]),f&4&&b(V,i[2].entry_date),f&16&&(S.disabled=i[4]),f&4&&b(S,i[2].exit_date),f&16&&(A.disabled=i[4]),f&4&&b(A,i[2].notes),f&8&&Te!==(Te=i[3].toFixed(2)+"")&&qe(Ne,Te),f&8&&_e(B,"profit",i[3]>0),f&8&&_e(B,"loss",i[3]<0),f&64&&Ie!==(Ie=i[6].toFixed(2)+"")&&qe(Pe,Ie),f&8&&_e(U,"profit",i[3]>0),f&8&&_e(U,"loss",i[3]<0),f&16&&(J.disabled=i[4]),f&17&&De!==(De=i[4]?"Saving...":(ke=i[0])!=null&&ke.id?"Update Trade":"Create Trade")&&qe(Ve,De),f&16&&(W.disabled=i[4])},d(i){i&&c(u),j&&j.d(),yt=!1,$t(Ut)}}}function Xt(l){let u,s;return{c(){u=n("div"),s=he(l[5]),this.h()},l(o){u=r(o,"DIV",{class:!0});var m=_(u);s=me(m,l[5]),m.forEach(c),this.h()},h(){e(u,"class","error-message svelte-kmjgfz")},m(o,m){we(o,u,m),t(u,s)},p(o,m){m&32&&qe(s,o[5])},d(o){o&&c(u)}}}function ps(l){let u,s=l[1]&&Wt(l);return{c(){s&&s.c(),u=Jt()},l(o){s&&s.l(o),u=Jt()},m(o,m){s&&s.m(o,m),we(o,u,m)},p(o,[m]){o[1]?s?s.p(o,m):(s=Wt(o),s.c(),s.m(u.parentNode,u)):s&&(s.d(1),s=null)},i:Et,o:Et,d(o){o&&c(u),s&&s.d(o)}}}function _s(l,u,s){let o,m,{trade:d=null}=u,{show:y=!1}=u;const N=Zt();let a={symbol:"",side:"long",entry_price:0,exit_price:0,quantity:0,entry_date:"",exit_date:"",strategy:"",notes:""},F=!1,w="";async function je(P){P.preventDefault(),s(4,F=!0),s(5,w="");try{if(d!=null&&d.id)await Qt.updateTrade(d.id,a),N("save",{type:"update",trade:{...d,...a}});else{const g=await Qt.createTrade(a);N("save",{type:"create",trade:g})}E()}catch(g){s(5,w=g.message||"Failed to save trade")}finally{s(4,F=!1)}}function E(){N("close"),s(2,a={symbol:"",side:"long",entry_price:0,exit_price:0,quantity:0,entry_date:"",exit_date:"",strategy:"",notes:""}),s(5,w="")}function h(P){ss.call(this,l,P)}function O(){a.symbol=this.value,s(2,a),s(0,d)}function M(){a.side=ls(this),s(2,a),s(0,d)}function Le(){a.entry_price=Ce(this.value),s(2,a),s(0,d)}function ze(){a.exit_price=Ce(this.value),s(2,a),s(0,d)}function k(){a.quantity=Ce(this.value),s(2,a),s(0,d)}function Ee(){a.strategy=this.value,s(2,a),s(0,d)}function H(){a.entry_date=this.value,s(2,a),s(0,d)}function R(){a.exit_date=this.value,s(2,a),s(0,d)}function Ae(){a.notes=this.value,s(2,a),s(0,d)}return l.$$set=P=>{"trade"in P&&s(0,d=P.trade),"show"in P&&s(1,y=P.show)},l.$$.update=()=>{l.$$.dirty&1&&d&&s(2,a={symbol:d.symbol||"",side:d.side||"long",entry_price:d.entry_price||0,exit_price:d.exit_price||0,quantity:d.quantity||0,entry_date:d.entry_date||"",exit_date:d.exit_date||"",strategy:d.strategy||"",notes:d.notes||""}),l.$$.dirty&4&&s(3,o=a.side==="long"?(a.exit_price-a.entry_price)*a.quantity:(a.entry_price-a.exit_price)*a.quantity),l.$$.dirty&12&&s(6,m=a.entry_price>0?o/(a.entry_price*a.quantity)*100:0)},[d,y,a,o,F,w,m,je,E,h,O,M,Le,ze,k,Ee,H,R,Ae]}class ms extends xt{constructor(u){super(),Gt(this,u,_s,ps,Yt,{trade:0,show:1})}}function hs(l){let u,s,o,m='<h1 class="svelte-13j6aer">Add New Trade</h1> <p class="svelte-13j6aer">Record your trading activity</p>',d,y,N;return y=new ms({props:{show:gs}}),y.$on("save",l[0]),y.$on("close",l[1]),{c(){u=p(),s=n("div"),o=n("header"),o.innerHTML=m,d=p(),ds(y.$$.fragment),this.h()},l(a){os("svelte-1hqzp5s",document.head).forEach(c),u=v(a),s=r(a,"DIV",{class:!0});var w=_(s);o=r(w,"HEADER",{class:!0,"data-svelte-h":!0}),z(o)!=="svelte-wbq9y2"&&(o.innerHTML=m),d=v(w),us(y.$$.fragment,w),w.forEach(c),this.h()},h(){document.title="Add New Trade - TradeSense",e(o,"class","page-header svelte-13j6aer"),e(s,"class","trade-entry-page svelte-13j6aer")},m(a,F){we(a,u,F),we(a,s,F),t(s,o),t(s,d),is(y,s,null),N=!0},p:Et,i(a){N||(ns(y.$$.fragment,a),N=!0)},o(a){rs(y.$$.fragment,a),N=!1},d(a){a&&(c(u),c(s)),as(y)}}}let gs=!0;function bs(l){fs(()=>{cs(vs)||zt("/login")});function u(o){zt("/tradelog")}function s(){zt("/tradelog")}return[u,s]}class Es extends xt{constructor(u){super(),Gt(this,u,bs,hs,Yt,{})}}export{Es as component};
