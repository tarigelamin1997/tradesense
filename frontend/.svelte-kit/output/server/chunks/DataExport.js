import { c as create_ssr_component, v as validate_component, d as escape } from "./ssr.js";
import "./ssr-safe.js";
import { D as Download } from "./download.js";
const css = {
  code: ".export-dropdown.svelte-869mkx{position:relative;display:inline-block}.export-button.svelte-869mkx{display:flex;align-items:center;gap:0.5rem;padding:0.75rem 1.5rem;background:white;border:1px solid #e5e7eb;border-radius:6px;font-size:0.875rem;font-weight:500;color:#374151;cursor:pointer;transition:all 0.2s}.export-button.svelte-869mkx:hover:not(:disabled){background:#f9fafb;border-color:#d1d5db}.export-button.svelte-869mkx:disabled{opacity:0.6;cursor:not-allowed}.export-button.success.svelte-869mkx{background:#d1fae5;border-color:#6ee7b7;color:#065f46}.spinner.svelte-869mkx{width:18px;height:18px;border:2px solid #e5e7eb;border-top-color:#10b981;border-radius:50%;animation:svelte-869mkx-spin 0.8s linear infinite}@keyframes svelte-869mkx-spin{to{transform:rotate(360deg)}}.export-menu.svelte-869mkx{position:absolute;top:calc(100% + 0.5rem);right:0;background:white;border:1px solid #e5e7eb;border-radius:8px;box-shadow:0 4px 6px -1px rgba(0, 0, 0, 0.1);min-width:250px;z-index:100;overflow:hidden;animation:svelte-869mkx-slideDown 0.2s ease-out}@keyframes svelte-869mkx-slideDown{from{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}.menu-header.svelte-869mkx{padding:0.75rem 1rem;background:#f9fafb;border-bottom:1px solid #e5e7eb;font-size:0.75rem;font-weight:600;color:#6b7280;text-transform:uppercase;letter-spacing:0.05em}.format-option.svelte-869mkx{display:flex;align-items:center;gap:1rem;width:100%;padding:0.875rem 1rem;background:none;border:none;cursor:pointer;transition:background 0.2s;text-align:left}.format-option.svelte-869mkx:hover{background:#f9fafb}.format-option.svelte-869mkx svg{color:#6b7280;flex-shrink:0}.format-info.svelte-869mkx{flex:1}.format-label.svelte-869mkx{font-weight:500;color:#1a1a1a;margin-bottom:0.125rem}.format-description.svelte-869mkx{font-size:0.75rem;color:#6b7280}.export-button.primary.svelte-869mkx{background:#10b981;color:white;border-color:#10b981}.export-button.primary.svelte-869mkx:hover:not(:disabled){background:#059669;border-color:#059669}@media(max-width: 640px){.export-menu.svelte-869mkx{right:auto;left:0}.export-button.svelte-869mkx{padding:0.625rem 1rem}}",
  map: '{"version":3,"file":"DataExport.svelte","sources":["DataExport.svelte"],"sourcesContent":["<script lang=\\"ts\\">import { Download, FileText, Table, FileSpreadsheet, Check } from \\"lucide-svelte\\";\\nimport { api } from \\"$lib/api/ssr-safe\\";\\nimport { logger } from \\"$lib/utils/logger\\";\\nexport let endpoint;\\nexport let filename;\\nexport let buttonText = \\"Export\\";\\nexport let buttonClass = \\"\\";\\nexport let data = [];\\nlet showMenu = false;\\nlet exporting = false;\\nlet exportSuccess = false;\\nconst exportFormats = [\\n  { id: \\"csv\\", label: \\"CSV\\", icon: FileText, description: \\"Comma-separated values\\" },\\n  { id: \\"excel\\", label: \\"Excel\\", icon: Table, description: \\"Microsoft Excel format\\" },\\n  { id: \\"json\\", label: \\"JSON\\", icon: FileSpreadsheet, description: \\"JavaScript Object Notation\\" }\\n];\\nasync function handleExport(format) {\\n  exporting = true;\\n  exportSuccess = false;\\n  try {\\n    if (endpoint) {\\n      const response = await api.get(endpoint, {\\n        params: { format },\\n        responseType: \\"blob\\"\\n      });\\n      const url = window.URL.createObjectURL(new Blob([response]));\\n      const link = document.createElement(\\"a\\");\\n      link.href = url;\\n      link.setAttribute(\\"download\\", `${filename}_${(/* @__PURE__ */ new Date()).toISOString().split(\\"T\\")[0]}.${format}`);\\n      document.body.appendChild(link);\\n      link.click();\\n      link.remove();\\n      window.URL.revokeObjectURL(url);\\n    } else if (data.length > 0) {\\n      let content;\\n      let mimeType;\\n      switch (format) {\\n        case \\"csv\\":\\n          content = convertToCSV(data);\\n          mimeType = \\"text/csv\\";\\n          break;\\n        case \\"json\\":\\n          content = JSON.stringify(data, null, 2);\\n          mimeType = \\"application/json\\";\\n          break;\\n        case \\"excel\\":\\n          content = convertToCSV(data);\\n          mimeType = \\"text/csv\\";\\n          format = \\"csv\\";\\n          break;\\n        default:\\n          throw new Error(\\"Unsupported format\\");\\n      }\\n      const blob = new Blob([content], { type: mimeType });\\n      const url = window.URL.createObjectURL(blob);\\n      const link = document.createElement(\\"a\\");\\n      link.href = url;\\n      link.setAttribute(\\"download\\", `${filename}_${(/* @__PURE__ */ new Date()).toISOString().split(\\"T\\")[0]}.${format}`);\\n      document.body.appendChild(link);\\n      link.click();\\n      link.remove();\\n      window.URL.revokeObjectURL(url);\\n    }\\n    exportSuccess = true;\\n    setTimeout(() => {\\n      exportSuccess = false;\\n      showMenu = false;\\n    }, 2e3);\\n  } catch (error) {\\n    logger.error(\\"Export failed:\\", error);\\n    alert(\\"Export failed. Please try again.\\");\\n  } finally {\\n    exporting = false;\\n  }\\n}\\nfunction convertToCSV(data2) {\\n  if (data2.length === 0) return \\"\\";\\n  const headers = Object.keys(data2[0]);\\n  const csvHeaders = headers.join(\\",\\");\\n  const csvRows = data2.map((row) => {\\n    return headers.map((header) => {\\n      const value = row[header];\\n      if (typeof value === \\"string\\" && (value.includes(\\",\\") || value.includes(\'\\"\'))) {\\n        return `\\"${value.replace(/\\"/g, \'\\"\\"\')}\\"`;\\n      }\\n      return value ?? \\"\\";\\n    }).join(\\",\\");\\n  });\\n  return [csvHeaders, ...csvRows].join(\\"\\\\n\\");\\n}\\nfunction handleClickOutside(event) {\\n  if (showMenu && !event.target.closest(\\".export-dropdown\\")) {\\n    showMenu = false;\\n  }\\n}\\n<\/script>\\n\\n<svelte:window on:click={handleClickOutside} />\\n\\n<div class=\\"export-dropdown\\">\\n\\t<button\\n\\t\\tclass=\\"export-button {buttonClass}\\"\\n\\t\\tclass:success={exportSuccess}\\n\\t\\ton:click={() => showMenu = !showMenu}\\n\\t\\tdisabled={exporting}\\n\\t>\\n\\t\\t{#if exportSuccess}\\n\\t\\t\\t<Check size={18} />\\n\\t\\t\\tExported!\\n\\t\\t{:else if exporting}\\n\\t\\t\\t<div class=\\"spinner\\"></div>\\n\\t\\t\\tExporting...\\n\\t\\t{:else}\\n\\t\\t\\t<Download size={18} />\\n\\t\\t\\t{buttonText}\\n\\t\\t{/if}\\n\\t</button>\\n\\t\\n\\t{#if showMenu && !exporting}\\n\\t\\t<div class=\\"export-menu\\">\\n\\t\\t\\t<div class=\\"menu-header\\">Export Format</div>\\n\\t\\t\\t{#each exportFormats as format}\\n\\t\\t\\t\\t<button\\n\\t\\t\\t\\t\\tclass=\\"format-option\\"\\n\\t\\t\\t\\t\\ton:click={() => handleExport(format.id)}\\n\\t\\t\\t\\t>\\n\\t\\t\\t\\t\\t<svelte:component this={format.icon} size={20} />\\n\\t\\t\\t\\t\\t<div class=\\"format-info\\">\\n\\t\\t\\t\\t\\t\\t<div class=\\"format-label\\">{format.label}</div>\\n\\t\\t\\t\\t\\t\\t<div class=\\"format-description\\">{format.description}</div>\\n\\t\\t\\t\\t\\t</div>\\n\\t\\t\\t\\t</button>\\n\\t\\t\\t{/each}\\n\\t\\t</div>\\n\\t{/if}\\n</div>\\n\\n<style>\\n\\t.export-dropdown {\\n\\t\\tposition: relative;\\n\\t\\tdisplay: inline-block;\\n\\t}\\n\\t\\n\\t.export-button {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tgap: 0.5rem;\\n\\t\\tpadding: 0.75rem 1.5rem;\\n\\t\\tbackground: white;\\n\\t\\tborder: 1px solid #e5e7eb;\\n\\t\\tborder-radius: 6px;\\n\\t\\tfont-size: 0.875rem;\\n\\t\\tfont-weight: 500;\\n\\t\\tcolor: #374151;\\n\\t\\tcursor: pointer;\\n\\t\\ttransition: all 0.2s;\\n\\t}\\n\\t\\n\\t.export-button:hover:not(:disabled) {\\n\\t\\tbackground: #f9fafb;\\n\\t\\tborder-color: #d1d5db;\\n\\t}\\n\\t\\n\\t.export-button:disabled {\\n\\t\\topacity: 0.6;\\n\\t\\tcursor: not-allowed;\\n\\t}\\n\\t\\n\\t.export-button.success {\\n\\t\\tbackground: #d1fae5;\\n\\t\\tborder-color: #6ee7b7;\\n\\t\\tcolor: #065f46;\\n\\t}\\n\\t\\n\\t.spinner {\\n\\t\\twidth: 18px;\\n\\t\\theight: 18px;\\n\\t\\tborder: 2px solid #e5e7eb;\\n\\t\\tborder-top-color: #10b981;\\n\\t\\tborder-radius: 50%;\\n\\t\\tanimation: spin 0.8s linear infinite;\\n\\t}\\n\\t\\n\\t@keyframes spin {\\n\\t\\tto { transform: rotate(360deg); }\\n\\t}\\n\\t\\n\\t.export-menu {\\n\\t\\tposition: absolute;\\n\\t\\ttop: calc(100% + 0.5rem);\\n\\t\\tright: 0;\\n\\t\\tbackground: white;\\n\\t\\tborder: 1px solid #e5e7eb;\\n\\t\\tborder-radius: 8px;\\n\\t\\tbox-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\\n\\t\\tmin-width: 250px;\\n\\t\\tz-index: 100;\\n\\t\\toverflow: hidden;\\n\\t\\tanimation: slideDown 0.2s ease-out;\\n\\t}\\n\\t\\n\\t@keyframes slideDown {\\n\\t\\tfrom {\\n\\t\\t\\topacity: 0;\\n\\t\\t\\ttransform: translateY(-10px);\\n\\t\\t}\\n\\t\\tto {\\n\\t\\t\\topacity: 1;\\n\\t\\t\\ttransform: translateY(0);\\n\\t\\t}\\n\\t}\\n\\t\\n\\t.menu-header {\\n\\t\\tpadding: 0.75rem 1rem;\\n\\t\\tbackground: #f9fafb;\\n\\t\\tborder-bottom: 1px solid #e5e7eb;\\n\\t\\tfont-size: 0.75rem;\\n\\t\\tfont-weight: 600;\\n\\t\\tcolor: #6b7280;\\n\\t\\ttext-transform: uppercase;\\n\\t\\tletter-spacing: 0.05em;\\n\\t}\\n\\t\\n\\t.format-option {\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: center;\\n\\t\\tgap: 1rem;\\n\\t\\twidth: 100%;\\n\\t\\tpadding: 0.875rem 1rem;\\n\\t\\tbackground: none;\\n\\t\\tborder: none;\\n\\t\\tcursor: pointer;\\n\\t\\ttransition: background 0.2s;\\n\\t\\ttext-align: left;\\n\\t}\\n\\t\\n\\t.format-option:hover {\\n\\t\\tbackground: #f9fafb;\\n\\t}\\n\\t\\n\\t.format-option :global(svg) {\\n\\t\\tcolor: #6b7280;\\n\\t\\tflex-shrink: 0;\\n\\t}\\n\\t\\n\\t.format-info {\\n\\t\\tflex: 1;\\n\\t}\\n\\t\\n\\t.format-label {\\n\\t\\tfont-weight: 500;\\n\\t\\tcolor: #1a1a1a;\\n\\t\\tmargin-bottom: 0.125rem;\\n\\t}\\n\\t\\n\\t.format-description {\\n\\t\\tfont-size: 0.75rem;\\n\\t\\tcolor: #6b7280;\\n\\t}\\n\\t\\n\\t/* Custom button styles can be passed via buttonClass */\\n\\t.export-button.primary {\\n\\t\\tbackground: #10b981;\\n\\t\\tcolor: white;\\n\\t\\tborder-color: #10b981;\\n\\t}\\n\\t\\n\\t.export-button.primary:hover:not(:disabled) {\\n\\t\\tbackground: #059669;\\n\\t\\tborder-color: #059669;\\n\\t}\\n\\t\\n\\t/* Mobile Styles */\\n\\t@media (max-width: 640px) {\\n\\t\\t.export-menu {\\n\\t\\t\\tright: auto;\\n\\t\\t\\tleft: 0;\\n\\t\\t}\\n\\t\\t\\n\\t\\t.export-button {\\n\\t\\t\\tpadding: 0.625rem 1rem;\\n\\t\\t}\\n\\t}\\n</style>"],"names":[],"mappings":"AA0IC,8BAAiB,CAChB,QAAQ,CAAE,QAAQ,CAClB,OAAO,CAAE,YACV,CAEA,4BAAe,CACd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,MAAM,CACX,OAAO,CAAE,OAAO,CAAC,MAAM,CACvB,UAAU,CAAE,KAAK,CACjB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,aAAa,CAAE,GAAG,CAClB,SAAS,CAAE,QAAQ,CACnB,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,OAAO,CACd,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,GAAG,CAAC,IACjB,CAEA,4BAAc,MAAM,KAAK,SAAS,CAAE,CACnC,UAAU,CAAE,OAAO,CACnB,YAAY,CAAE,OACf,CAEA,4BAAc,SAAU,CACvB,OAAO,CAAE,GAAG,CACZ,MAAM,CAAE,WACT,CAEA,cAAc,sBAAS,CACtB,UAAU,CAAE,OAAO,CACnB,YAAY,CAAE,OAAO,CACrB,KAAK,CAAE,OACR,CAEA,sBAAS,CACR,KAAK,CAAE,IAAI,CACX,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,gBAAgB,CAAE,OAAO,CACzB,aAAa,CAAE,GAAG,CAClB,SAAS,CAAE,kBAAI,CAAC,IAAI,CAAC,MAAM,CAAC,QAC7B,CAEA,WAAW,kBAAK,CACf,EAAG,CAAE,SAAS,CAAE,OAAO,MAAM,CAAG,CACjC,CAEA,0BAAa,CACZ,QAAQ,CAAE,QAAQ,CAClB,GAAG,CAAE,KAAK,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,CACxB,KAAK,CAAE,CAAC,CACR,UAAU,CAAE,KAAK,CACjB,MAAM,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CACzB,aAAa,CAAE,GAAG,CAClB,UAAU,CAAE,CAAC,CAAC,GAAG,CAAC,GAAG,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAC7C,SAAS,CAAE,KAAK,CAChB,OAAO,CAAE,GAAG,CACZ,QAAQ,CAAE,MAAM,CAChB,SAAS,CAAE,uBAAS,CAAC,IAAI,CAAC,QAC3B,CAEA,WAAW,uBAAU,CACpB,IAAK,CACJ,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,WAAW,KAAK,CAC5B,CACA,EAAG,CACF,OAAO,CAAE,CAAC,CACV,SAAS,CAAE,WAAW,CAAC,CACxB,CACD,CAEA,0BAAa,CACZ,OAAO,CAAE,OAAO,CAAC,IAAI,CACrB,UAAU,CAAE,OAAO,CACnB,aAAa,CAAE,GAAG,CAAC,KAAK,CAAC,OAAO,CAChC,SAAS,CAAE,OAAO,CAClB,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,OAAO,CACd,cAAc,CAAE,SAAS,CACzB,cAAc,CAAE,MACjB,CAEA,4BAAe,CACd,OAAO,CAAE,IAAI,CACb,WAAW,CAAE,MAAM,CACnB,GAAG,CAAE,IAAI,CACT,KAAK,CAAE,IAAI,CACX,OAAO,CAAE,QAAQ,CAAC,IAAI,CACtB,UAAU,CAAE,IAAI,CAChB,MAAM,CAAE,IAAI,CACZ,MAAM,CAAE,OAAO,CACf,UAAU,CAAE,UAAU,CAAC,IAAI,CAC3B,UAAU,CAAE,IACb,CAEA,4BAAc,MAAO,CACpB,UAAU,CAAE,OACb,CAEA,4BAAc,CAAS,GAAK,CAC3B,KAAK,CAAE,OAAO,CACd,WAAW,CAAE,CACd,CAEA,0BAAa,CACZ,IAAI,CAAE,CACP,CAEA,2BAAc,CACb,WAAW,CAAE,GAAG,CAChB,KAAK,CAAE,OAAO,CACd,aAAa,CAAE,QAChB,CAEA,iCAAoB,CACnB,SAAS,CAAE,OAAO,CAClB,KAAK,CAAE,OACR,CAGA,cAAc,sBAAS,CACtB,UAAU,CAAE,OAAO,CACnB,KAAK,CAAE,KAAK,CACZ,YAAY,CAAE,OACf,CAEA,cAAc,sBAAQ,MAAM,KAAK,SAAS,CAAE,CAC3C,UAAU,CAAE,OAAO,CACnB,YAAY,CAAE,OACf,CAGA,MAAO,YAAY,KAAK,CAAE,CACzB,0BAAa,CACZ,KAAK,CAAE,IAAI,CACX,IAAI,CAAE,CACP,CAEA,4BAAe,CACd,OAAO,CAAE,QAAQ,CAAC,IACnB,CACD"}'
};
const DataExport = create_ssr_component(($$result, $$props, $$bindings, slots) => {
  let { endpoint } = $$props;
  let { filename } = $$props;
  let { buttonText = "Export" } = $$props;
  let { buttonClass = "" } = $$props;
  let { data = [] } = $$props;
  if ($$props.endpoint === void 0 && $$bindings.endpoint && endpoint !== void 0) $$bindings.endpoint(endpoint);
  if ($$props.filename === void 0 && $$bindings.filename && filename !== void 0) $$bindings.filename(filename);
  if ($$props.buttonText === void 0 && $$bindings.buttonText && buttonText !== void 0) $$bindings.buttonText(buttonText);
  if ($$props.buttonClass === void 0 && $$bindings.buttonClass && buttonClass !== void 0) $$bindings.buttonClass(buttonClass);
  if ($$props.data === void 0 && $$bindings.data && data !== void 0) $$bindings.data(data);
  $$result.css.add(css);
  return ` <div class="export-dropdown svelte-869mkx"><button class="${[
    "export-button " + escape(buttonClass, true) + " svelte-869mkx",
    ""
  ].join(" ").trim()}" ${""}>${`${`${validate_component(Download, "Download").$$render($$result, { size: 18 }, {}, {})} ${escape(buttonText)}`}`}</button> ${``} </div>`;
});
export {
  DataExport as D
};
