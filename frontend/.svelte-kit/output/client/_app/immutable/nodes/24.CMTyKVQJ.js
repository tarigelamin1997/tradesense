import{S as ut,i as ct,s as ft,d as m,y as Ne,N as dt,t as ue,a as te,J as Xe,I as Ue,e as Ce,D as r,O as me,f as N,h as o,z as qe,G as Y,a3 as mt,k as d,l as C,m as R,o as E,A as He,p as oe,q as h,r as I,B as Fe,v as re,w as _t,H as pt,Z as ke,n as je,E as gt,M as Ze}from"../chunks/Lbc7qOuA.js";import"../chunks/IHki7fMi.js";import{g as Qe}from"../chunks/BFH-i71J.js";import{b as Ye}from"../chunks/BhqvrxIK.js";import{e as xe}from"../chunks/BPb2qfkA.js";import{b as $e}from"../chunks/Bt-Xh7oU.js";import{a as et}from"../chunks/BfkaMl9e.js";import{I as ht}from"../chunks/B3HFKiyR.js";function tt(l,e,t){const s=l.slice();return s[21]=e[t],s}function lt(l){let e,t,s="Verification Method",n,i,_,g=xe(l[0]),u=[];for(let a=0;a<g.length;a+=1)u[a]=st(tt(l,g,a));const c=a=>ue(u[a],1,1,()=>{u[a]=null});return{c(){e=h("div"),t=h("label"),t.textContent=s,n=I(),i=h("div");for(let a=0;a<u.length;a+=1)u[a].c();this.h()},l(a){e=d(a,"DIV",{class:!0});var f=C(e);t=d(f,"LABEL",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-jhd0f6"&&(t.textContent=s),n=E(f),i=d(f,"DIV",{class:!0});var p=C(i);for(let y=0;y<u.length;y+=1)u[y].l(p);p.forEach(m),f.forEach(m),this.h()},h(){r(t,"class","block text-sm font-medium text-gray-700 mb-2"),r(i,"class","grid grid-cols-1 gap-2"),r(e,"class","mb-6")},m(a,f){N(a,e,f),o(e,t),o(e,n),o(e,i);for(let p=0;p<u.length;p+=1)u[p]&&u[p].m(i,null);_=!0},p(a,f){if(f&2053){g=xe(a[0]);let p;for(p=0;p<g.length;p+=1){const y=tt(a,g,p);u[p]?(u[p].p(y,f),te(u[p],1)):(u[p]=st(y),u[p].c(),te(u[p],1),u[p].m(i,null))}for(Xe(),p=g.length;p<u.length;p+=1)c(p);Ue()}},i(a){if(!_){for(let f=0;f<g.length;f+=1)te(u[f]);_=!0}},o(a){u=u.filter(Boolean);for(let f=0;f<u.length;f+=1)ue(u[f]);_=!1},d(a){a&&m(e),pt(u,a)}}}function st(l){let e,t,s,n,i,_=l[21]==="totp"?"Authenticator App":l[21]==="sms"?"Text Message":l[21]==="email"?"Email":"Backup Code",g,u,c,a,f;s=new ht({props:{name:l[21]==="totp"?"smartphone":l[21]==="sms"?"message-square":l[21]==="email"?"mail":"key",class:"w-5 h-5 mr-3 text-gray-600"}});function p(){return l[15](l[21])}return{c(){e=h("button"),t=h("div"),Fe(s.$$.fragment),n=I(),i=h("span"),g=re(_),u=I(),this.h()},l(y){e=d(y,"BUTTON",{class:!0});var v=C(e);t=d(v,"DIV",{class:!0});var k=C(t);He(s.$$.fragment,k),n=E(k),i=d(k,"SPAN",{class:!0});var A=C(i);g=oe(A,_),A.forEach(m),k.forEach(m),u=E(v),v.forEach(m),this.h()},h(){r(i,"class","font-medium"),r(t,"class","flex items-center"),r(e,"class","p-3 border rounded-lg text-left transition-colors"),ke(e,"border-indigo-500",l[2]===l[21]),ke(e,"bg-indigo-50",l[2]===l[21]),ke(e,"border-gray-200",l[2]!==l[21])},m(y,v){N(y,e,v),o(e,t),qe(s,t,null),o(t,n),o(t,i),o(i,g),o(e,u),c=!0,a||(f=Y(e,"click",p),a=!0)},p(y,v){l=y;const k={};v&1&&(k.name=l[21]==="totp"?"smartphone":l[21]==="sms"?"message-square":l[21]==="email"?"mail":"key"),s.$set(k),(!c||v&1)&&_!==(_=l[21]==="totp"?"Authenticator App":l[21]==="sms"?"Text Message":l[21]==="email"?"Email":"Backup Code")&&Ce(g,_),(!c||v&5)&&ke(e,"border-indigo-500",l[2]===l[21]),(!c||v&5)&&ke(e,"bg-indigo-50",l[2]===l[21]),(!c||v&5)&&ke(e,"border-gray-200",l[2]!==l[21])},i(y){c||(te(s.$$.fragment,y),c=!0)},o(y){ue(s.$$.fragment,y),c=!1},d(y){y&&m(e),Ne(s),a=!1,f()}}}function nt(l){let e,t;return{c(){e=h("div"),t=re(l[7]),this.h()},l(s){e=d(s,"DIV",{class:!0});var n=C(e);t=oe(n,l[7]),n.forEach(m),this.h()},h(){r(e,"class","mb-4 p-3 bg-red-50 border border-red-200 rounded-lg text-red-700 text-sm")},m(s,n){N(s,e,n),o(e,t)},p(s,n){n&128&&Ce(t,s[7])},d(s){s&&m(e)}}}function vt(l){let e,t="Sending code to your email...";return{c(){e=h("p"),e.textContent=t,this.h()},l(s){e=d(s,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1ku90f5"&&(e.textContent=t),this.h()},h(){r(e,"class","text-sm text-gray-600 mb-3")},m(s,n){N(s,e,n)},d(s){s&&m(e)}}}function bt(l){let e,t="Sending code to your phone...";return{c(){e=h("p"),e.textContent=t,this.h()},l(s){e=d(s,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1v19b9x"&&(e.textContent=t),this.h()},h(){r(e,"class","text-sm text-gray-600 mb-3")},m(s,n){N(s,e,n)},d(s){s&&m(e)}}}function kt(l){let e,t="Enter one of your backup recovery codes";return{c(){e=h("p"),e.textContent=t,this.h()},l(s){e=d(s,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-4we1rq"&&(e.textContent=t),this.h()},h(){r(e,"class","text-xs text-gray-500 mt-2")},m(s,n){N(s,e,n)},d(s){s&&m(e)}}}function yt(l){let e,t="Enter the 6-digit code from your authenticator app";return{c(){e=h("p"),e.textContent=t,this.h()},l(s){e=d(s,"P",{class:!0,"data-svelte-h":!0}),R(e)!=="svelte-1vubcsy"&&(e.textContent=t),this.h()},h(){r(e,"class","text-xs text-gray-500 mt-2")},m(s,n){N(s,e,n)},d(s){s&&m(e)}}}function ot(l){let e,t,s;return{c(){e=h("input"),this.h()},l(n){e=d(n,"INPUT",{type:!0,placeholder:!0,class:!0}),this.h()},h(){r(e,"type","text"),r(e,"placeholder","Device name (optional)"),r(e,"class","form-input mt-2 text-sm svelte-1fgympx")},m(n,i){N(n,e,i),me(e,l[5]),t||(s=Y(e,"input",l[18]),t=!0)},p(n,i){i&32&&e.value!==n[5]&&me(e,n[5])},d(n){n&&m(e),t=!1,s()}}}function rt(l){let e;return{c(){e=h("span"),this.h()},l(t){e=d(t,"SPAN",{class:!0}),C(e).forEach(m),this.h()},h(){r(e,"class","spinner mr-2 svelte-1fgympx")},m(t,s){N(t,e,s)},d(t){t&&m(e)}}}function at(l){let e,t,s,n;return{c(){e=h("button"),t=re("Resend Code"),this.h()},l(i){e=d(i,"BUTTON",{class:!0});var _=C(e);t=oe(_,"Resend Code"),_.forEach(m),this.h()},h(){e.disabled=l[6],r(e,"class","btn btn-secondary svelte-1fgympx")},m(i,_){N(i,e,_),o(e,t),s||(n=Y(e,"click",l[19]),s=!0)},p(i,_){_&64&&(e.disabled=i[6])},d(i){i&&m(e),s=!1,n()}}}function Ct(l){let e;return{c(){e=re("Contact support for help")},l(t){e=oe(t,"Contact support for help")},m(t,s){N(t,e,s)},p:je,d(t){t&&m(e)}}}function Et(l){let e,t,s="backup code",n,i;return{c(){e=re("Try using a "),t=h("button"),t.textContent=s,this.h()},l(_){e=oe(_,"Try using a "),t=d(_,"BUTTON",{class:!0,"data-svelte-h":!0}),R(t)!=="svelte-uh65nl"&&(t.textContent=s),this.h()},h(){r(t,"class","text-indigo-600 hover:text-indigo-700 font-medium")},m(_,g){N(_,e,g),N(_,t,g),n||(i=Y(t,"click",l[20]),n=!0)},p:je,d(_){_&&(m(e),m(t)),n=!1,i()}}}function It(l){let e,t,s,n,i,_="Two-Factor Authentication",g,u,c,a,f,p="Enter your verification code to complete sign in",y,v,k,A,w,X,le=l[2]==="backup_codes"?"Backup Code":"Verification Code",se,P,ne,T,b,x,K,ae,z,Z,U,_e,$,ye="Trust this device for 30 days",L,j,V,D,W,ie,ce,pe,ge,fe,Be,Ee,de,Pe,Oe;c=new ht({props:{name:"x",class:"w-5 h-5"}});let M=l[0].length>1&&lt(l),q=l[7]&&nt(l);function Re(B,S){if(B[2]==="sms"&&!B[8])return bt;if(B[2]==="email"&&!B[8])return vt}let ve=Re(l),G=ve&&ve(l);function ze(B,S){if(B[2]==="totp")return yt;if(B[2]==="backup_codes")return kt}let be=ze(l),J=be&&be(l),H=l[4]&&ot(l),O=l[6]&&rt(),F=(l[2]==="sms"||l[2]==="email")&&l[8]&&at(l);function Ge(B,S){return S&1&&(Ee=null),Ee==null&&(Ee=!!B[0].includes("backup_codes")),Ee?Et:Ct}let Ie=Ge(l,-1),ee=Ie(l);return{c(){e=h("div"),t=h("div"),s=h("div"),n=h("div"),i=h("h2"),i.textContent=_,g=I(),u=h("button"),Fe(c.$$.fragment),a=I(),f=h("p"),f.textContent=p,y=I(),v=h("div"),M&&M.c(),k=I(),q&&q.c(),A=I(),w=h("div"),X=h("label"),se=re(le),P=I(),G&&G.c(),ne=I(),T=h("input"),K=I(),J&&J.c(),ae=I(),z=h("div"),Z=h("label"),U=h("input"),_e=I(),$=h("span"),$.textContent=ye,L=I(),H&&H.c(),j=I(),V=h("div"),D=h("button"),O&&O.c(),W=re(`
                    Verify`),ce=I(),F&&F.c(),pe=I(),ge=h("div"),fe=h("p"),Be=re(`Having trouble?
                    `),ee.c(),this.h()},l(B){e=d(B,"DIV",{class:!0});var S=C(e);t=d(S,"DIV",{class:!0});var we=C(t);s=d(we,"DIV",{class:!0});var Te=C(s);n=d(Te,"DIV",{class:!0});var Ve=C(n);i=d(Ve,"H2",{class:!0,"data-svelte-h":!0}),R(i)!=="svelte-10fs00n"&&(i.textContent=_),g=E(Ve),u=d(Ve,"BUTTON",{class:!0});var Je=C(u);He(c.$$.fragment,Je),Je.forEach(m),Ve.forEach(m),a=E(Te),f=d(Te,"P",{class:!0,"data-svelte-h":!0}),R(f)!=="svelte-14ixmk6"&&(f.textContent=p),Te.forEach(m),y=E(we),v=d(we,"DIV",{class:!0});var Q=C(v);M&&M.l(Q),k=E(Q),q&&q.l(Q),A=E(Q),w=d(Q,"DIV",{class:!0});var he=C(w);X=d(he,"LABEL",{class:!0});var Ke=C(X);se=oe(Ke,le),Ke.forEach(m),P=E(he),G&&G.l(he),ne=E(he),T=d(he,"INPUT",{type:!0,placeholder:!0,maxlength:!0,class:!0,autocomplete:!0}),K=E(he),J&&J.l(he),he.forEach(m),ae=E(Q),z=d(Q,"DIV",{class:!0});var De=C(z);Z=d(De,"LABEL",{class:!0});var Se=C(Z);U=d(Se,"INPUT",{type:!0,class:!0}),_e=E(Se),$=d(Se,"SPAN",{class:!0,"data-svelte-h":!0}),R($)!=="svelte-1agmb7f"&&($.textContent=ye),Se.forEach(m),L=E(De),H&&H.l(De),De.forEach(m),j=E(Q),V=d(Q,"DIV",{class:!0});var Ae=C(V);D=d(Ae,"BUTTON",{class:!0});var Le=C(D);O&&O.l(Le),W=oe(Le,`
                    Verify`),Le.forEach(m),ce=E(Ae),F&&F.l(Ae),Ae.forEach(m),pe=E(Q),ge=d(Q,"DIV",{class:!0});var We=C(ge);fe=d(We,"P",{class:!0});var Me=C(fe);Be=oe(Me,`Having trouble?
                    `),ee.l(Me),Me.forEach(m),We.forEach(m),Q.forEach(m),we.forEach(m),S.forEach(m),this.h()},h(){r(i,"class","text-2xl font-bold text-gray-900"),r(u,"class","text-gray-500 hover:text-gray-700"),r(n,"class","flex items-center justify-between mb-4"),r(f,"class","text-gray-600"),r(s,"class","p-6 border-b border-gray-200"),r(X,"class","block text-sm font-medium text-gray-700 mb-2"),r(T,"type","text"),r(T,"placeholder",b=l[2]==="backup_codes"?"XXXX-XXXX":"000000"),r(T,"maxlength",x=l[2]==="backup_codes"?9:6),r(T,"class","form-input text-center text-lg font-mono svelte-1fgympx"),r(T,"autocomplete","off"),r(w,"class","mb-4"),r(U,"type","checkbox"),r(U,"class","rounded border-gray-300 text-indigo-600 focus:ring-indigo-500 mr-2"),r($,"class","text-sm text-gray-700"),r(Z,"class","flex items-center"),r(z,"class","mb-6"),D.disabled=ie=l[6]||l[3].length<6,r(D,"class","btn btn-primary flex-1 svelte-1fgympx"),r(V,"class","flex space-x-3"),r(fe,"class","text-sm text-gray-600"),r(ge,"class","mt-6 text-center"),r(v,"class","p-6"),r(t,"class","bg-white rounded-lg shadow-lg border border-gray-200"),r(e,"class","max-w-md mx-auto p-6")},m(B,S){N(B,e,S),o(e,t),o(t,s),o(s,n),o(n,i),o(n,g),o(n,u),qe(c,u,null),o(s,a),o(s,f),o(t,y),o(t,v),M&&M.m(v,null),o(v,k),q&&q.m(v,null),o(v,A),o(v,w),o(w,X),o(X,se),o(w,P),G&&G.m(w,null),o(w,ne),o(w,T),me(T,l[3]),o(w,K),J&&J.m(w,null),o(v,ae),o(v,z),o(z,Z),o(Z,U),U.checked=l[4],o(Z,_e),o(Z,$),o(z,L),H&&H.m(z,null),o(v,j),o(v,V),o(V,D),O&&O.m(D,null),o(D,W),o(V,ce),F&&F.m(V,null),o(v,pe),o(v,ge),o(ge,fe),o(fe,Be),ee.m(fe,null),de=!0,Pe||(Oe=[Y(u,"click",function(){mt(l[1])&&l[1].apply(this,arguments)}),Y(T,"input",l[16]),Y(T,"keydown",l[12]),Y(U,"change",l[17]),Y(D,"click",l[10])],Pe=!0)},p(B,[S]){l=B,l[0].length>1?M?(M.p(l,S),S&1&&te(M,1)):(M=lt(l),M.c(),te(M,1),M.m(v,k)):M&&(Xe(),ue(M,1,1,()=>{M=null}),Ue()),l[7]?q?q.p(l,S):(q=nt(l),q.c(),q.m(v,A)):q&&(q.d(1),q=null),(!de||S&4)&&le!==(le=l[2]==="backup_codes"?"Backup Code":"Verification Code")&&Ce(se,le),ve!==(ve=Re(l))&&(G&&G.d(1),G=ve&&ve(l),G&&(G.c(),G.m(w,ne))),(!de||S&4&&b!==(b=l[2]==="backup_codes"?"XXXX-XXXX":"000000"))&&r(T,"placeholder",b),(!de||S&4&&x!==(x=l[2]==="backup_codes"?9:6))&&r(T,"maxlength",x),S&8&&T.value!==l[3]&&me(T,l[3]),be!==(be=ze(l))&&(J&&J.d(1),J=be&&be(l),J&&(J.c(),J.m(w,null))),S&16&&(U.checked=l[4]),l[4]?H?H.p(l,S):(H=ot(l),H.c(),H.m(z,null)):H&&(H.d(1),H=null),l[6]?O||(O=rt(),O.c(),O.m(D,W)):O&&(O.d(1),O=null),(!de||S&72&&ie!==(ie=l[6]||l[3].length<6))&&(D.disabled=ie),(l[2]==="sms"||l[2]==="email")&&l[8]?F?F.p(l,S):(F=at(l),F.c(),F.m(V,null)):F&&(F.d(1),F=null),Ie===(Ie=Ge(l,S))&&ee?ee.p(l,S):(ee.d(1),ee=Ie(l),ee&&(ee.c(),ee.m(fe,null)))},i(B){de||(te(c.$$.fragment,B),te(M),de=!0)},o(B){ue(c.$$.fragment,B),ue(M),de=!1},d(B){B&&m(e),Ne(c),M&&M.d(),q&&q.d(),G&&G.d(),J&&J.d(),H&&H.d(),O&&O.d(),F&&F.d(),ee.d(),Pe=!1,dt(Oe)}}}function wt(l,e,t){let{sessionId:s}=e,{methods:n=[]}=e,{onSuccess:i=()=>{}}=e,{onCancel:_=()=>{}}=e,g=n[0]||"totp",u="",c=!1,a="",f=!1,p=null,y=!1;async function v(b){try{t(6,f=!0),t(7,p=null);const x=await et.post("/mfa/challenge",{method:b,session_id:s});(b==="sms"||b==="email")&&t(8,y=!0)}catch(x){t(7,p=x.message||"Failed to send verification code")}finally{t(6,f=!1)}}async function k(){try{t(6,f=!0),t(7,p=null);const b=await et.post("/mfa/verify",{method:g,code:u,trust_device:c,device_name:c?a||($e?navigator.userAgent:"Unknown"):null,session_id:s});b.success&&($e&&b.trust_token&&localStorage.setItem("mfa_trust_token",b.trust_token),i({access_token:b.access_token,token_type:b.token_type}))}catch(b){t(7,p=b.message||"Invalid verification code"),t(3,u="")}finally{t(6,f=!1)}}function A(b){t(2,g=b),t(3,u=""),t(8,y=!1),t(7,p=null),(b==="sms"||b==="email")&&v(b)}function w(b){b.key==="Enter"&&u.length>=6&&k()}_t(()=>{(g==="sms"||g==="email")&&v(g)});const X=b=>A(b);function le(){u=this.value,t(3,u)}function se(){c=this.checked,t(4,c)}function P(){a=this.value,t(5,a)}const ne=()=>v(g),T=()=>A("backup_codes");return l.$$set=b=>{"sessionId"in b&&t(13,s=b.sessionId),"methods"in b&&t(0,n=b.methods),"onSuccess"in b&&t(14,i=b.onSuccess),"onCancel"in b&&t(1,_=b.onCancel)},[n,_,g,u,c,a,f,p,y,v,k,A,w,s,i,X,le,se,P,ne,T]}class Tt extends ut{constructor(e){super(),ct(this,e,wt,It,ft,{sessionId:13,methods:0,onSuccess:14,onCancel:1})}}function Vt(l){let e,t,s,n="Welcome Back",i,_,g="Sign in to your TradeSense account",u,c,a,f,p,y="Username",v,k,A,w,X,le="Password",se,P,ne,T,b='<a href="/forgot-password" class="forgot-password svelte-m6gjg">Forgot password?</a>',x,K,ae=l[2]?"Signing in...":"Sign In",z,Z,U,_e='<p>Don&#39;t have an account? <a href="/register" class="svelte-m6gjg">Sign up</a></p>',$,ye,L=l[3]&&it(l);return{c(){e=h("div"),t=h("div"),s=h("h1"),s.textContent=n,i=I(),_=h("p"),_.textContent=g,u=I(),L&&L.c(),c=I(),a=h("form"),f=h("div"),p=h("label"),p.textContent=y,v=I(),k=h("input"),A=I(),w=h("div"),X=h("label"),X.textContent=le,se=I(),P=h("input"),ne=I(),T=h("div"),T.innerHTML=b,x=I(),K=h("button"),z=re(ae),Z=I(),U=h("div"),U.innerHTML=_e,this.h()},l(j){e=d(j,"DIV",{class:!0});var V=C(e);t=d(V,"DIV",{class:!0});var D=C(t);s=d(D,"H1",{class:!0,"data-svelte-h":!0}),R(s)!=="svelte-198xrez"&&(s.textContent=n),i=E(D),_=d(D,"P",{class:!0,"data-svelte-h":!0}),R(_)!=="svelte-v8w87e"&&(_.textContent=g),u=E(D),L&&L.l(D),c=E(D),a=d(D,"FORM",{});var W=C(a);f=d(W,"DIV",{class:!0});var ie=C(f);p=d(ie,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(p)!=="svelte-1wr0xay"&&(p.textContent=y),v=E(ie),k=d(ie,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),ie.forEach(m),A=E(W),w=d(W,"DIV",{class:!0});var ce=C(w);X=d(ce,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),R(X)!=="svelte-pepa0a"&&(X.textContent=le),se=E(ce),P=d(ce,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),ce.forEach(m),ne=E(W),T=d(W,"DIV",{class:!0,"data-svelte-h":!0}),R(T)!=="svelte-1s7rv4q"&&(T.innerHTML=b),x=E(W),K=d(W,"BUTTON",{type:!0,class:!0});var pe=C(K);z=oe(pe,ae),pe.forEach(m),W.forEach(m),Z=E(D),U=d(D,"DIV",{class:!0,"data-svelte-h":!0}),R(U)!=="svelte-1ekbtg5"&&(U.innerHTML=_e),D.forEach(m),V.forEach(m),this.h()},h(){r(s,"class","svelte-m6gjg"),r(_,"class","subtitle svelte-m6gjg"),r(p,"for","username"),r(p,"class","svelte-m6gjg"),r(k,"id","username"),r(k,"type","text"),k.required=!0,r(k,"placeholder","Enter your username"),k.disabled=l[2],r(k,"class","svelte-m6gjg"),r(f,"class","form-group svelte-m6gjg"),r(X,"for","password"),r(X,"class","svelte-m6gjg"),r(P,"id","password"),r(P,"type","password"),P.required=!0,r(P,"placeholder","Enter your password"),P.disabled=l[2],r(P,"class","svelte-m6gjg"),r(w,"class","form-group svelte-m6gjg"),r(T,"class","form-footer svelte-m6gjg"),r(K,"type","submit"),r(K,"class","submit-button svelte-m6gjg"),K.disabled=l[2],r(U,"class","auth-footer svelte-m6gjg"),r(t,"class","auth-card svelte-m6gjg"),r(e,"class","auth-container svelte-m6gjg")},m(j,V){N(j,e,V),o(e,t),o(t,s),o(t,i),o(t,_),o(t,u),L&&L.m(t,null),o(t,c),o(t,a),o(a,f),o(f,p),o(f,v),o(f,k),me(k,l[0]),o(a,A),o(a,w),o(w,X),o(w,se),o(w,P),me(P,l[1]),o(a,ne),o(a,T),o(a,x),o(a,K),o(K,z),o(t,Z),o(t,U),$||(ye=[Y(k,"input",l[10]),Y(P,"input",l[11]),Y(a,"submit",l[7])],$=!0)},p(j,V){j[3]?L?L.p(j,V):(L=it(j),L.c(),L.m(t,c)):L&&(L.d(1),L=null),V&4&&(k.disabled=j[2]),V&1&&k.value!==j[0]&&me(k,j[0]),V&4&&(P.disabled=j[2]),V&2&&P.value!==j[1]&&me(P,j[1]),V&4&&ae!==(ae=j[2]?"Signing in...":"Sign In")&&Ce(z,ae),V&4&&(K.disabled=j[2])},i:je,o:je,d(j){j&&m(e),L&&L.d(),$=!1,dt(ye)}}}function Dt(l){let e,t;return e=new Tt({props:{sessionId:l[5],methods:l[6],onSuccess:l[8],onCancel:l[9]}}),{c(){Fe(e.$$.fragment)},l(s){He(e.$$.fragment,s)},m(s,n){qe(e,s,n),t=!0},p(s,n){const i={};n&32&&(i.sessionId=s[5]),n&64&&(i.methods=s[6]),e.$set(i)},i(s){t||(te(e.$$.fragment,s),t=!0)},o(s){ue(e.$$.fragment,s),t=!1},d(s){Ne(e,s)}}}function it(l){let e,t;return{c(){e=h("div"),t=re(l[3]),this.h()},l(s){e=d(s,"DIV",{class:!0});var n=C(e);t=oe(n,l[3]),n.forEach(m),this.h()},h(){r(e,"class","error-message svelte-m6gjg")},m(s,n){N(s,e,n),o(e,t)},p(s,n){n&8&&Ce(t,s[3])},d(s){s&&m(e)}}}function St(l){let e,t,s,n,i;const _=[Dt,Vt],g=[];function u(c,a){return c[4]?0:1}return t=u(l),s=g[t]=_[t](l),{c(){e=I(),s.c(),n=Ze(),this.h()},l(c){gt("svelte-2q4l8i",document.head).forEach(m),e=E(c),s.l(c),n=Ze(),this.h()},h(){document.title="Login - TradeSense"},m(c,a){N(c,e,a),g[t].m(c,a),N(c,n,a),i=!0},p(c,[a]){let f=t;t=u(c),t===f?g[t].p(c,a):(Xe(),ue(g[f],1,1,()=>{g[f]=null}),Ue(),s=g[t],s?s.p(c,a):(s=g[t]=_[t](c),s.c()),te(s,1),s.m(n.parentNode,n))},i(c){i||(te(s),i=!0)},o(c){ue(s),i=!1},d(c){c&&(m(e),m(n)),g[t].d(c)}}}function At(l,e,t){let s="",n="",i=!1,_="",g=!1,u="",c=[];async function a(k){k.preventDefault(),t(3,_=""),t(2,i=!0);try{const A=await Ye.login({username:s,password:n});A.mfa_required?(t(4,g=!0),t(5,u=A.session_id),t(6,c=A.methods)):Qe("/")}catch(A){t(3,_=A.message||"Login failed. Please try again.")}finally{t(2,i=!1)}}function f(k){Ye.setToken(k.access_token),Qe("/")}function p(){t(4,g=!1),t(5,u=""),t(6,c=[]),t(1,n="")}function y(){s=this.value,t(0,s)}function v(){n=this.value,t(1,n)}return[s,n,i,_,g,u,c,a,f,p,y,v]}class qt extends ut{constructor(e){super(),ct(this,e,At,St,ft,{})}}export{qt as component};
