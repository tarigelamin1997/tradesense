import{S as kt,i as Dt,s as Pt,d as f,m as Et,t as M,a as A,n as st,c as lt,b as se,e as s,f as y,g as p,h as b,j as _,k as Tt,B as J,a0 as Te,w as z,u as S,z as B,y as I,l as j,o as Q,q as W,x as Y,I as It,D as mt,P as Vt,A as Ie,O as Ct,p as at,v as St,r as qt,M as ht,L as ze,N as Lt,W as At,J as Ot}from"../chunks/BizRtQrO.js";import{e as rt}from"../chunks/BUPBrTgu.js";import"../chunks/IHki7fMi.js";import{g as vt}from"../chunks/BnGq5l0c.js";import{b as tt}from"../chunks/Bt-Xh7oU.js";import{M as Be}from"../chunks/QuJ8ahAQ.js";import{E as Rt,P as Mt,T as Nt}from"../chunks/BrOHQDb7.js";import{p as Ht}from"../chunks/CXw2-vwb.js";import{T as Ft}from"../chunks/3JWzvOLU.js";import{T as Ut}from"../chunks/D3yu7133.js";import{T as zt,t as gt}from"../chunks/Cx3OW3zN.js";import{a as Se}from"../chunks/CMW7pmGn.js";import{t as Bt}from"../chunks/Baa07d9I.js";import{b as jt}from"../chunks/DKytfL6r.js";import{i as Qt}from"../chunks/xKNqkMUI.js";import{l as Ae}from"../chunks/BaXaLpMJ.js";import{L as _e}from"../chunks/BO3MFKgn.js";import{$ as Wt}from"../chunks/DR8iG3jf.js";function pt(r,e,a){const t=r.slice();return t[5]=e[a],t}function Yt(r){let e,a;return e=new Ut({props:{size:14}}),{c(){Y(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,c){Q(e,t,c),a=!0},i(t){a||(A(e.$$.fragment,t),a=!0)},o(t){M(e.$$.fragment,t),a=!1},d(t){j(e,t)}}}function Jt(r){let e,a;return e=new Ft({props:{size:14}}),{c(){Y(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,c){Q(e,t,c),a=!0},i(t){a||(A(e.$$.fragment,t),a=!0)},o(t){M(e.$$.fragment,t),a=!1},d(t){j(e,t)}}}function _t(r){let e,a,t=r[5].symbol+"",c,d,n,$,l=bt(r[5].price)+"",o,u,h,w,V,q,C,E=$t(r[5].change)+"",m,k,F,O,N=yt(r[5].changePercent)+"",R,H,X,D;const g=[Jt,Yt],P=[];function K(L,T){return L[5].change>=0?0:1}return w=K(r),V=P[w]=g[w](r),{c(){e=_("div"),a=_("div"),c=B(t),d=I(),n=_("div"),$=B("$"),o=B(l),u=I(),h=_("div"),V.c(),q=I(),C=_("span"),m=B(E),k=I(),F=_("span"),O=B("("),R=B(N),H=B(")"),X=I(),this.h()},l(L){e=p(L,"DIV",{class:!0});var T=b(e);a=p(T,"DIV",{class:!0});var Z=b(a);c=z(Z,t),Z.forEach(f),d=S(T),n=p(T,"DIV",{class:!0});var ae=b(n);$=z(ae,"$"),o=z(ae,l),ae.forEach(f),u=S(T),h=p(T,"DIV",{class:!0});var x=b(h);V.l(x),q=S(x),C=p(x,"SPAN",{});var U=b(C);m=z(U,E),U.forEach(f),k=S(x),F=p(x,"SPAN",{class:!0});var G=b(F);O=z(G,"("),R=z(G,N),H=z(G,")"),G.forEach(f),x.forEach(f),X=S(T),T.forEach(f),this.h()},h(){y(a,"class","symbol svelte-5bb9e2"),y(n,"class","price svelte-5bb9e2"),y(F,"class","percent svelte-5bb9e2"),y(h,"class","change svelte-5bb9e2"),y(e,"class","ticker-item svelte-5bb9e2"),Te(e,"positive",r[5].change>=0),Te(e,"negative",r[5].change<0),Te(e,"animating",r[1].has(r[5].symbol))},m(L,T){se(L,e,T),s(e,a),s(a,c),s(e,d),s(e,n),s(n,$),s(n,o),s(e,u),s(e,h),P[w].m(h,null),s(h,q),s(h,C),s(C,m),s(h,k),s(h,F),s(F,O),s(F,R),s(F,H),s(e,X),D=!0},p(L,T){(!D||T&1)&&t!==(t=L[5].symbol+"")&&J(c,t),(!D||T&1)&&l!==(l=bt(L[5].price)+"")&&J(o,l);let Z=w;w=K(L),w!==Z&&(st(),M(P[Z],1,1,()=>{P[Z]=null}),lt(),V=P[w],V||(V=P[w]=g[w](L),V.c()),A(V,1),V.m(h,q)),(!D||T&1)&&E!==(E=$t(L[5].change)+"")&&J(m,E),(!D||T&1)&&N!==(N=yt(L[5].changePercent)+"")&&J(R,N),(!D||T&1)&&Te(e,"positive",L[5].change>=0),(!D||T&1)&&Te(e,"negative",L[5].change<0),(!D||T&3)&&Te(e,"animating",L[1].has(L[5].symbol))},i(L){D||(A(V),D=!0)},o(L){M(V),D=!1},d(L){L&&f(e),P[w].d()}}}function Xt(r){let e,a,t,c,d=rt(Object.values(r[0])),n=[];for(let l=0;l<d.length;l+=1)n[l]=_t(pt(r,d,l));const $=l=>M(n[l],1,1,()=>{n[l]=null});return{c(){e=_("div"),a=_("div"),t=_("div");for(let l=0;l<n.length;l+=1)n[l].c();this.h()},l(l){e=p(l,"DIV",{class:!0});var o=b(e);a=p(o,"DIV",{class:!0});var u=b(a);t=p(u,"DIV",{class:!0});var h=b(t);for(let w=0;w<n.length;w+=1)n[w].l(h);h.forEach(f),u.forEach(f),o.forEach(f),this.h()},h(){y(t,"class","ticker-items svelte-5bb9e2"),y(a,"class","ticker-wrapper svelte-5bb9e2"),y(e,"class","price-ticker svelte-5bb9e2")},m(l,o){se(l,e,o),s(e,a),s(a,t);for(let u=0;u<n.length;u+=1)n[u]&&n[u].m(t,null);c=!0},p(l,[o]){if(o&3){d=rt(Object.values(l[0]));let u;for(u=0;u<d.length;u+=1){const h=pt(l,d,u);n[u]?(n[u].p(h,o),A(n[u],1)):(n[u]=_t(h),n[u].c(),A(n[u],1),n[u].m(t,null))}for(st(),u=d.length;u<n.length;u+=1)$(u);lt()}},i(l){if(!c){for(let o=0;o<d.length;o+=1)A(n[o]);c=!0}},o(l){n=n.filter(Boolean);for(let o=0;o<n.length;o+=1)M(n[o]);c=!1},d(l){l&&f(e),Et(n,l)}}}function bt(r){return r.toFixed(2)}function $t(r){return(r>=0?"+":"")+r.toFixed(2)}function yt(r){return(r>=0?"+":"")+r.toFixed(2)+"%"}function Gt(r,e,a){let t;Tt(r,Ht,l=>a(3,t=l));let{symbols:c=["SPY","QQQ","IWM","VIX"]}=e,d={},n=new Set;c.forEach(l=>{a(0,d[l]={symbol:l,price:Math.random()*500+100,change:(Math.random()-.5)*10,changePercent:(Math.random()-.5)*5,prevPrice:0},d)});function $(l){if(l.symbol&&d[l.symbol]){const o=d[l.symbol].price;a(0,d[l.symbol]={...d[l.symbol],price:l.price,change:l.change||l.price-o,changePercent:l.changePercent||(l.price-o)/o*100,prevPrice:o},d),n.add(l.symbol),setTimeout(()=>{n.delete(l.symbol),a(1,n)},500)}}return r.$$set=l=>{"symbols"in l&&a(2,c=l.symbols)},r.$$.update=()=>{r.$$.dirty&8&&t&&$(t)},[d,n,c,t]}class Kt extends kt{constructor(e){super(),Dt(this,e,Gt,Xt,Pt,{symbols:2})}}const Zt={async getAnalytics(r){return{summary:await this.getSummary(r),equity_curve:[],daily_pnl:[],monthly_pnl:[],strategy_breakdown:[],win_distribution:{wins:0,losses:0,breakeven:0}}},async getSummary(r){return Se.get("/api/v1/analytics/summary",r)},async getEquityCurve(r){return Se.get("/api/v1/analytics/equity-curve",r)},async getDailyPnL(r){return Se.get("/api/v1/analytics/daily-pnl",r)},async getStrategyPerformance(){return Se.get("/api/v1/analytics/strategies")},async getSymbolPerformance(){return Se.get("/api/v1/analytics/symbols")},async getCalendarData(r){return Se.get(`/api/v1/analytics/calendar/${r}`)}};function xt(r,e,a){const t=r.slice();return t[14]=e[a],t}function ea(r){let e,a,t,c,d,n,$=r[10]("dashboard.title")+"",l,o,u,h=r[3]?"🎭 Demo Data":`Last ${r[0]}`,w,V,q,C,E,m,k=r[10]("dashboard.timeframes.1w")+"",F,O,N=r[10]("dashboard.timeframes.1m")+"",R,H,X=r[10]("dashboard.timeframes.3m")+"",D,g,P=r[10]("dashboard.timeframes.1y")+"",K,L,T,Z=(r[1]?r[10]("common.actions.loading"):r[10]("common.actions.refresh"))+"",ae,x,U,G,je,le,Qe,ne,We,oe,Ye,ie,ce,we,Ve=r[10]("dashboard.charts.equityCurve",{default:"Equity Curve"})+"",Oe,Je,de,Xe,ue,ke,Ce=r[10]("dashboard.charts.dailyPL",{default:"Daily P&L"})+"",Re,Ge,fe,Ke,me,Ze,he,De,qe=r[10]("dashboard.widgets.recentTrades")+"",Me,xe,ve,ee,et,nt;t=new Kt({});let te=r[3]&&wt();return G=new Be({props:{title:r[10]("dashboard.metrics.profitLoss"),value:r[6].totalPnl,format:"currency",trend:r[6].totalPnlPercent}}),le=new Be({props:{title:r[10]("dashboard.metrics.winRate"),value:r[6].winRate,format:"percent",trend:r[6].winRateChange}}),ne=new Be({props:{title:r[10]("dashboard.metrics.totalTrades"),value:r[6].totalTrades,format:"number"}}),oe=new Be({props:{title:r[10]("dashboard.currentStreak",{default:"Current Streak"}),value:r[6].currentStreak.count,format:"streak",streakType:r[6].currentStreak.type}}),de=new Rt({props:{data:r[7]}}),fe=new Mt({props:{data:r[8]}}),me=new zt({props:{trades:r[9],userPlan:r[4]}}),ve=new Nt({props:{trades:r[9]}}),{c(){e=_("div"),a=_("div"),Y(t.$$.fragment),c=I(),d=_("header"),n=_("h1"),l=B($),o=I(),u=_("p"),w=B(h),V=I(),te&&te.c(),q=I(),C=_("div"),E=_("select"),m=_("option"),F=B(k),O=_("option"),R=B(N),H=_("option"),D=B(X),g=_("option"),K=B(P),L=I(),T=_("button"),ae=B(Z),x=I(),U=_("div"),Y(G.$$.fragment),je=I(),Y(le.$$.fragment),Qe=I(),Y(ne.$$.fragment),We=I(),Y(oe.$$.fragment),Ye=I(),ie=_("div"),ce=_("div"),we=_("h2"),Oe=B(Ve),Je=I(),Y(de.$$.fragment),Xe=I(),ue=_("div"),ke=_("h2"),Re=B(Ce),Ge=I(),Y(fe.$$.fragment),Ke=I(),Y(me.$$.fragment),Ze=I(),he=_("div"),De=_("h2"),Me=B(qe),xe=I(),Y(ve.$$.fragment),this.h()},l(i){e=p(i,"DIV",{class:!0});var v=b(e);a=p(v,"DIV",{class:!0});var be=b(a);W(t.$$.fragment,be),be.forEach(f),c=S(v),d=p(v,"HEADER",{class:!0});var re=b(d);n=p(re,"H1",{class:!0});var Pe=b(n);l=z(Pe,$),Pe.forEach(f),o=S(re),u=p(re,"P",{class:!0});var $e=b(u);w=z($e,h),$e.forEach(f),re.forEach(f),V=S(v),te&&te.l(v),q=S(v),C=p(v,"DIV",{class:!0});var ye=b(C);E=p(ye,"SELECT",{class:!0});var ge=b(E);m=p(ge,"OPTION",{});var Ee=b(m);F=z(Ee,k),Ee.forEach(f),O=p(ge,"OPTION",{});var Le=b(O);R=z(Le,N),Le.forEach(f),H=p(ge,"OPTION",{});var ot=b(H);D=z(ot,X),ot.forEach(f),g=p(ge,"OPTION",{});var it=b(g);K=z(it,P),it.forEach(f),ge.forEach(f),L=S(ye),T=p(ye,"BUTTON",{class:!0});var ct=b(T);ae=z(ct,Z),ct.forEach(f),ye.forEach(f),x=S(v),U=p(v,"DIV",{class:!0});var pe=b(U);W(G.$$.fragment,pe),je=S(pe),W(le.$$.fragment,pe),Qe=S(pe),W(ne.$$.fragment,pe),We=S(pe),W(oe.$$.fragment,pe),pe.forEach(f),Ye=S(v),ie=p(v,"DIV",{class:!0});var Ne=b(ie);ce=p(Ne,"DIV",{class:!0});var He=b(ce);we=p(He,"H2",{class:!0});var dt=b(we);Oe=z(dt,Ve),dt.forEach(f),Je=S(He),W(de.$$.fragment,He),He.forEach(f),Xe=S(Ne),ue=p(Ne,"DIV",{class:!0});var Fe=b(ue);ke=p(Fe,"H2",{class:!0});var ut=b(ke);Re=z(ut,Ce),ut.forEach(f),Ge=S(Fe),W(fe.$$.fragment,Fe),Fe.forEach(f),Ne.forEach(f),Ke=S(v),W(me.$$.fragment,v),Ze=S(v),he=p(v,"DIV",{class:!0});var Ue=b(he);De=p(Ue,"H2",{class:!0});var ft=b(De);Me=z(ft,qe),ft.forEach(f),xe=S(Ue),W(ve.$$.fragment,Ue),Ue.forEach(f),v.forEach(f),this.h()},h(){y(a,"class","ticker-section svelte-4lelu5"),y(n,"class","svelte-4lelu5"),y(u,"class","svelte-4lelu5"),y(d,"class","dashboard-header svelte-4lelu5"),m.__value="7d",ze(m,m.__value),O.__value="30d",ze(O,O.__value),H.__value="90d",ze(H,H.__value),g.__value="1y",ze(g,g.__value),y(E,"class","date-range-select svelte-4lelu5"),r[0]===void 0&&Lt(()=>r[13].call(E)),y(T,"class","refresh-button svelte-4lelu5"),T.disabled=r[1],y(C,"class","controls svelte-4lelu5"),y(U,"class","grid grid-cols-4"),y(we,"class","svelte-4lelu5"),y(ce,"class","card svelte-4lelu5"),y(ke,"class","svelte-4lelu5"),y(ue,"class","card svelte-4lelu5"),y(ie,"class","grid grid-cols-2 svelte-4lelu5"),y(De,"class","svelte-4lelu5"),y(he,"class","card svelte-4lelu5"),y(e,"class","dashboard svelte-4lelu5")},m(i,v){se(i,e,v),s(e,a),Q(t,a,null),s(e,c),s(e,d),s(d,n),s(n,l),s(d,o),s(d,u),s(u,w),s(e,V),te&&te.m(e,null),s(e,q),s(e,C),s(C,E),s(E,m),s(m,F),s(E,O),s(O,R),s(E,H),s(H,D),s(E,g),s(g,K),ht(E,r[0],!0),s(C,L),s(C,T),s(T,ae),s(e,x),s(e,U),Q(G,U,null),s(U,je),Q(le,U,null),s(U,Qe),Q(ne,U,null),s(U,We),Q(oe,U,null),s(e,Ye),s(e,ie),s(ie,ce),s(ce,we),s(we,Oe),s(ce,Je),Q(de,ce,null),s(ie,Xe),s(ie,ue),s(ue,ke),s(ke,Re),s(ue,Ge),Q(fe,ue,null),s(e,Ke),Q(me,e,null),s(e,Ze),s(e,he),s(he,De),s(De,Me),s(he,xe),Q(ve,he,null),ee=!0,et||(nt=[at(E,"change",r[13]),at(T,"click",r[11])],et=!0)},p(i,v){(!ee||v&1024)&&$!==($=i[10]("dashboard.title")+"")&&J(l,$),(!ee||v&9)&&h!==(h=i[3]?"🎭 Demo Data":`Last ${i[0]}`)&&J(w,h),i[3]?te||(te=wt(),te.c(),te.m(e,q)):te&&(te.d(1),te=null),(!ee||v&1024)&&k!==(k=i[10]("dashboard.timeframes.1w")+"")&&J(F,k),(!ee||v&1024)&&N!==(N=i[10]("dashboard.timeframes.1m")+"")&&J(R,N),(!ee||v&1024)&&X!==(X=i[10]("dashboard.timeframes.3m")+"")&&J(D,X),(!ee||v&1024)&&P!==(P=i[10]("dashboard.timeframes.1y")+"")&&J(K,P),v&1&&ht(E,i[0]),(!ee||v&1026)&&Z!==(Z=(i[1]?i[10]("common.actions.loading"):i[10]("common.actions.refresh"))+"")&&J(ae,Z),(!ee||v&2)&&(T.disabled=i[1]);const be={};v&1024&&(be.title=i[10]("dashboard.metrics.profitLoss")),v&64&&(be.value=i[6].totalPnl),v&64&&(be.trend=i[6].totalPnlPercent),G.$set(be);const re={};v&1024&&(re.title=i[10]("dashboard.metrics.winRate")),v&64&&(re.value=i[6].winRate),v&64&&(re.trend=i[6].winRateChange),le.$set(re);const Pe={};v&1024&&(Pe.title=i[10]("dashboard.metrics.totalTrades")),v&64&&(Pe.value=i[6].totalTrades),ne.$set(Pe);const $e={};v&1024&&($e.title=i[10]("dashboard.currentStreak",{default:"Current Streak"})),v&64&&($e.value=i[6].currentStreak.count),v&64&&($e.streakType=i[6].currentStreak.type),oe.$set($e),(!ee||v&1024)&&Ve!==(Ve=i[10]("dashboard.charts.equityCurve",{default:"Equity Curve"})+"")&&J(Oe,Ve);const ye={};v&128&&(ye.data=i[7]),de.$set(ye),(!ee||v&1024)&&Ce!==(Ce=i[10]("dashboard.charts.dailyPL",{default:"Daily P&L"})+"")&&J(Re,Ce);const ge={};v&256&&(ge.data=i[8]),fe.$set(ge);const Ee={};v&512&&(Ee.trades=i[9]),v&16&&(Ee.userPlan=i[4]),me.$set(Ee),(!ee||v&1024)&&qe!==(qe=i[10]("dashboard.widgets.recentTrades")+"")&&J(Me,qe);const Le={};v&512&&(Le.trades=i[9]),ve.$set(Le)},i(i){ee||(A(t.$$.fragment,i),A(G.$$.fragment,i),A(le.$$.fragment,i),A(ne.$$.fragment,i),A(oe.$$.fragment,i),A(de.$$.fragment,i),A(fe.$$.fragment,i),A(me.$$.fragment,i),A(ve.$$.fragment,i),ee=!0)},o(i){M(t.$$.fragment,i),M(G.$$.fragment,i),M(le.$$.fragment,i),M(ne.$$.fragment,i),M(oe.$$.fragment,i),M(de.$$.fragment,i),M(fe.$$.fragment,i),M(me.$$.fragment,i),M(ve.$$.fragment,i),ee=!1},d(i){i&&f(e),j(t),te&&te.d(),j(G),j(le),j(ne),j(oe),j(de),j(fe),j(me),j(ve),et=!1,qt(nt)}}}function ta(r){let e,a,t,c=r[10]("dashboard.welcome",{values:{name:"TradeSense"}})+"",d,n,$,l,o="Start tracking your trades to see analytics and insights.",u,h,w,V=r[10]("trades.newTrade")+"",q,C,E,m=r[10]("dashboard.viewDemo",{default:"View Demo Dashboard"})+"",k,F,O;return{c(){e=_("div"),a=_("div"),t=_("h1"),d=B(c),n=B(" 🎉"),$=I(),l=_("p"),l.textContent=o,u=I(),h=_("div"),w=_("a"),q=B(V),C=I(),E=_("button"),k=B(m),this.h()},l(N){e=p(N,"DIV",{class:!0});var R=b(e);a=p(R,"DIV",{class:!0});var H=b(a);t=p(H,"H1",{class:!0});var X=b(t);d=z(X,c),n=z(X," 🎉"),X.forEach(f),$=S(H),l=p(H,"P",{class:!0,"data-svelte-h":!0}),St(l)!=="svelte-15cbwzz"&&(l.textContent=o),u=S(H),h=p(H,"DIV",{class:!0});var D=b(h);w=p(D,"A",{href:!0,class:!0});var g=b(w);q=z(g,V),g.forEach(f),C=S(D),E=p(D,"BUTTON",{class:!0});var P=b(E);k=z(P,m),P.forEach(f),D.forEach(f),H.forEach(f),R.forEach(f),this.h()},h(){y(t,"class","svelte-4lelu5"),y(l,"class","svelte-4lelu5"),y(w,"href","/tradelog"),y(w,"class","primary-button svelte-4lelu5"),y(E,"class","secondary-button svelte-4lelu5"),y(h,"class","welcome-actions svelte-4lelu5"),y(a,"class","welcome-container svelte-4lelu5"),y(e,"class","dashboard svelte-4lelu5")},m(N,R){se(N,e,R),s(e,a),s(a,t),s(t,d),s(t,n),s(a,$),s(a,l),s(a,u),s(a,h),s(h,w),s(w,q),s(h,C),s(h,E),s(E,k),F||(O=at(E,"click",r[12]),F=!0)},p(N,R){R&1024&&c!==(c=N[10]("dashboard.welcome",{values:{name:"TradeSense"}})+"")&&J(d,c),R&1024&&V!==(V=N[10]("trades.newTrade")+"")&&J(q,V),R&1024&&m!==(m=N[10]("dashboard.viewDemo",{default:"View Demo Dashboard"})+"")&&J(k,m)},i:Ie,o:Ie,d(N){N&&f(e),F=!1,O()}}}function aa(r){let e,a;return{c(){e=_("div"),a=B(r[2]),this.h()},l(t){e=p(t,"DIV",{class:!0});var c=b(e);a=z(c,r[2]),c.forEach(f),this.h()},h(){y(e,"class","error")},m(t,c){se(t,e,c),s(e,a)},p(t,c){c&4&&J(a,t[2])},i:Ie,o:Ie,d(t){t&&f(e)}}}function ra(r){let e,a,t,c,d,n,$,l,o,u,h,w,V,q,C,E,m,k,F,O,N,R,H;t=new _e({props:{type:"text",lines:2,width:"200px"}});let X=rt(Array(4)),D=[];for(let g=0;g<X.length;g+=1)D[g]=sa(xt(r,X,g));return o=new _e({props:{type:"chart",height:"300px"}}),w=new _e({props:{type:"chart",height:"300px"}}),C=new _e({props:{type:"text",lines:1,width:"150px"}}),k=new _e({props:{type:"card",height:"80px"}}),O=new _e({props:{type:"card",height:"80px"}}),R=new _e({props:{type:"card",height:"80px"}}),{c(){e=_("div"),a=_("div"),Y(t.$$.fragment),c=I(),d=_("div");for(let g=0;g<D.length;g+=1)D[g].c();n=I(),$=_("div"),l=_("div"),Y(o.$$.fragment),u=I(),h=_("div"),Y(w.$$.fragment),V=I(),q=_("div"),Y(C.$$.fragment),E=I(),m=_("div"),Y(k.$$.fragment),F=I(),Y(O.$$.fragment),N=I(),Y(R.$$.fragment),this.h()},l(g){e=p(g,"DIV",{class:!0});var P=b(e);a=p(P,"DIV",{class:!0});var K=b(a);W(t.$$.fragment,K),K.forEach(f),c=S(P),d=p(P,"DIV",{class:!0});var L=b(d);for(let G=0;G<D.length;G+=1)D[G].l(L);L.forEach(f),n=S(P),$=p(P,"DIV",{class:!0});var T=b($);l=p(T,"DIV",{class:!0});var Z=b(l);W(o.$$.fragment,Z),Z.forEach(f),u=S(T),h=p(T,"DIV",{class:!0});var ae=b(h);W(w.$$.fragment,ae),ae.forEach(f),T.forEach(f),V=S(P),q=p(P,"DIV",{class:!0});var x=b(q);W(C.$$.fragment,x),E=S(x),m=p(x,"DIV",{style:!0});var U=b(m);W(k.$$.fragment,U),F=S(U),W(O.$$.fragment,U),N=S(U),W(R.$$.fragment,U),U.forEach(f),x.forEach(f),P.forEach(f),this.h()},h(){y(a,"class","page-header svelte-4lelu5"),y(d,"class","metrics-grid svelte-4lelu5"),y(l,"class","chart-wrapper svelte-4lelu5"),y(h,"class","chart-wrapper svelte-4lelu5"),y($,"class","charts-grid svelte-4lelu5"),Ct(m,"margin-top","1rem"),y(q,"class","recent-trades-skeleton svelte-4lelu5"),y(e,"class","dashboard-skeleton svelte-4lelu5")},m(g,P){se(g,e,P),s(e,a),Q(t,a,null),s(e,c),s(e,d);for(let K=0;K<D.length;K+=1)D[K]&&D[K].m(d,null);s(e,n),s(e,$),s($,l),Q(o,l,null),s($,u),s($,h),Q(w,h,null),s(e,V),s(e,q),Q(C,q,null),s(q,E),s(q,m),Q(k,m,null),s(m,F),Q(O,m,null),s(m,N),Q(R,m,null),H=!0},p:Ie,i(g){if(!H){A(t.$$.fragment,g);for(let P=0;P<X.length;P+=1)A(D[P]);A(o.$$.fragment,g),A(w.$$.fragment,g),A(C.$$.fragment,g),A(k.$$.fragment,g),A(O.$$.fragment,g),A(R.$$.fragment,g),H=!0}},o(g){M(t.$$.fragment,g),D=D.filter(Boolean);for(let P=0;P<D.length;P+=1)M(D[P]);M(o.$$.fragment,g),M(w.$$.fragment,g),M(C.$$.fragment,g),M(k.$$.fragment,g),M(O.$$.fragment,g),M(R.$$.fragment,g),H=!1},d(g){g&&f(e),j(t),Et(D,g),j(o),j(w),j(C),j(k),j(O),j(R)}}}function wt(r){let e,a=`<strong>⚠️ Demo Mode:</strong> You&#39;re viewing sample data. 
				<a href="/tradelog" class="svelte-4lelu5">Add real trades</a> or <a href="/upload" class="svelte-4lelu5">import from CSV</a> to see your actual performance.`;return{c(){e=_("div"),e.innerHTML=a,this.h()},l(t){e=p(t,"DIV",{class:!0,"data-svelte-h":!0}),St(e)!=="svelte-sa7hdy"&&(e.innerHTML=a),this.h()},h(){y(e,"class","demo-banner svelte-4lelu5")},m(t,c){se(t,e,c)},d(t){t&&f(e)}}}function sa(r){let e,a;return e=new _e({props:{type:"stat"}}),{c(){Y(e.$$.fragment)},l(t){W(e.$$.fragment,t)},m(t,c){Q(e,t,c),a=!0},p:Ie,i(t){a||(A(e.$$.fragment,t),a=!0)},o(t){M(e.$$.fragment,t),a=!1},d(t){j(e,t)}}}function la(r){let e,a,t,c,d;const n=[ra,aa,ta,ea],$=[];function l(o,u){return o[1]?0:o[2]?1:o[6].totalTrades===0&&!o[3]?2:3}return a=l(r),t=$[a]=n[a](r),{c(){e=I(),t.c(),c=mt(),this.h()},l(o){It("svelte-12ut74h",document.head).forEach(f),e=S(o),t.l(o),c=mt(),this.h()},h(){document.title="Dashboard - TradeSense"},m(o,u){se(o,e,u),$[a].m(o,u),se(o,c,u),d=!0},p(o,[u]){let h=a;a=l(o),a===h?$[a].p(o,u):(st(),M($[h],1,1,()=>{$[h]=null}),lt(),t=$[a],t?t.p(o,u):(t=$[a]=n[a](o),t.c()),A(t,1),t.m(c.parentNode,c))},i(o){d||(A(t),d=!0)},o(o){M(t),d=!1},d(o){o&&(f(e),f(c)),$[a].d(o)}}}function na(){const r={totalPnl:15176.89,totalPnlPercent:51.8,winRate:64.8,winRateChange:.2,totalTrades:245,currentStreak:{type:"win",count:5}},e=Array.from({length:30},(c,d)=>{const n=new Date;return n.setDate(n.getDate()-30+d),{date:n.toISOString().split("T")[0],value:1e4+Math.random()*5e3+d*100}}),a=Array.from({length:14},(c,d)=>{const n=new Date;return n.setDate(n.getDate()-14+d),{date:n.toISOString().split("T")[0],pnl:(Math.random()-.45)*500}});return{sampleStats:r,sampleEquityData:e,samplePnlData:a,sampleTrades:[{id:1,symbol:"AAPL",side:"long",entryPrice:185.5,exitPrice:187.25,quantity:100,pnl:175,entryDate:"2024-01-14 09:30",exitDate:"2024-01-14 14:45"},{id:2,symbol:"TSLA",side:"short",entryPrice:242.8,exitPrice:244.5,quantity:50,pnl:-85,entryDate:"2024-01-14 10:15",exitDate:"2024-01-14 15:30"}]}}function oa(r,e,a){let t;Tt(r,Wt,m=>a(10,t=m));let c=!0,d="",n=!1,$="30d",l="free",o=!1,u={totalPnl:0,totalPnlPercent:0,winRate:0,winRateChange:0,totalTrades:0,currentStreak:{type:"win",count:0}},h=[],w=[],V=[];async function q(){try{if(a(1,c=!0),a(2,d=""),!At(Qt)){Ae.log("Not authenticated, redirecting to login"),tt&&vt("/login");return}Ae.log("Fetching analytics data...");try{const[m,k]=await Promise.all([Zt.getSummary({period:$}),jt.getSubscription()]);Ae.log("Summary data:",m),k&&(k.plan_id.includes("enterprise")?a(4,l="enterprise"):k.plan_id.includes("pro")?a(4,l="pro"):a(4,l="free")),a(6,u={totalPnl:m.total_pnl||0,totalPnlPercent:0,winRate:m.overall_win_rate||0,winRateChange:0,totalTrades:m.total_trades||0,currentStreak:{type:"win",count:0}}),a(7,h=[]),a(8,w=[])}catch(m){throw Ae.error("Failed to fetch summary:",m),m}try{const m=await Bt.getTrades({limit:10});a(9,V=m.map(k=>({id:k.id,symbol:k.symbol,side:k.side,entryPrice:k.entry_price,exitPrice:k.exit_price,quantity:k.quantity,pnl:k.pnl||0,entryDate:k.entry_date,exitDate:k.exit_date}))),gt.setTrades(V),a(3,n=!1)}catch(m){Ae.error("Failed to fetch trades:",m),a(9,V=[])}}catch(m){m.status===401&&tt?vt("/login"):a(2,d="Failed to load data. Please try again or check your connection.")}finally{a(1,c=!1)}}Vt(()=>{q()});const C=()=>{const{sampleStats:m,sampleEquityData:k,samplePnlData:F,sampleTrades:O}=na();a(6,u=m),a(7,h=k),a(8,w=F),a(9,V=O),gt.setTrades(O),a(5,o=!0),a(3,n=!0)};function E(){$=Ot(this),a(0,$)}return r.$$.update=()=>{r.$$.dirty&1&&$&&tt&&q()},[$,c,d,n,l,o,u,h,w,V,t,q,C,E]}class Ea extends kt{constructor(e){super(),Dt(this,e,oa,la,Pt,{})}}export{Ea as component};
