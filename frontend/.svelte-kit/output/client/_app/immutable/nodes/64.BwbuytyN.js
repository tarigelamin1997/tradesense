import{S as Re,i as Me,s as Ve,d as g,l as Z,r as hl,t as O,a as T,f as b,B as Q,n as ne,c as ie,b as j,e as c,o as x,p as pe,g as y,h as P,u as M,q as te,v as X,w as z,j as C,y as V,x as ee,z as F,a9 as dl,m as ge,C as Qe,D as Ce,O as ct,A as qe,M as ut,L as pl,a6 as ml,T as et,U as tt,I as _l,k as Pe,P as gl,W as bl}from"../chunks/BizRtQrO.js";import"../chunks/IHki7fMi.js";import{w as kl,g as wl}from"../chunks/CMDLyNOv.js";import{i as El}from"../chunks/CNsmtZI0.js";import{a as He}from"../chunks/-74CPqXK.js";import{e as ae}from"../chunks/CEysSNcE.js";import{U as yl}from"../chunks/NKAonZR1.js";import{F as Cl,L as Je}from"../chunks/BeSUejaS.js";import{F as ht}from"../chunks/RquJ3jvQ.js";import{F as dt}from"../chunks/DrqKFPhr.js";import{C as We}from"../chunks/5WweqhTT.js";import{X as Il}from"../chunks/DweE3sJ4.js";import{C as Ge}from"../chunks/BC5gv1j_.js";import{C as Ke}from"../chunks/Bgjb91iz.js";import{I as vl}from"../chunks/BNKrb1kb.js";import{E as Dl}from"../chunks/DyjdTwhc.js";import{E as Sl}from"../chunks/C7maFise.js";import{D as Pl}from"../chunks/D4Nim5Gb.js";import{R as $l}from"../chunks/BrSh9G9_.js";const Ye={async uploadFile(s){const e=new FormData;return e.append("file",s),He.post("/api/v1/uploads",e,{headers:{"Content-Type":"multipart/form-data"}})},async validateData(s,e){return He.post(`/api/v1/uploads/${s}/validate`,{column_mapping:e})},async importTrades(s,e){return He.post(`/api/v1/uploads/${s}/import`,{column_mapping:e})},async getUploadStatus(s){return He.get(`/api/v1/uploads/${s}/status`)},async getSuggestedMappings(s){const e={},t={symbol:["symbol","ticker","stock","instrument"],side:["side","direction","type","position"],entry_price:["entry_price","entry","buy_price","open_price","price_in"],exit_price:["exit_price","exit","sell_price","close_price","price_out"],quantity:["quantity","qty","shares","size","volume"],entry_date:["entry_date","entry_time","open_date","buy_date","date_in"],exit_date:["exit_date","exit_time","close_date","sell_date","date_out"],pnl:["pnl","profit","profit_loss","gain_loss","p&l"],strategy:["strategy","setup","system","method"],notes:["notes","comments","remarks","description"]};for(const l of s){const r=l.toLowerCase().replace(/[^a-z0-9]/g,"_");for(const[i,n]of Object.entries(t))if(n.some(a=>r.includes(a))){e[l]=i;break}}return e}};function Rl(){const{subscribe:s,set:e,update:t}=kl({stage:"idle",progress:0,message:"",file:null,uploadResponse:null,validationResult:null,columnMapping:{},importResult:null,error:null});return{subscribe:s,reset:()=>e({stage:"idle",progress:0,message:"",file:null,uploadResponse:null,validationResult:null,columnMapping:{},importResult:null,error:null}),setStage:l=>t(r=>({...r,stage:l})),setProgress:l=>t(r=>({...r,progress:l})),setMessage:l=>t(r=>({...r,message:l})),setFile:l=>t(r=>({...r,file:l})),setUploadResponse:l=>t(r=>({...r,uploadResponse:l})),setValidationResult:l=>t(r=>({...r,validationResult:l})),setColumnMapping:l=>t(r=>({...r,columnMapping:l})),setImportResult:l=>t(r=>({...r,importResult:l})),setError:l=>t(r=>({...r,error:l,stage:"error"}))}}const G=Rl();function pt(s,e,t){const l=s.slice();l[16]=e[t],l[19]=t;const r=l[11](l[16].name);return l[17]=r,l}function mt(s,e,t){const l=s.slice();return l[20]=e[t],l}function vt(s){let e,t,l=ae(s[5]),r=[];for(let n=0;n<l.length;n+=1)r[n]=_t(mt(s,l,n));const i=n=>O(r[n],1,1,()=>{r[n]=null});return{c(){e=C("div");for(let n=0;n<r.length;n+=1)r[n].c();this.h()},l(n){e=y(n,"DIV",{class:!0});var a=P(e);for(let o=0;o<r.length;o+=1)r[o].l(a);a.forEach(g),this.h()},h(){b(e,"class","errors svelte-8nrkyq")},m(n,a){j(n,e,a);for(let o=0;o<r.length;o+=1)r[o]&&r[o].m(e,null);t=!0},p(n,a){if(a&32){l=ae(n[5]);let o;for(o=0;o<l.length;o+=1){const f=mt(n,l,o);r[o]?(r[o].p(f,a),T(r[o],1)):(r[o]=_t(f),r[o].c(),T(r[o],1),r[o].m(e,null))}for(ne(),o=l.length;o<r.length;o+=1)i(o);ie()}},i(n){if(!t){for(let a=0;a<l.length;a+=1)T(r[a]);t=!0}},o(n){r=r.filter(Boolean);for(let a=0;a<r.length;a+=1)O(r[a]);t=!1},d(n){n&&g(e),ge(r,n)}}}function _t(s){let e,t,l,r,i=s[20]+"",n,a,o;return t=new We({props:{size:16}}),{c(){e=C("div"),ee(t.$$.fragment),l=V(),r=C("span"),n=F(i),a=V(),this.h()},l(f){e=y(f,"DIV",{class:!0});var h=P(e);te(t.$$.fragment,h),l=M(h),r=y(h,"SPAN",{});var u=P(r);n=z(u,i),u.forEach(g),a=M(h),h.forEach(g),this.h()},h(){b(e,"class","error svelte-8nrkyq")},m(f,h){j(f,e,h),x(t,e,null),c(e,l),c(e,r),c(r,n),c(e,a),o=!0},p(f,h){(!o||h&32)&&i!==(i=f[20]+"")&&Q(n,i)},i(f){o||(T(t.$$.fragment,f),o=!0)},o(f){O(t.$$.fragment,f),o=!1},d(f){f&&g(e),Z(t)}}}function gt(s){let e,t,l="Selected Files",r,i,n=ae(s[4]),a=[];for(let f=0;f<n.length;f+=1)a[f]=bt(pt(s,n,f));const o=f=>O(a[f],1,1,()=>{a[f]=null});return{c(){e=C("div"),t=C("h4"),t.textContent=l,r=V();for(let f=0;f<a.length;f+=1)a[f].c();this.h()},l(f){e=y(f,"DIV",{class:!0});var h=P(e);t=y(h,"H4",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-6nsbgs"&&(t.textContent=l),r=M(h);for(let u=0;u<a.length;u+=1)a[u].l(h);h.forEach(g),this.h()},h(){b(t,"class","svelte-8nrkyq"),b(e,"class","file-list svelte-8nrkyq")},m(f,h){j(f,e,h),c(e,t),c(e,r);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(e,null);i=!0},p(f,h){if(h&3088){n=ae(f[4]);let u;for(u=0;u<n.length;u+=1){const m=pt(f,n,u);a[u]?(a[u].p(m,h),T(a[u],1)):(a[u]=bt(m),a[u].c(),T(a[u],1),a[u].m(e,null))}for(ne(),u=n.length;u<a.length;u+=1)o(u);ie()}},i(f){if(!i){for(let h=0;h<n.length;h+=1)T(a[h]);i=!0}},o(f){a=a.filter(Boolean);for(let h=0;h<a.length;h+=1)O(a[h]);i=!1},d(f){f&&g(e),ge(a,f)}}}function bt(s){let e,t,l,r,i,n=s[16].name+"",a,o,f,h=Ne(s[16].size)+"",u,m,v,d,p,w,_,$;var k=s[17].icon;function E(I,S){return{props:{size:20,class:I[17].color}}}k&&(l=Qe(k,E(s))),d=new Il({props:{size:16}});function D(){return s[12](s[19])}return{c(){e=C("div"),t=C("div"),l&&ee(l.$$.fragment),r=V(),i=C("span"),a=F(n),o=V(),f=C("span"),u=F(h),m=V(),v=C("button"),ee(d.$$.fragment),p=V(),this.h()},l(I){e=y(I,"DIV",{class:!0});var S=P(e);t=y(S,"DIV",{class:!0});var N=P(t);l&&te(l.$$.fragment,N),r=M(N),i=y(N,"SPAN",{class:!0});var A=P(i);a=z(A,n),A.forEach(g),o=M(N),f=y(N,"SPAN",{class:!0});var L=P(f);u=z(L,h),L.forEach(g),N.forEach(g),m=M(S),v=y(S,"BUTTON",{type:!0,class:!0,"aria-label":!0});var R=P(v);te(d.$$.fragment,R),R.forEach(g),p=M(S),S.forEach(g),this.h()},h(){b(i,"class","file-name svelte-8nrkyq"),b(f,"class","file-size svelte-8nrkyq"),b(t,"class","file-info svelte-8nrkyq"),b(v,"type","button"),b(v,"class","remove-btn svelte-8nrkyq"),b(v,"aria-label","Remove file"),b(e,"class","file-item svelte-8nrkyq")},m(I,S){j(I,e,S),c(e,t),l&&x(l,t,null),c(t,r),c(t,i),c(i,a),c(t,o),c(t,f),c(f,u),c(e,m),c(e,v),x(d,v,null),c(e,p),w=!0,_||($=pe(v,"click",D),_=!0)},p(I,S){if(s=I,S&16&&k!==(k=s[17].icon)){if(l){ne();const N=l;O(N.$$.fragment,1,0,()=>{Z(N,1)}),ie()}k?(l=Qe(k,E(s)),ee(l.$$.fragment),T(l.$$.fragment,1),x(l,t,r)):l=null}else if(k){const N={};S&16&&(N.class=s[17].color),l.$set(N)}(!w||S&16)&&n!==(n=s[16].name+"")&&Q(a,n),(!w||S&16)&&h!==(h=Ne(s[16].size)+"")&&Q(u,h)},i(I){w||(l&&T(l.$$.fragment,I),T(d.$$.fragment,I),w=!0)},o(I){l&&O(l.$$.fragment,I),O(d.$$.fragment,I),w=!1},d(I){I&&g(e),l&&Z(l),Z(d),_=!1,$()}}}function Ml(s){let e,t,l,r,i,n,a,o,f="Drag & drop files here",h,u,m="or click to browse",v,d,p,w="Accepted formats: CSV, Excel, JSON",_,$,k,E=Ne(s[1])+"",D,I,S,N,A,L,R;n=new yl({props:{size:48,class:"upload-icon"}});let U=s[5].length>0&&vt(s),q=s[4].length>0&&gt(s);return{c(){e=C("div"),t=C("div"),l=C("input"),r=V(),i=C("label"),ee(n.$$.fragment),a=V(),o=C("h3"),o.textContent=f,h=V(),u=C("p"),u.textContent=m,v=V(),d=C("div"),p=C("span"),p.textContent=w,_=V(),$=C("span"),k=F("Maximum size: "),D=F(E),S=V(),U&&U.c(),N=V(),q&&q.c(),this.h()},l(B){e=y(B,"DIV",{class:!0});var Y=P(e);t=y(Y,"DIV",{class:!0,role:!0,"aria-label":!0});var me=P(t);l=y(me,"INPUT",{type:!0,id:!0,accept:!0,class:!0}),r=M(me),i=y(me,"LABEL",{for:!0,class:!0});var J=P(i);te(n.$$.fragment,J),a=M(J),o=y(J,"H3",{class:!0,"data-svelte-h":!0}),X(o)!=="svelte-ghq3dk"&&(o.textContent=f),h=M(J),u=y(J,"P",{class:!0,"data-svelte-h":!0}),X(u)!=="svelte-9qv2v8"&&(u.textContent=m),v=M(J),d=y(J,"DIV",{class:!0});var le=P(d);p=y(le,"SPAN",{class:!0,"data-svelte-h":!0}),X(p)!=="svelte-1v7yak"&&(p.textContent=w),_=M(le),$=y(le,"SPAN",{class:!0});var oe=P($);k=z(oe,"Maximum size: "),D=z(oe,E),oe.forEach(g),le.forEach(g),J.forEach(g),me.forEach(g),S=M(Y),U&&U.l(Y),N=M(Y),q&&q.l(Y),Y.forEach(g),this.h()},h(){b(l,"type","file"),b(l,"id","file-input"),b(l,"accept",s[0]),l.multiple=s[2],b(l,"class","hidden svelte-8nrkyq"),b(o,"class","svelte-8nrkyq"),b(u,"class","svelte-8nrkyq"),b(p,"class","svelte-8nrkyq"),b($,"class","svelte-8nrkyq"),b(d,"class","formats svelte-8nrkyq"),b(i,"for","file-input"),b(i,"class","upload-label svelte-8nrkyq"),b(t,"class",I="drop-zone "+(s[3]?"active":"")+" svelte-8nrkyq"),b(t,"role","region"),b(t,"aria-label","File upload drop zone"),b(e,"class","file-upload svelte-8nrkyq")},m(B,Y){j(B,e,Y),c(e,t),c(t,l),c(t,r),c(t,i),x(n,i,null),c(i,a),c(i,o),c(i,h),c(i,u),c(i,v),c(i,d),c(d,p),c(d,_),c(d,$),c($,k),c($,D),c(e,S),U&&U.m(e,null),c(e,N),q&&q.m(e,null),A=!0,L||(R=[pe(l,"change",s[9]),pe(t,"dragenter",s[6]),pe(t,"dragleave",s[7]),pe(t,"dragover",Vl),pe(t,"drop",s[8])],L=!0)},p(B,[Y]){(!A||Y&1)&&b(l,"accept",B[0]),(!A||Y&4)&&(l.multiple=B[2]),(!A||Y&2)&&E!==(E=Ne(B[1])+"")&&Q(D,E),(!A||Y&8&&I!==(I="drop-zone "+(B[3]?"active":"")+" svelte-8nrkyq"))&&b(t,"class",I),B[5].length>0?U?(U.p(B,Y),Y&32&&T(U,1)):(U=vt(B),U.c(),T(U,1),U.m(e,N)):U&&(ne(),O(U,1,1,()=>{U=null}),ie()),B[4].length>0?q?(q.p(B,Y),Y&16&&T(q,1)):(q=gt(B),q.c(),T(q,1),q.m(e,null)):q&&(ne(),O(q,1,1,()=>{q=null}),ie())},i(B){A||(T(n.$$.fragment,B),T(U),T(q),A=!0)},o(B){O(n.$$.fragment,B),O(U),O(q),A=!1},d(B){B&&g(e),Z(n),U&&U.d(),q&&q.d(),L=!1,hl(R)}}}function Vl(s){s.preventDefault(),s.stopPropagation()}function Ne(s){if(s===0)return"0 Bytes";const e=1024,t=["Bytes","KB","MB","GB"],l=Math.floor(Math.log(s)/Math.log(e));return parseFloat((s/Math.pow(e,l)).toFixed(2))+" "+t[l]}function Tl(s,e,t){const l=dl();let{accept:r=".csv,.xlsx,.xls,.json"}=e,{maxSize:i=10*1024*1024}=e,{multiple:n=!1}=e,a=!1,o=[],f=[];const h={".csv":{icon:dt,color:"text-green-600"},".xlsx":{icon:ht,color:"text-blue-600"},".xls":{icon:ht,color:"text-blue-600"},".json":{icon:Cl,color:"text-orange-600"}};function u(k){k.preventDefault(),k.stopPropagation(),t(3,a=!0)}function m(k){k.preventDefault(),k.stopPropagation(),t(3,a=!1)}function v(k){var D;k.preventDefault(),k.stopPropagation(),t(3,a=!1);const E=Array.from(((D=k.dataTransfer)==null?void 0:D.files)||[]);p(E)}function d(k){const E=k.target,D=Array.from(E.files||[]);p(D)}function p(k){var D;t(5,f=[]);const E=[];for(const I of k){const S="."+((D=I.name.split(".").pop())==null?void 0:D.toLowerCase());if(!r.includes(S)){f.push(`${I.name}: Invalid file type. Accepted formats: ${r}`);continue}if(I.size>i){f.push(`${I.name}: File too large. Maximum size: ${Ne(i)}`);continue}E.push(I)}n?t(4,o=[...o,...E]):t(4,o=E.slice(0,1)),E.length>0&&l("upload",{files:E})}function w(k){t(4,o=o.filter((E,D)=>D!==k)),l("remove",{index:k})}function _(k){var D;const E="."+((D=k.split(".").pop())==null?void 0:D.toLowerCase());return h[E]||{icon:dt,color:"text-gray-600"}}const $=k=>w(k);return s.$$set=k=>{"accept"in k&&t(0,r=k.accept),"maxSize"in k&&t(1,i=k.maxSize),"multiple"in k&&t(2,n=k.multiple)},[r,i,n,a,o,f,u,m,v,d,w,_,$]}class Nl extends Re{constructor(e){super(),Me(this,e,Tl,Ml,Ve,{accept:0,maxSize:1,multiple:2})}}function kt(s,e,t){const l=s.slice();return l[11]=e[t],l}function wt(s,e,t){const l=s.slice();return l[14]=e[t],l}function Et(s){let e,t,l,r,i,n=s[8].label+"",a,o,f,h,u,m,v,d,p,w,_,$,k=s[8].icon&&yt(s),E=s[2]&&Ct(s),D=s[1]&&It(s),I=s[4]>0&&(s[0]==="validating"||s[0]==="importing")&&Dt(s),S=s[5].length>0&&St(s),N=s[6].length>0&&Rt(s);return{c(){e=C("div"),t=C("div"),l=C("div"),k&&k.c(),r=V(),i=C("span"),a=F(n),f=V(),E&&E.c(),h=V(),u=C("div"),m=C("div"),v=V(),d=C("div"),D&&D.c(),p=V(),I&&I.c(),w=V(),S&&S.c(),_=V(),N&&N.c(),this.h()},l(A){e=y(A,"DIV",{class:!0});var L=P(e);t=y(L,"DIV",{class:!0});var R=P(t);l=y(R,"DIV",{class:!0});var U=P(l);k&&k.l(U),r=M(U),i=y(U,"SPAN",{class:!0});var q=P(i);a=z(q,n),q.forEach(g),U.forEach(g),f=M(R),E&&E.l(R),R.forEach(g),h=M(L),u=y(L,"DIV",{class:!0});var B=P(u);m=y(B,"DIV",{class:!0,style:!0}),P(m).forEach(g),B.forEach(g),v=M(L),d=y(L,"DIV",{class:!0});var Y=P(d);D&&D.l(Y),p=M(Y),I&&I.l(Y),Y.forEach(g),w=M(L),S&&S.l(L),_=M(L),N&&N.l(L),L.forEach(g),this.h()},h(){b(i,"class",o="stage-label "+s[8].color+" svelte-hlxry"),b(l,"class","stage-info svelte-hlxry"),b(t,"class","progress-header svelte-hlxry"),b(m,"class","progress-bar svelte-hlxry"),ct(m,"width",s[7]+"%"),b(u,"class","progress-bar-container svelte-hlxry"),b(d,"class","progress-details svelte-hlxry"),b(e,"class","upload-progress svelte-hlxry")},m(A,L){j(A,e,L),c(e,t),c(t,l),k&&k.m(l,null),c(l,r),c(l,i),c(i,a),c(t,f),E&&E.m(t,null),c(e,h),c(e,u),c(u,m),c(e,v),c(e,d),D&&D.m(d,null),c(d,p),I&&I.m(d,null),c(e,w),S&&S.m(e,null),c(e,_),N&&N.m(e,null),$=!0},p(A,L){A[8].icon?k?(k.p(A,L),L&256&&T(k,1)):(k=yt(A),k.c(),T(k,1),k.m(l,r)):k&&(ne(),O(k,1,1,()=>{k=null}),ie()),(!$||L&256)&&n!==(n=A[8].label+"")&&Q(a,n),(!$||L&256&&o!==(o="stage-label "+A[8].color+" svelte-hlxry"))&&b(i,"class",o),A[2]?E?E.p(A,L):(E=Ct(A),E.c(),E.m(t,null)):E&&(E.d(1),E=null),(!$||L&128)&&ct(m,"width",A[7]+"%"),A[1]?D?D.p(A,L):(D=It(A),D.c(),D.m(d,p)):D&&(D.d(1),D=null),A[4]>0&&(A[0]==="validating"||A[0]==="importing")?I?I.p(A,L):(I=Dt(A),I.c(),I.m(d,null)):I&&(I.d(1),I=null),A[5].length>0?S?(S.p(A,L),L&32&&T(S,1)):(S=St(A),S.c(),T(S,1),S.m(e,_)):S&&(ne(),O(S,1,1,()=>{S=null}),ie()),A[6].length>0?N?(N.p(A,L),L&64&&T(N,1)):(N=Rt(A),N.c(),T(N,1),N.m(e,null)):N&&(ne(),O(N,1,1,()=>{N=null}),ie())},i(A){$||(T(k),T(S),T(N),$=!0)},o(A){O(k),O(S),O(N),$=!1},d(A){A&&g(e),k&&k.d(),E&&E.d(),D&&D.d(),I&&I.d(),S&&S.d(),N&&N.d()}}}function yt(s){let e,t,l;var r=s[8].icon;function i(n,a){return{props:{size:20,class:n[8].color+" "+(n[0]==="uploading"||n[0]==="validating"||n[0]==="mapping"||n[0]==="importing"?"animate-spin":"")}}}return r&&(e=Qe(r,i(s))),{c(){e&&ee(e.$$.fragment),t=Ce()},l(n){e&&te(e.$$.fragment,n),t=Ce()},m(n,a){e&&x(e,n,a),j(n,t,a),l=!0},p(n,a){if(a&256&&r!==(r=n[8].icon)){if(e){ne();const o=e;O(o.$$.fragment,1,0,()=>{Z(o,1)}),ie()}r?(e=Qe(r,i(n)),ee(e.$$.fragment),T(e.$$.fragment,1),x(e,t.parentNode,t)):e=null}else if(r){const o={};a&257&&(o.class=n[8].color+" "+(n[0]==="uploading"||n[0]==="validating"||n[0]==="mapping"||n[0]==="importing"?"animate-spin":"")),e.$set(o)}},i(n){l||(e&&T(e.$$.fragment,n),l=!0)},o(n){e&&O(e.$$.fragment,n),l=!1},d(n){n&&g(t),e&&Z(e,n)}}}function Ct(s){let e,t;return{c(){e=C("span"),t=F(s[2]),this.h()},l(l){e=y(l,"SPAN",{class:!0});var r=P(e);t=z(r,s[2]),r.forEach(g),this.h()},h(){b(e,"class","file-name svelte-hlxry")},m(l,r){j(l,e,r),c(e,t)},p(l,r){r&4&&Q(t,l[2])},d(l){l&&g(e)}}}function It(s){let e,t;return{c(){e=C("p"),t=F(s[1]),this.h()},l(l){e=y(l,"P",{class:!0});var r=P(e);t=z(r,s[1]),r.forEach(g),this.h()},h(){b(e,"class","message svelte-hlxry")},m(l,r){j(l,e,r),c(e,t)},p(l,r){r&2&&Q(t,l[1])},d(l){l&&g(e)}}}function Dt(s){let e,t,l,r,i,n;return{c(){e=C("p"),t=F("Processing: "),l=F(s[3]),r=F(" / "),i=F(s[4]),n=F(" rows"),this.h()},l(a){e=y(a,"P",{class:!0});var o=P(e);t=z(o,"Processing: "),l=z(o,s[3]),r=z(o," / "),i=z(o,s[4]),n=z(o," rows"),o.forEach(g),this.h()},h(){b(e,"class","row-count svelte-hlxry")},m(a,o){j(a,e,o),c(e,t),c(e,l),c(e,r),c(e,i),c(e,n)},p(a,o){o&8&&Q(l,a[3]),o&16&&Q(i,a[4])},d(a){a&&g(e)}}}function St(s){let e,t,l,r,i=s[5].length+"",n,a,o,f,h,u;l=new Ge({props:{size:16}});let m=ae(s[5].slice(0,5)),v=[];for(let p=0;p<m.length;p+=1)v[p]=Pt(wt(s,m,p));let d=s[5].length>5&&$t(s);return{c(){e=C("div"),t=C("h4"),ee(l.$$.fragment),r=F(" Errors ("),n=F(i),a=F(")"),o=V(),f=C("ul");for(let p=0;p<v.length;p+=1)v[p].c();h=V(),d&&d.c(),this.h()},l(p){e=y(p,"DIV",{class:!0});var w=P(e);t=y(w,"H4",{class:!0});var _=P(t);te(l.$$.fragment,_),r=z(_," Errors ("),n=z(_,i),a=z(_,")"),_.forEach(g),o=M(w),f=y(w,"UL",{class:!0});var $=P(f);for(let k=0;k<v.length;k+=1)v[k].l($);h=M($),d&&d.l($),$.forEach(g),w.forEach(g),this.h()},h(){b(t,"class","svelte-hlxry"),b(f,"class","svelte-hlxry"),b(e,"class","error-list svelte-hlxry")},m(p,w){j(p,e,w),c(e,t),x(l,t,null),c(t,r),c(t,n),c(t,a),c(e,o),c(e,f);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(f,null);c(f,h),d&&d.m(f,null),u=!0},p(p,w){if((!u||w&32)&&i!==(i=p[5].length+"")&&Q(n,i),w&32){m=ae(p[5].slice(0,5));let _;for(_=0;_<m.length;_+=1){const $=wt(p,m,_);v[_]?v[_].p($,w):(v[_]=Pt($),v[_].c(),v[_].m(f,h))}for(;_<v.length;_+=1)v[_].d(1);v.length=m.length}p[5].length>5?d?d.p(p,w):(d=$t(p),d.c(),d.m(f,null)):d&&(d.d(1),d=null)},i(p){u||(T(l.$$.fragment,p),u=!0)},o(p){O(l.$$.fragment,p),u=!1},d(p){p&&g(e),Z(l),ge(v,p),d&&d.d()}}}function Pt(s){let e,t=s[14]+"",l;return{c(){e=C("li"),l=F(t),this.h()},l(r){e=y(r,"LI",{class:!0});var i=P(e);l=z(i,t),i.forEach(g),this.h()},h(){b(e,"class","svelte-hlxry")},m(r,i){j(r,e,i),c(e,l)},p(r,i){i&32&&t!==(t=r[14]+"")&&Q(l,t)},d(r){r&&g(e)}}}function $t(s){let e,t,l=s[5].length-5+"",r,i;return{c(){e=C("li"),t=F("... and "),r=F(l),i=F(" more errors"),this.h()},l(n){e=y(n,"LI",{class:!0});var a=P(e);t=z(a,"... and "),r=z(a,l),i=z(a," more errors"),a.forEach(g),this.h()},h(){b(e,"class","more svelte-hlxry")},m(n,a){j(n,e,a),c(e,t),c(e,r),c(e,i)},p(n,a){a&32&&l!==(l=n[5].length-5+"")&&Q(r,l)},d(n){n&&g(e)}}}function Rt(s){let e,t,l,r,i=s[6].length+"",n,a,o,f,h,u;l=new We({props:{size:16}});let m=ae(s[6].slice(0,3)),v=[];for(let p=0;p<m.length;p+=1)v[p]=Mt(kt(s,m,p));let d=s[6].length>3&&Vt(s);return{c(){e=C("div"),t=C("h4"),ee(l.$$.fragment),r=F(" Warnings ("),n=F(i),a=F(")"),o=V(),f=C("ul");for(let p=0;p<v.length;p+=1)v[p].c();h=V(),d&&d.c(),this.h()},l(p){e=y(p,"DIV",{class:!0});var w=P(e);t=y(w,"H4",{class:!0});var _=P(t);te(l.$$.fragment,_),r=z(_," Warnings ("),n=z(_,i),a=z(_,")"),_.forEach(g),o=M(w),f=y(w,"UL",{class:!0});var $=P(f);for(let k=0;k<v.length;k+=1)v[k].l($);h=M($),d&&d.l($),$.forEach(g),w.forEach(g),this.h()},h(){b(t,"class","svelte-hlxry"),b(f,"class","svelte-hlxry"),b(e,"class","warning-list svelte-hlxry")},m(p,w){j(p,e,w),c(e,t),x(l,t,null),c(t,r),c(t,n),c(t,a),c(e,o),c(e,f);for(let _=0;_<v.length;_+=1)v[_]&&v[_].m(f,null);c(f,h),d&&d.m(f,null),u=!0},p(p,w){if((!u||w&64)&&i!==(i=p[6].length+"")&&Q(n,i),w&64){m=ae(p[6].slice(0,3));let _;for(_=0;_<m.length;_+=1){const $=kt(p,m,_);v[_]?v[_].p($,w):(v[_]=Mt($),v[_].c(),v[_].m(f,h))}for(;_<v.length;_+=1)v[_].d(1);v.length=m.length}p[6].length>3?d?d.p(p,w):(d=Vt(p),d.c(),d.m(f,null)):d&&(d.d(1),d=null)},i(p){u||(T(l.$$.fragment,p),u=!0)},o(p){O(l.$$.fragment,p),u=!1},d(p){p&&g(e),Z(l),ge(v,p),d&&d.d()}}}function Mt(s){let e,t=s[11]+"",l;return{c(){e=C("li"),l=F(t),this.h()},l(r){e=y(r,"LI",{class:!0});var i=P(e);l=z(i,t),i.forEach(g),this.h()},h(){b(e,"class","svelte-hlxry")},m(r,i){j(r,e,i),c(e,l)},p(r,i){i&64&&t!==(t=r[11]+"")&&Q(l,t)},d(r){r&&g(e)}}}function Vt(s){let e,t,l=s[6].length-3+"",r,i;return{c(){e=C("li"),t=F("... and "),r=F(l),i=F(" more warnings"),this.h()},l(n){e=y(n,"LI",{class:!0});var a=P(e);t=z(a,"... and "),r=z(a,l),i=z(a," more warnings"),a.forEach(g),this.h()},h(){b(e,"class","more svelte-hlxry")},m(n,a){j(n,e,a),c(e,t),c(e,r),c(e,i)},p(n,a){a&64&&l!==(l=n[6].length-3+"")&&Q(r,l)},d(n){n&&g(e)}}}function ql(s){let e,t,l=s[0]!=="idle"&&Et(s);return{c(){l&&l.c(),e=Ce()},l(r){l&&l.l(r),e=Ce()},m(r,i){l&&l.m(r,i),j(r,e,i),t=!0},p(r,[i]){r[0]!=="idle"?l?(l.p(r,i),i&1&&T(l,1)):(l=Et(r),l.c(),T(l,1),l.m(e.parentNode,e)):l&&(ne(),O(l,1,1,()=>{l=null}),ie())},i(r){t||(T(l),t=!0)},o(r){O(l),t=!1},d(r){r&&g(e),l&&l.d(r)}}}function Al(s,e,t){let l,r,{stage:i="idle"}=e,{progress:n=0}=e,{message:a=""}=e,{fileName:o=""}=e,{rowsProcessed:f=0}=e,{totalRows:h=0}=e,{errors:u=[]}=e,{warnings:m=[]}=e;const v={idle:{label:"Ready",icon:null,color:"text-gray-500"},uploading:{label:"Uploading",icon:Je,color:"text-blue-600"},validating:{label:"Validating",icon:Je,color:"text-orange-600"},mapping:{label:"Mapping Columns",icon:Je,color:"text-purple-600"},importing:{label:"Importing",icon:Je,color:"text-green-600"},complete:{label:"Complete",icon:Ke,color:"text-green-600"},error:{label:"Error",icon:Ge,color:"text-red-600"}};return s.$$set=d=>{"stage"in d&&t(0,i=d.stage),"progress"in d&&t(9,n=d.progress),"message"in d&&t(1,a=d.message),"fileName"in d&&t(2,o=d.fileName),"rowsProcessed"in d&&t(3,f=d.rowsProcessed),"totalRows"in d&&t(4,h=d.totalRows),"errors"in d&&t(5,u=d.errors),"warnings"in d&&t(6,m=d.warnings)},s.$$.update=()=>{s.$$.dirty&1&&t(8,l=v[i]),s.$$.dirty&512&&t(7,r=Math.min(100,Math.max(0,n)))},[i,a,o,f,h,u,m,r,l,n]}class zl extends Re{constructor(e){super(),Me(this,e,Al,ql,Ve,{stage:0,progress:9,message:1,fileName:2,rowsProcessed:3,totalRows:4,errors:5,warnings:6})}}function Tt(s,e,t){const l=s.slice();return l[17]=e[t],l}function Nt(s,e,t){const l=s.slice();return l[20]=e[t],l}function lt(s){const e=s.slice(),t=e[5].find(function(...r){return s[15](e[17],...r)});return e[23]=t,e}function qt(s,e,t){const l=s.slice();return l[23]=e[t],l}function At(s){let e,t="Apply Suggestions",l,r;return{c(){e=C("button"),e.textContent=t,this.h()},l(i){e=y(i,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(e)!=="svelte-1gjnqhk"&&(e.textContent=t),this.h()},h(){b(e,"type","button"),b(e,"class","btn-secondary svelte-89fr8f")},m(i,n){j(i,e,n),l||(r=pe(e,"click",s[8]),l=!0)},p:qe,d(i){i&&g(e),l=!1,r()}}}function Fl(s){let e,t,l,r,i="All required fields are mapped!",n;return t=new Ke({props:{size:20}}),{c(){e=C("div"),ee(t.$$.fragment),l=V(),r=C("span"),r.textContent=i,this.h()},l(a){e=y(a,"DIV",{class:!0});var o=P(e);te(t.$$.fragment,o),l=M(o),r=y(o,"SPAN",{"data-svelte-h":!0}),X(r)!=="svelte-102sxa9"&&(r.textContent=i),o.forEach(g),this.h()},h(){b(e,"class","success-banner svelte-89fr8f")},m(a,o){j(a,e,o),x(t,e,null),c(e,l),c(e,r),n=!0},p:qe,i(a){n||(T(t.$$.fragment,a),n=!0)},o(a){O(t.$$.fragment,a),n=!1},d(a){a&&g(e),Z(t)}}}function Ll(s){let e,t,l,r,i,n=s[3].filter(s[13]).map(Ht).join(", ")+"",a,o;return t=new We({props:{size:20}}),{c(){e=C("div"),ee(t.$$.fragment),l=V(),r=C("span"),i=F(`Please map all required fields: 
				`),a=F(n),this.h()},l(f){e=y(f,"DIV",{class:!0});var h=P(e);te(t.$$.fragment,h),l=M(h),r=y(h,"SPAN",{});var u=P(r);i=z(u,`Please map all required fields: 
				`),a=z(u,n),u.forEach(g),h.forEach(g),this.h()},h(){b(e,"class","warning-banner svelte-89fr8f")},m(f,h){j(f,e,h),x(t,e,null),c(e,l),c(e,r),c(r,i),c(r,a),o=!0},p(f,h){(!o||h&12)&&n!==(n=f[3].filter(f[13]).map(Ht).join(", ")+"")&&Q(a,n)},i(f){o||(T(t.$$.fragment,f),o=!0)},o(f){O(t.$$.fragment,f),o=!1},d(f){f&&g(e),Z(t)}}}function zt(s){let e,t,l,r=s[1][s[17]]+"",i,n;return t=new vl({props:{size:14}}),{c(){e=C("span"),ee(t.$$.fragment),l=F(`
							Suggested: `),i=F(r),this.h()},l(a){e=y(a,"SPAN",{class:!0});var o=P(e);te(t.$$.fragment,o),l=z(o,`
							Suggested: `),i=z(o,r),o.forEach(g),this.h()},h(){b(e,"class","suggestion svelte-89fr8f")},m(a,o){j(a,e,o),x(t,e,null),c(e,l),c(e,i),n=!0},p(a,o){(!n||o&3)&&r!==(r=a[1][a[17]]+"")&&Q(i,r)},i(a){n||(T(t.$$.fragment,a),n=!0)},o(a){O(t.$$.fragment,a),n=!1},d(a){a&&g(e),Z(t)}}}function Ol(s){let e;return{c(){e=F("*")},l(t){e=z(t,"*")},m(t,l){j(t,e,l)},d(t){t&&g(e)}}}function Ft(s){let e;return{c(){e=F("(already mapped)")},l(t){e=z(t,"(already mapped)")},m(t,l){j(t,e,l)},d(t){t&&g(e)}}}function Lt(s){let e,t=s[23].label+"",l,r,i,n=s[23].value!==""&&s[23].value!==s[2][s[17]]&&Object.values(s[2]).includes(s[23].value),a,o,f=s[23].required&&Ol(),h=n&&Ft();return{c(){e=C("option"),l=F(t),r=V(),f&&f.c(),i=V(),h&&h.c(),a=V(),this.h()},l(u){e=y(u,"OPTION",{});var m=P(e);l=z(m,t),r=M(m),f&&f.l(m),i=M(m),h&&h.l(m),a=M(m),m.forEach(g),this.h()},h(){e.__value=s[23].value,pl(e,e.__value),e.disabled=o=s[23].value!==""&&s[23].value!==s[2][s[17]]&&Object.values(s[2]).includes(s[23].value)},m(u,m){j(u,e,m),c(e,l),c(e,r),f&&f.m(e,null),c(e,i),h&&h.m(e,null),c(e,a)},p(u,m){m&5&&(n=u[23].value!==""&&u[23].value!==u[2][u[17]]&&Object.values(u[2]).includes(u[23].value)),n?h||(h=Ft(),h.c(),h.m(e,a)):h&&(h.d(1),h=null),m&37&&o!==(o=u[23].value!==""&&u[23].value!==u[2][u[17]]&&Object.values(u[2]).includes(u[23].value))&&(e.disabled=o)},d(u){u&&g(e),f&&f.d(),h&&h.d()}}}function Ot(s){var l;let e,t=((l=s[23])==null?void 0:l.description)&&Ut(s);return{c(){t&&t.c(),e=Ce()},l(r){t&&t.l(r),e=Ce()},m(r,i){t&&t.m(r,i),j(r,e,i)},p(r,i){var n;(n=r[23])!=null&&n.description?t?t.p(r,i):(t=Ut(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},d(r){r&&g(e),t&&t.d(r)}}}function Ut(s){let e,t=s[23].description+"",l;return{c(){e=C("p"),l=F(t),this.h()},l(r){e=y(r,"P",{class:!0});var i=P(e);l=z(i,t),i.forEach(g),this.h()},h(){b(e,"class","field-description svelte-89fr8f")},m(r,i){j(r,e,i),c(e,l)},p(r,i){i&5&&t!==(t=r[23].description+"")&&Q(l,t)},d(r){r&&g(e)}}}function jt(s){let e,t=s[20]+"",l;return{c(){e=C("span"),l=F(t),this.h()},l(r){e=y(r,"SPAN",{class:!0});var i=P(e);l=z(i,t),i.forEach(g),this.h()},h(){b(e,"class","sample svelte-89fr8f")},m(r,i){j(r,e,i),c(e,l)},p(r,i){i&1&&t!==(t=r[20]+"")&&Q(l,t)},d(r){r&&g(e)}}}function Bt(s){let e,t,l,r=s[17]+"",i,n,a,o,f,h,u="Select field...",m,v,d,p,w,_,$,k,E=s[1][s[17]]&&!s[2][s[17]]&&zt(s),D=ae(s[5]),I=[];for(let R=0;R<D.length;R+=1)I[R]=Lt(qt(s,D,R));function S(...R){return s[14](s[17],...R)}let N=s[2][s[17]]&&Ot(lt(s)),A=ae(s[6](s[17])),L=[];for(let R=0;R<A.length;R+=1)L[R]=jt(Nt(s,A,R));return{c(){e=C("div"),t=C("div"),l=C("span"),i=F(r),n=V(),E&&E.c(),a=V(),o=C("div"),f=C("select"),h=C("option"),h.textContent=u;for(let R=0;R<I.length;R+=1)I[R].c();v=V(),N&&N.c(),d=V(),p=C("div");for(let R=0;R<L.length;R+=1)L[R].c();w=V(),this.h()},l(R){e=y(R,"DIV",{class:!0});var U=P(e);t=y(U,"DIV",{class:!0});var q=P(t);l=y(q,"SPAN",{class:!0});var B=P(l);i=z(B,r),B.forEach(g),n=M(q),E&&E.l(q),q.forEach(g),a=M(U),o=y(U,"DIV",{class:!0});var Y=P(o);f=y(Y,"SELECT",{class:!0});var me=P(f);h=y(me,"OPTION",{"data-svelte-h":!0}),X(h)!=="svelte-rwo5t2"&&(h.textContent=u);for(let le=0;le<I.length;le+=1)I[le].l(me);me.forEach(g),v=M(Y),N&&N.l(Y),Y.forEach(g),d=M(U),p=y(U,"DIV",{class:!0});var J=P(p);for(let le=0;le<L.length;le+=1)L[le].l(J);J.forEach(g),w=M(U),U.forEach(g),this.h()},h(){b(l,"class","name svelte-89fr8f"),b(t,"class","column-name svelte-89fr8f"),h.__value="",pl(h,h.__value),b(f,"class","svelte-89fr8f"),b(o,"class","mapping-select svelte-89fr8f"),b(p,"class","sample-values svelte-89fr8f"),b(e,"class","mapping-row svelte-89fr8f")},m(R,U){j(R,e,U),c(e,t),c(t,l),c(l,i),c(t,n),E&&E.m(t,null),c(e,a),c(e,o),c(o,f),c(f,h);for(let q=0;q<I.length;q+=1)I[q]&&I[q].m(f,null);ut(f,s[2][s[17]]||""),c(o,v),N&&N.m(o,null),c(e,d),c(e,p);for(let q=0;q<L.length;q+=1)L[q]&&L[q].m(p,null);c(e,w),_=!0,$||(k=pe(f,"change",S),$=!0)},p(R,U){if(s=R,(!_||U&1)&&r!==(r=s[17]+"")&&Q(i,r),s[1][s[17]]&&!s[2][s[17]]?E?(E.p(s,U),U&7&&T(E,1)):(E=zt(s),E.c(),T(E,1),E.m(t,null)):E&&(ne(),O(E,1,1,()=>{E=null}),ie()),U&37){D=ae(s[5]);let q;for(q=0;q<D.length;q+=1){const B=qt(s,D,q);I[q]?I[q].p(B,U):(I[q]=Lt(B),I[q].c(),I[q].m(f,null))}for(;q<I.length;q+=1)I[q].d(1);I.length=D.length}if((!_||U&37&&m!==(m=s[2][s[17]]||""))&&ut(f,s[2][s[17]]||""),s[2][s[17]]?N?N.p(lt(s),U):(N=Ot(lt(s)),N.c(),N.m(o,null)):N&&(N.d(1),N=null),U&65){A=ae(s[6](s[17]));let q;for(q=0;q<A.length;q+=1){const B=Nt(s,A,q);L[q]?L[q].p(B,U):(L[q]=jt(B),L[q].c(),L[q].m(p,null))}for(;q<L.length;q+=1)L[q].d(1);L.length=A.length}},i(R){_||(T(E),_=!0)},o(R){O(E),_=!1},d(R){R&&g(e),E&&E.d(),ge(I,R),N&&N.d(),ge(L,R),$=!1,k()}}}function Ul(s){let e,t,l,r="Map Your Columns",i,n,a="Match your file columns to the system fields",o,f,h=Object.keys(s[1]).length>0,u,m,v="Clear All",d,p,w,_,$,k,E='<div class="svelte-89fr8f">Your Column</div> <div class="svelte-89fr8f">Maps To</div> <div class="svelte-89fr8f">Sample Values</div>',D,I,S,N,A='<span class="required svelte-89fr8f">*</span> Required fields',L,R,U,q,B,Y,me,J=h&&At(s);const le=[Ll,Fl],oe=[];function _e(H,W){return H[4]?1:0}p=_e(s),w=oe[p]=le[p](s);let re=ae(s[0]),K=[];for(let H=0;H<re.length;H+=1)K[H]=Bt(Tt(s,re,H));const Te=H=>O(K[H],1,1,()=>{K[H]=null});return U=new vl({props:{size:14}}),{c(){e=C("div"),t=C("div"),l=C("h3"),l.textContent=r,i=V(),n=C("p"),n.textContent=a,o=V(),f=C("div"),J&&J.c(),u=V(),m=C("button"),m.textContent=v,d=V(),w.c(),_=V(),$=C("div"),k=C("div"),k.innerHTML=E,D=V();for(let H=0;H<K.length;H+=1)K[H].c();I=V(),S=C("div"),N=C("p"),N.innerHTML=A,L=V(),R=C("p"),ee(U.$$.fragment),q=F(" Suggested mappings are based on column names"),this.h()},l(H){e=y(H,"DIV",{class:!0});var W=P(e);t=y(W,"DIV",{class:!0});var he=P(t);l=y(he,"H3",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-2c9sj6"&&(l.textContent=r),i=M(he),n=y(he,"P",{class:!0,"data-svelte-h":!0}),X(n)!=="svelte-oqa1lx"&&(n.textContent=a),o=M(he),f=y(he,"DIV",{class:!0});var se=P(f);J&&J.l(se),u=M(se),m=y(se,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(m)!=="svelte-3oqbvh"&&(m.textContent=v),se.forEach(g),he.forEach(g),d=M(W),w.l(W),_=M(W),$=y(W,"DIV",{class:!0});var ve=P($);k=y(ve,"DIV",{class:!0,"data-svelte-h":!0}),X(k)!=="svelte-1w2eyrs"&&(k.innerHTML=E),D=M(ve);for(let Ee=0;Ee<K.length;Ee+=1)K[Ee].l(ve);ve.forEach(g),I=M(W),S=y(W,"DIV",{class:!0});var Ie=P(S);N=y(Ie,"P",{class:!0,"data-svelte-h":!0}),X(N)!=="svelte-n19w63"&&(N.innerHTML=A),L=M(Ie),R=y(Ie,"P",{class:!0});var De=P(R);te(U.$$.fragment,De),q=z(De," Suggested mappings are based on column names"),De.forEach(g),Ie.forEach(g),W.forEach(g),this.h()},h(){b(l,"class","svelte-89fr8f"),b(n,"class","svelte-89fr8f"),b(m,"type","button"),b(m,"class","btn-ghost svelte-89fr8f"),b(f,"class","actions svelte-89fr8f"),b(t,"class","mapper-header svelte-89fr8f"),b(k,"class","grid-header svelte-89fr8f"),b($,"class","mapping-grid svelte-89fr8f"),b(N,"class","svelte-89fr8f"),b(R,"class","svelte-89fr8f"),b(S,"class","legend svelte-89fr8f"),b(e,"class","column-mapper svelte-89fr8f")},m(H,W){j(H,e,W),c(e,t),c(t,l),c(t,i),c(t,n),c(t,o),c(t,f),J&&J.m(f,null),c(f,u),c(f,m),c(e,d),oe[p].m(e,null),c(e,_),c(e,$),c($,k),c($,D);for(let he=0;he<K.length;he+=1)K[he]&&K[he].m($,null);c(e,I),c(e,S),c(S,N),c(S,L),c(S,R),x(U,R,null),c(R,q),B=!0,Y||(me=pe(m,"click",s[9]),Y=!0)},p(H,[W]){W&2&&(h=Object.keys(H[1]).length>0),h?J?J.p(H,W):(J=At(H),J.c(),J.m(f,u)):J&&(J.d(1),J=null);let he=p;if(p=_e(H),p===he?oe[p].p(H,W):(ne(),O(oe[he],1,1,()=>{oe[he]=null}),ie(),w=oe[p],w?w.p(H,W):(w=oe[p]=le[p](H),w.c()),T(w,1),w.m(e,_)),W&231){re=ae(H[0]);let se;for(se=0;se<re.length;se+=1){const ve=Tt(H,re,se);K[se]?(K[se].p(ve,W),T(K[se],1)):(K[se]=Bt(ve),K[se].c(),T(K[se],1),K[se].m($,null))}for(ne(),se=re.length;se<K.length;se+=1)Te(se);ie()}},i(H){if(!B){T(w);for(let W=0;W<re.length;W+=1)T(K[W]);T(U.$$.fragment,H),B=!0}},o(H){O(w),K=K.filter(Boolean);for(let W=0;W<K.length;W+=1)O(K[W]);O(U.$$.fragment,H),B=!1},d(H){H&&g(e),J&&J.d(),oe[p].d(),ge(K,H),Z(U),Y=!1,me()}}}const Ht=s=>s.label;function jl(s,e,t){let l,r,i;const n=dl();let{fileColumns:a=[]}=e,{dataPreview:o=[]}=e,{suggestedMapping:f={}}=e,{currentMapping:h={}}=e;const u=[{value:"symbol",label:"Symbol",required:!0,description:"Trading symbol (e.g., AAPL, TSLA)"},{value:"side",label:"Side",required:!0,description:"Trade direction (long/short)"},{value:"entry_price",label:"Entry Price",required:!0,description:"Price at entry"},{value:"exit_price",label:"Exit Price",required:!0,description:"Price at exit"},{value:"quantity",label:"Quantity",required:!0,description:"Number of shares/contracts"},{value:"entry_date",label:"Entry Date",required:!0,description:"Date/time of entry"},{value:"exit_date",label:"Exit Date",required:!0,description:"Date/time of exit"},{value:"pnl",label:"P&L",required:!1,description:"Profit/Loss (will be calculated if not provided)"},{value:"strategy",label:"Strategy",required:!1,description:"Trading strategy used"},{value:"notes",label:"Notes",required:!1,description:"Additional notes or comments"},{value:"",label:"Skip this column",required:!1,description:"Do not import this column"}];let m={...f,...h};function v(E){const D=o.map(I=>I[E]).filter(I=>I!=null&&I!=="").slice(0,3);return[...new Set(D)]}function d(E,D){if(D===""){const I={...m};delete I[E],t(2,m=I)}else{const I=Object.entries(m).find(([S,N])=>N===D&&S!==E);if(I){const S={...m};delete S[I[0]],S[E]=D,t(2,m=S)}else t(2,m={...m,[E]:D})}n("change",{mapping:m})}function p(){t(2,m={...f}),n("change",{mapping:m})}function w(){t(2,m={}),n("change",{mapping:m})}const _=E=>!Object.values(m).includes(E.value),$=(E,D)=>d(E,D.currentTarget.value),k=(E,D)=>D.value===m[E];return s.$$set=E=>{"fileColumns"in E&&t(0,a=E.fileColumns),"dataPreview"in E&&t(10,o=E.dataPreview),"suggestedMapping"in E&&t(1,f=E.suggestedMapping),"currentMapping"in E&&t(11,h=E.currentMapping)},s.$$.update=()=>{s.$$.dirty&12&&t(12,r=l.filter(E=>Object.values(m).includes(E.value))),s.$$.dirty&4104&&t(4,i=r.length===l.length)},t(3,l=u.filter(E=>E.required)),[a,f,m,l,i,u,v,d,p,w,o,h,r,_,$,k]}class Bl extends Re{constructor(e){super(),Me(this,e,jl,Ul,Ve,{fileColumns:0,dataPreview:10,suggestedMapping:1,currentMapping:11})}}function Jt(s,e,t){const l=s.slice();return l[8]=e[t],l[10]=t,l}function Yt(s,e,t){const l=s.slice();return l[11]=e[t],l}function Qt(s,e,t){const l=s.slice();return l[11]=e[t],l}function Wt(s){let e,t,l,r,i,n;const a=[Jl,Hl],o=[];function f(h,u){return h[4]?0:1}return t=f(s),l=o[t]=a[t](s),{c(){e=C("button"),l.c(),this.h()},l(h){e=y(h,"BUTTON",{type:!0,class:!0});var u=P(e);l.l(u),u.forEach(g),this.h()},h(){b(e,"type","button"),b(e,"class","toggle-btn svelte-1o68069")},m(h,u){j(h,e,u),o[t].m(e,null),r=!0,i||(n=pe(e,"click",s[7]),i=!0)},p(h,u){let m=t;t=f(h),t!==m&&(ne(),O(o[m],1,1,()=>{o[m]=null}),ie(),l=o[t],l||(l=o[t]=a[t](h),l.c()),T(l,1),l.m(e,null))},i(h){r||(T(l),r=!0)},o(h){O(l),r=!1},d(h){h&&g(e),o[t].d(),i=!1,n()}}}function Hl(s){let e,t,l;return e=new Sl({props:{size:16}}),{c(){ee(e.$$.fragment),t=F(`
					Show All`)},l(r){te(e.$$.fragment,r),t=z(r,`
					Show All`)},m(r,i){x(e,r,i),j(r,t,i),l=!0},i(r){l||(T(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){r&&g(t),Z(e,r)}}}function Jl(s){let e,t,l;return e=new Dl({props:{size:16}}),{c(){ee(e.$$.fragment),t=F(`
					Show Less`)},l(r){te(e.$$.fragment,r),t=z(r,`
					Show Less`)},m(r,i){x(e,r,i),j(r,t,i),l=!0},i(r){l||(T(e.$$.fragment,r),l=!0)},o(r){O(e.$$.fragment,r),l=!1},d(r){r&&g(t),Z(e,r)}}}function Yl(s){let e,t="No data to preview";return{c(){e=C("div"),e.textContent=t,this.h()},l(l){e=y(l,"DIV",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-9onrw2"&&(e.textContent=t),this.h()},h(){b(e,"class","no-data svelte-1o68069")},m(l,r){j(l,e,r)},p:qe,d(l){l&&g(e)}}}function Ql(s){let e,t,l,r,i,n="#",a,o,f,h,u,m=ae(s[1]),v=[];for(let _=0;_<m.length;_+=1)v[_]=Gt(Qt(s,m,_));let d=ae(s[6]),p=[];for(let _=0;_<d.length;_+=1)p[_]=Xt(Jt(s,d,_));let w=s[5]&&!s[4]&&Zt(s);return{c(){e=C("div"),t=C("table"),l=C("thead"),r=C("tr"),i=C("th"),i.textContent=n,a=V();for(let _=0;_<v.length;_+=1)v[_].c();o=V(),f=C("tbody");for(let _=0;_<p.length;_+=1)p[_].c();h=V(),w&&w.c(),u=Ce(),this.h()},l(_){e=y(_,"DIV",{class:!0});var $=P(e);t=y($,"TABLE",{class:!0});var k=P(t);l=y(k,"THEAD",{class:!0});var E=P(l);r=y(E,"TR",{});var D=P(r);i=y(D,"TH",{class:!0,"data-svelte-h":!0}),X(i)!=="svelte-1kq6afa"&&(i.textContent=n),a=M(D);for(let S=0;S<v.length;S+=1)v[S].l(D);D.forEach(g),E.forEach(g),o=M(k),f=y(k,"TBODY",{class:!0});var I=P(f);for(let S=0;S<p.length;S+=1)p[S].l(I);I.forEach(g),k.forEach(g),$.forEach(g),h=M(_),w&&w.l(_),u=Ce(),this.h()},h(){b(i,"class","row-number svelte-1o68069"),b(l,"class","svelte-1o68069"),b(f,"class","svelte-1o68069"),b(t,"class","svelte-1o68069"),b(e,"class","table-container svelte-1o68069")},m(_,$){j(_,e,$),c(e,t),c(t,l),c(l,r),c(r,i),c(r,a);for(let k=0;k<v.length;k+=1)v[k]&&v[k].m(r,null);c(t,o),c(t,f);for(let k=0;k<p.length;k+=1)p[k]&&p[k].m(f,null);j(_,h,$),w&&w.m(_,$),j(_,u,$)},p(_,$){if($&2){m=ae(_[1]);let k;for(k=0;k<m.length;k+=1){const E=Qt(_,m,k);v[k]?v[k].p(E,$):(v[k]=Gt(E),v[k].c(),v[k].m(r,null))}for(;k<v.length;k+=1)v[k].d(1);v.length=m.length}if($&66){d=ae(_[6]);let k;for(k=0;k<d.length;k+=1){const E=Jt(_,d,k);p[k]?p[k].p(E,$):(p[k]=Xt(E),p[k].c(),p[k].m(f,null))}for(;k<p.length;k+=1)p[k].d(1);p.length=d.length}_[5]&&!_[4]?w?w.p(_,$):(w=Zt(_),w.c(),w.m(u.parentNode,u)):w&&(w.d(1),w=null)},d(_){_&&(g(e),g(h),g(u)),ge(v,_),ge(p,_),w&&w.d(_)}}}function Gt(s){let e,t=s[11]+"",l;return{c(){e=C("th"),l=F(t),this.h()},l(r){e=y(r,"TH",{class:!0});var i=P(e);l=z(i,t),i.forEach(g),this.h()},h(){b(e,"class","svelte-1o68069")},m(r,i){j(r,e,i),c(e,l)},p(r,i){i&2&&t!==(t=r[11]+"")&&Q(l,t)},d(r){r&&g(e)}}}function Wl(s){let e,t="-";return{c(){e=C("span"),e.textContent=t,this.h()},l(l){e=y(l,"SPAN",{class:!0,"data-svelte-h":!0}),X(e)!=="svelte-c8aoy5"&&(e.textContent=t),this.h()},h(){b(e,"class","empty svelte-1o68069")},m(l,r){j(l,e,r)},p:qe,d(l){l&&g(e)}}}function Gl(s){let e=s[8][s[11]]+"",t;return{c(){t=F(e)},l(l){t=z(l,e)},m(l,r){j(l,t,r)},p(l,r){r&66&&e!==(e=l[8][l[11]]+"")&&Q(t,e)},d(l){l&&g(t)}}}function Kt(s){let e;function t(i,n){return i[8][i[11]]!==null&&i[8][i[11]]!==void 0?Gl:Wl}let l=t(s),r=l(s);return{c(){e=C("td"),r.c(),this.h()},l(i){e=y(i,"TD",{class:!0});var n=P(e);r.l(n),n.forEach(g),this.h()},h(){b(e,"class","svelte-1o68069")},m(i,n){j(i,e,n),r.m(e,null)},p(i,n){l===(l=t(i))&&r?r.p(i,n):(r.d(1),r=l(i),r&&(r.c(),r.m(e,null)))},d(i){i&&g(e),r.d()}}}function Xt(s){let e,t,l=s[10]+1+"",r,i,n,a=ae(s[1]),o=[];for(let f=0;f<a.length;f+=1)o[f]=Kt(Yt(s,a,f));return{c(){e=C("tr"),t=C("td"),r=F(l),i=V();for(let f=0;f<o.length;f+=1)o[f].c();n=V(),this.h()},l(f){e=y(f,"TR",{class:!0});var h=P(e);t=y(h,"TD",{class:!0});var u=P(t);r=z(u,l),u.forEach(g),i=M(h);for(let m=0;m<o.length;m+=1)o[m].l(h);n=M(h),h.forEach(g),this.h()},h(){b(t,"class","row-number svelte-1o68069"),b(e,"class","svelte-1o68069")},m(f,h){j(f,e,h),c(e,t),c(t,r),c(e,i);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);c(e,n)},p(f,h){if(h&66){a=ae(f[1]);let u;for(u=0;u<a.length;u+=1){const m=Yt(f,a,u);o[u]?o[u].p(m,h):(o[u]=Kt(m),o[u].c(),o[u].m(e,n))}for(;u<o.length;u+=1)o[u].d(1);o.length=a.length}},d(f){f&&g(e),ge(o,f)}}}function Zt(s){let e,t,l=s[0].length-s[3]+"",r,i;return{c(){e=C("div"),t=F("... and "),r=F(l),i=F(" more rows"),this.h()},l(n){e=y(n,"DIV",{class:!0});var a=P(e);t=z(a,"... and "),r=z(a,l),i=z(a," more rows"),a.forEach(g),this.h()},h(){b(e,"class","more-indicator svelte-1o68069")},m(n,a){j(n,e,a),c(e,t),c(e,r),c(e,i)},p(n,a){a&9&&l!==(l=n[0].length-n[3]+"")&&Q(r,l)},d(n){n&&g(e)}}}function Kl(s){let e,t,l,r,i,n,a,o=s[6].length+"",f,h,u=s[0].length+"",m,v,d,p,w,_=s[5]&&Wt(s);function $(D,I){return D[0].length>0?Ql:Yl}let k=$(s),E=k(s);return{c(){e=C("div"),t=C("div"),l=C("h3"),r=F(s[2]),i=V(),n=C("p"),a=F("Showing "),f=F(o),h=F(" of "),m=F(u),v=F(" rows"),d=V(),_&&_.c(),p=V(),E.c(),this.h()},l(D){e=y(D,"DIV",{class:!0});var I=P(e);t=y(I,"DIV",{class:!0});var S=P(t);l=y(S,"H3",{class:!0});var N=P(l);r=z(N,s[2]),N.forEach(g),i=M(S),n=y(S,"P",{class:!0});var A=P(n);a=z(A,"Showing "),f=z(A,o),h=z(A," of "),m=z(A,u),v=z(A," rows"),A.forEach(g),d=M(S),_&&_.l(S),S.forEach(g),p=M(I),E.l(I),I.forEach(g),this.h()},h(){b(l,"class","svelte-1o68069"),b(n,"class","svelte-1o68069"),b(t,"class","preview-header svelte-1o68069"),b(e,"class","data-preview svelte-1o68069")},m(D,I){j(D,e,I),c(e,t),c(t,l),c(l,r),c(t,i),c(t,n),c(n,a),c(n,f),c(n,h),c(n,m),c(n,v),c(t,d),_&&_.m(t,null),c(e,p),E.m(e,null),w=!0},p(D,[I]){(!w||I&4)&&Q(r,D[2]),(!w||I&64)&&o!==(o=D[6].length+"")&&Q(f,o),(!w||I&1)&&u!==(u=D[0].length+"")&&Q(m,u),D[5]?_?(_.p(D,I),I&32&&T(_,1)):(_=Wt(D),_.c(),T(_,1),_.m(t,null)):_&&(ne(),O(_,1,1,()=>{_=null}),ie()),k===(k=$(D))&&E?E.p(D,I):(E.d(1),E=k(D),E&&(E.c(),E.m(e,null)))},i(D){w||(T(_),w=!0)},o(D){O(_),w=!1},d(D){D&&g(e),_&&_.d(),E.d()}}}function Xl(s,e,t){let l,r,{data:i=[]}=e,{columns:n=[]}=e,{title:a="Data Preview"}=e,{maxRows:o=10}=e,f=!1;const h=()=>t(4,f=!f);return s.$$set=u=>{"data"in u&&t(0,i=u.data),"columns"in u&&t(1,n=u.columns),"title"in u&&t(2,a=u.title),"maxRows"in u&&t(3,o=u.maxRows)},s.$$.update=()=>{s.$$.dirty&25&&t(6,l=f?i:i.slice(0,o)),s.$$.dirty&9&&t(5,r=i.length>o)},[i,n,a,o,f,r,l,h]}class Zl extends Re{constructor(e){super(),Me(this,e,Xl,Kl,Ve,{data:0,columns:1,title:2,maxRows:3})}}function xt(s,e,t){const l=s.slice();return l[5]=e[t],l}function xl(s){let e,t,l,r="Import Failed",i;return e=new Ge({props:{size:48,class:"icon-error"}}),{c(){ee(e.$$.fragment),t=V(),l=C("h2"),l.textContent=r,this.h()},l(n){te(e.$$.fragment,n),t=M(n),l=y(n,"H2",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-rjyhcg"&&(l.textContent=r),this.h()},h(){b(l,"class","svelte-3ka85i")},m(n,a){x(e,n,a),j(n,t,a),j(n,l,a),i=!0},i(n){i||(T(e.$$.fragment,n),i=!0)},o(n){O(e.$$.fragment,n),i=!1},d(n){n&&(g(t),g(l)),Z(e,n)}}}function es(s){let e,t,l,r="Partial Import Complete",i;return e=new We({props:{size:48,class:"icon-warning"}}),{c(){ee(e.$$.fragment),t=V(),l=C("h2"),l.textContent=r,this.h()},l(n){te(e.$$.fragment,n),t=M(n),l=y(n,"H2",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-1rlykt1"&&(l.textContent=r),this.h()},h(){b(l,"class","svelte-3ka85i")},m(n,a){x(e,n,a),j(n,t,a),j(n,l,a),i=!0},i(n){i||(T(e.$$.fragment,n),i=!0)},o(n){O(e.$$.fragment,n),i=!1},d(n){n&&(g(t),g(l)),Z(e,n)}}}function ts(s){let e,t,l,r="Import Complete!",i;return e=new Ke({props:{size:48,class:"icon-success"}}),{c(){ee(e.$$.fragment),t=V(),l=C("h2"),l.textContent=r,this.h()},l(n){te(e.$$.fragment,n),t=M(n),l=y(n,"H2",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-rsxmq9"&&(l.textContent=r),this.h()},h(){b(l,"class","svelte-3ka85i")},m(n,a){x(e,n,a),j(n,t,a),j(n,l,a),i=!0},i(n){i||(T(e.$$.fragment,n),i=!0)},o(n){O(e.$$.fragment,n),i=!1},d(n){n&&(g(t),g(l)),Z(e,n)}}}function el(s){let e,t,l,r,i=s[0].errors.length+"",n,a,o,f,h,u,m,v,d,p,w,_;h=new Pl({props:{size:16}});let $=ae(s[0].errors.slice(0,10)),k=[];for(let D=0;D<$.length;D+=1)k[D]=ll(xt(s,$,D));let E=s[0].errors.length>10&&sl(s);return{c(){e=C("div"),t=C("div"),l=C("h3"),r=F("Import Errors ("),n=F(i),a=F(")"),o=V(),f=C("button"),ee(h.$$.fragment),u=F(`
					Download Error Report`),m=V(),v=C("div");for(let D=0;D<k.length;D+=1)k[D].c();d=V(),E&&E.c(),this.h()},l(D){e=y(D,"DIV",{class:!0});var I=P(e);t=y(I,"DIV",{class:!0});var S=P(t);l=y(S,"H3",{class:!0});var N=P(l);r=z(N,"Import Errors ("),n=z(N,i),a=z(N,")"),N.forEach(g),o=M(S),f=y(S,"BUTTON",{type:!0,class:!0});var A=P(f);te(h.$$.fragment,A),u=z(A,`
					Download Error Report`),A.forEach(g),S.forEach(g),m=M(I),v=y(I,"DIV",{class:!0});var L=P(v);for(let R=0;R<k.length;R+=1)k[R].l(L);d=M(L),E&&E.l(L),L.forEach(g),I.forEach(g),this.h()},h(){b(l,"class","svelte-3ka85i"),b(f,"type","button"),b(f,"class","btn-ghost svelte-3ka85i"),b(t,"class","errors-header svelte-3ka85i"),b(v,"class","error-list svelte-3ka85i"),b(e,"class","errors-section svelte-3ka85i")},m(D,I){j(D,e,I),c(e,t),c(t,l),c(l,r),c(l,n),c(l,a),c(t,o),c(t,f),x(h,f,null),c(f,u),c(e,m),c(e,v);for(let S=0;S<k.length;S+=1)k[S]&&k[S].m(v,null);c(v,d),E&&E.m(v,null),p=!0,w||(_=pe(f,"click",s[4]),w=!0)},p(D,I){if((!p||I&1)&&i!==(i=D[0].errors.length+"")&&Q(n,i),I&1){$=ae(D[0].errors.slice(0,10));let S;for(S=0;S<$.length;S+=1){const N=xt(D,$,S);k[S]?k[S].p(N,I):(k[S]=ll(N),k[S].c(),k[S].m(v,d))}for(;S<k.length;S+=1)k[S].d(1);k.length=$.length}D[0].errors.length>10?E?E.p(D,I):(E=sl(D),E.c(),E.m(v,null)):E&&(E.d(1),E=null)},i(D){p||(T(h.$$.fragment,D),p=!0)},o(D){O(h.$$.fragment,D),p=!1},d(D){D&&g(e),Z(h),ge(k,D),E&&E.d(),w=!1,_()}}}function tl(s){let e,t,l="View data",r,i,n=JSON.stringify(s[5].data,null,2)+"",a;return{c(){e=C("details"),t=C("summary"),t.textContent=l,r=V(),i=C("pre"),a=F(n),this.h()},l(o){e=y(o,"DETAILS",{class:!0});var f=P(e);t=y(f,"SUMMARY",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-1undvm7"&&(t.textContent=l),r=M(f),i=y(f,"PRE",{class:!0});var h=P(i);a=z(h,n),h.forEach(g),f.forEach(g),this.h()},h(){b(t,"class","svelte-3ka85i"),b(i,"class","svelte-3ka85i"),b(e,"class","error-data svelte-3ka85i")},m(o,f){j(o,e,f),c(e,t),c(e,r),c(e,i),c(i,a)},p(o,f){f&1&&n!==(n=JSON.stringify(o[5].data,null,2)+"")&&Q(a,n)},d(o){o&&g(e)}}}function ll(s){let e,t,l,r=s[5].row+"",i,n,a,o=s[5].message+"",f,h,u=s[5].data&&tl(s);return{c(){e=C("div"),t=C("div"),l=F("Row "),i=F(r),n=V(),a=C("div"),f=F(o),h=V(),u&&u.c(),this.h()},l(m){e=y(m,"DIV",{class:!0});var v=P(e);t=y(v,"DIV",{class:!0});var d=P(t);l=z(d,"Row "),i=z(d,r),d.forEach(g),n=M(v),a=y(v,"DIV",{class:!0});var p=P(a);f=z(p,o),p.forEach(g),h=M(v),u&&u.l(v),v.forEach(g),this.h()},h(){b(t,"class","error-row svelte-3ka85i"),b(a,"class","error-message svelte-3ka85i"),b(e,"class","error-item svelte-3ka85i")},m(m,v){j(m,e,v),c(e,t),c(t,l),c(t,i),c(e,n),c(e,a),c(a,f),c(e,h),u&&u.m(e,null)},p(m,v){v&1&&r!==(r=m[5].row+"")&&Q(i,r),v&1&&o!==(o=m[5].message+"")&&Q(f,o),m[5].data?u?u.p(m,v):(u=tl(m),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(m){m&&g(e),u&&u.d()}}}function sl(s){let e,t,l=s[0].errors.length-10+"",r,i;return{c(){e=C("div"),t=F("... and "),r=F(l),i=F(" more errors"),this.h()},l(n){e=y(n,"DIV",{class:!0});var a=P(e);t=z(a,"... and "),r=z(a,l),i=z(a," more errors"),a.forEach(g),this.h()},h(){b(e,"class","more-errors svelte-3ka85i")},m(n,a){j(n,e,a),c(e,t),c(e,r),c(e,i)},p(n,a){a&1&&l!==(l=n[0].errors.length-10+"")&&Q(r,l)},d(n){n&&g(e)}}}function rl(s){let e,t,l,r,i,n;return t=new $l({props:{size:16}}),{c(){e=C("button"),ee(t.$$.fragment),l=F(`
				Retry Failed Imports`),this.h()},l(a){e=y(a,"BUTTON",{type:!0,class:!0});var o=P(e);te(t.$$.fragment,o),l=z(o,`
				Retry Failed Imports`),o.forEach(g),this.h()},h(){b(e,"type","button"),b(e,"class","btn-secondary svelte-3ka85i")},m(a,o){j(a,e,o),x(t,e,null),c(e,l),r=!0,i||(n=pe(e,"click",function(){ml(s[1])&&s[1].apply(this,arguments)}),i=!0)},p(a,o){s=a},i(a){r||(T(t.$$.fragment,a),r=!0)},o(a){O(t.$$.fragment,a),r=!1},d(a){a&&g(e),Z(t),i=!1,n()}}}function ls(s){let e,t,l,r,i,n,a=s[0].message+"",o,f,h,u,m,v,d,p,w=s[0].imported+"",_,$,k,E="Trades Imported",D,I,S,N,A,L,R=s[0].failed+"",U,q,B,Y="Failed Imports",me,J,le,oe,_e,re,K,Te,H,W,he,se,ve,Ie="Success Rate",De,Ee,be,Ae,ke,st="New Import",we,Xe,rt;const nt=[ts,es,xl],Se=[];function it(de,fe){return de[0].success?0:de[0].imported>0?1:2}l=it(s),r=Se[l]=nt[l](s),m=new Ke({props:{size:24}}),S=new Ge({props:{size:24}});let ce=s[0].errors.length>0&&el(s),ue=s[0].failed>0&&rl(s);return{c(){e=C("div"),t=C("div"),r.c(),i=V(),n=C("p"),o=F(a),f=V(),h=C("div"),u=C("div"),ee(m.$$.fragment),v=V(),d=C("div"),p=C("span"),_=F(w),$=V(),k=C("span"),k.textContent=E,D=V(),I=C("div"),ee(S.$$.fragment),N=V(),A=C("div"),L=C("span"),U=F(R),q=V(),B=C("span"),B.textContent=Y,me=V(),J=C("div"),le=C("div"),oe=tt("svg"),_e=tt("circle"),re=tt("circle"),Te=V(),H=C("span"),W=F(s[3]),he=F("%"),se=V(),ve=C("span"),ve.textContent=Ie,De=V(),ce&&ce.c(),Ee=V(),be=C("div"),ue&&ue.c(),Ae=V(),ke=C("button"),ke.textContent=st,this.h()},l(de){e=y(de,"DIV",{class:!0});var fe=P(e);t=y(fe,"DIV",{class:!0});var ye=P(t);r.l(ye),i=M(ye),n=y(ye,"P",{class:!0});var at=P(n);o=z(at,a),at.forEach(g),ye.forEach(g),f=M(fe),h=y(fe,"DIV",{class:!0});var $e=P(h);u=y($e,"DIV",{class:!0});var ze=P(u);te(m.$$.fragment,ze),v=M(ze),d=y(ze,"DIV",{class:!0});var Fe=P(d);p=y(Fe,"SPAN",{class:!0});var ot=P(p);_=z(ot,w),ot.forEach(g),$=M(Fe),k=y(Fe,"SPAN",{class:!0,"data-svelte-h":!0}),X(k)!=="svelte-xwnhhj"&&(k.textContent=E),Fe.forEach(g),ze.forEach(g),D=M($e),I=y($e,"DIV",{class:!0});var Le=P(I);te(S.$$.fragment,Le),N=M(Le),A=y(Le,"DIV",{class:!0});var Oe=P(A);L=y(Oe,"SPAN",{class:!0});var ft=P(L);U=z(ft,R),ft.forEach(g),q=M(Oe),B=y(Oe,"SPAN",{class:!0,"data-svelte-h":!0}),X(B)!=="svelte-hg06v7"&&(B.textContent=Y),Oe.forEach(g),Le.forEach(g),me=M($e),J=y($e,"DIV",{class:!0});var Ue=P(J);le=y(Ue,"DIV",{class:!0});var je=P(le);oe=et(je,"svg",{width:!0,height:!0});var Ze=P(oe);_e=et(Ze,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),P(_e).forEach(g),re=et(Ze,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,transform:!0,class:!0}),P(re).forEach(g),Ze.forEach(g),Te=M(je),H=y(je,"SPAN",{class:!0});var xe=P(H);W=z(xe,s[3]),he=z(xe,"%"),xe.forEach(g),je.forEach(g),se=M(Ue),ve=y(Ue,"SPAN",{class:!0,"data-svelte-h":!0}),X(ve)!=="svelte-helmn3"&&(ve.textContent=Ie),Ue.forEach(g),$e.forEach(g),De=M(fe),ce&&ce.l(fe),Ee=M(fe),be=y(fe,"DIV",{class:!0});var Be=P(be);ue&&ue.l(Be),Ae=M(Be),ke=y(Be,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(ke)!=="svelte-1mxq5cv"&&(ke.textContent=st),Be.forEach(g),fe.forEach(g),this.h()},h(){b(n,"class","message svelte-3ka85i"),b(t,"class","results-header svelte-3ka85i"),b(p,"class","stat-value svelte-3ka85i"),b(k,"class","stat-label svelte-3ka85i"),b(d,"class","stat-content svelte-3ka85i"),b(u,"class","stat-card success svelte-3ka85i"),b(L,"class","stat-value svelte-3ka85i"),b(B,"class","stat-label svelte-3ka85i"),b(A,"class","stat-content svelte-3ka85i"),b(I,"class","stat-card error svelte-3ka85i"),b(_e,"cx","30"),b(_e,"cy","30"),b(_e,"r","25"),b(_e,"stroke","#e0e0e0"),b(_e,"stroke-width","5"),b(_e,"fill","none"),b(re,"cx","30"),b(re,"cy","30"),b(re,"r","25"),b(re,"stroke","#10b981"),b(re,"stroke-width","5"),b(re,"fill","none"),b(re,"stroke-dasharray",K=`${s[3]*1.57} 157`),b(re,"stroke-dashoffset","0"),b(re,"transform","rotate(-90 30 30)"),b(re,"class","progress-circle svelte-3ka85i"),b(oe,"width","60"),b(oe,"height","60"),b(H,"class","progress-text svelte-3ka85i"),b(le,"class","progress-ring svelte-3ka85i"),b(ve,"class","stat-label svelte-3ka85i"),b(J,"class","stat-card neutral svelte-3ka85i"),b(h,"class","stats-grid svelte-3ka85i"),b(ke,"type","button"),b(ke,"class","btn-primary svelte-3ka85i"),b(be,"class","actions svelte-3ka85i"),b(e,"class","import-results svelte-3ka85i")},m(de,fe){j(de,e,fe),c(e,t),Se[l].m(t,null),c(t,i),c(t,n),c(n,o),c(e,f),c(e,h),c(h,u),x(m,u,null),c(u,v),c(u,d),c(d,p),c(p,_),c(d,$),c(d,k),c(h,D),c(h,I),x(S,I,null),c(I,N),c(I,A),c(A,L),c(L,U),c(A,q),c(A,B),c(h,me),c(h,J),c(J,le),c(le,oe),c(oe,_e),c(oe,re),c(le,Te),c(le,H),c(H,W),c(H,he),c(J,se),c(J,ve),c(e,De),ce&&ce.m(e,null),c(e,Ee),c(e,be),ue&&ue.m(be,null),c(be,Ae),c(be,ke),we=!0,Xe||(rt=pe(ke,"click",function(){ml(s[2])&&s[2].apply(this,arguments)}),Xe=!0)},p(de,[fe]){s=de;let ye=l;l=it(s),l!==ye&&(ne(),O(Se[ye],1,1,()=>{Se[ye]=null}),ie(),r=Se[l],r||(r=Se[l]=nt[l](s),r.c()),T(r,1),r.m(t,i)),(!we||fe&1)&&a!==(a=s[0].message+"")&&Q(o,a),(!we||fe&1)&&w!==(w=s[0].imported+"")&&Q(_,w),(!we||fe&1)&&R!==(R=s[0].failed+"")&&Q(U,R),(!we||fe&8&&K!==(K=`${s[3]*1.57} 157`))&&b(re,"stroke-dasharray",K),(!we||fe&8)&&Q(W,s[3]),s[0].errors.length>0?ce?(ce.p(s,fe),fe&1&&T(ce,1)):(ce=el(s),ce.c(),T(ce,1),ce.m(e,Ee)):ce&&(ne(),O(ce,1,1,()=>{ce=null}),ie()),s[0].failed>0?ue?(ue.p(s,fe),fe&1&&T(ue,1)):(ue=rl(s),ue.c(),T(ue,1),ue.m(be,Ae)):ue&&(ne(),O(ue,1,1,()=>{ue=null}),ie())},i(de){we||(T(r),T(m.$$.fragment,de),T(S.$$.fragment,de),T(ce),T(ue),we=!0)},o(de){O(r),O(m.$$.fragment,de),O(S.$$.fragment,de),O(ce),O(ue),we=!1},d(de){de&&g(e),Se[l].d(),Z(m),Z(S),ce&&ce.d(),ue&&ue.d(),Xe=!1,rt()}}}function ss(s,e,t){let l,{result:r}=e,{onRetry:i=()=>{}}=e,{onNewImport:n=()=>{}}=e;function a(){const o=r.errors.map(v=>({row:v.row,message:v.message,data:JSON.stringify(v.data||{})})),f=[["Row","Error Message","Data"],...o.map(v=>[v.row,v.message,v.data])].map(v=>v.join(",")).join(`
`),h=new Blob([f],{type:"text/csv"}),u=URL.createObjectURL(h),m=document.createElement("a");m.href=u,m.download="import-errors.csv",m.click(),URL.revokeObjectURL(u)}return s.$$set=o=>{"result"in o&&t(0,r=o.result),"onRetry"in o&&t(1,i=o.onRetry),"onNewImport"in o&&t(2,n=o.onNewImport)},s.$$.update=()=>{s.$$.dirty&1&&t(3,l=r.imported>0?Math.round(r.imported/(r.imported+r.failed)*100):0)},[r,i,n,l,a]}class rs extends Re{constructor(e){super(),Me(this,e,ss,ls,Ve,{result:0,onRetry:1,onNewImport:2})}}function nl(s){let e,t,l,r=`<h3 class="svelte-16ur8w6">File Requirements</h3> <ul class="svelte-16ur8w6"><li>Supported formats: CSV (.csv), Excel (.xlsx, .xls), JSON (.json)</li> <li>Maximum file size: 10MB</li> <li>Required columns: Symbol, Side, Entry Price, Exit Price, Quantity, Entry Date, Exit Date</li> <li>Optional columns: P&amp;L, Strategy, Notes</li></ul> <h3 class="svelte-16ur8w6">Sample File Format</h3> <div class="sample-format svelte-16ur8w6"><code class="svelte-16ur8w6">Symbol,Side,Entry Price,Exit Price,Quantity,Entry Date,Exit Date<br/>
					AAPL,long,150.00,155.00,100,2024-01-01 09:30,2024-01-01 15:30<br/>
					TSLA,short,240.50,238.00,50,2024-01-02 10:00,2024-01-02 14:00</code></div>`,i;return e=new Nl({props:{accept:".csv,.xlsx,.xls,.json",maxSize:10485760}}),e.$on("upload",s[17]),{c(){ee(e.$$.fragment),t=V(),l=C("div"),l.innerHTML=r,this.h()},l(n){te(e.$$.fragment,n),t=M(n),l=y(n,"DIV",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-wco3mt"&&(l.innerHTML=r),this.h()},h(){b(l,"class","instructions svelte-16ur8w6")},m(n,a){x(e,n,a),j(n,t,a),j(n,l,a),i=!0},p:qe,i(n){i||(T(e.$$.fragment,n),i=!0)},o(n){O(e.$$.fragment,n),i=!1},d(n){n&&(g(t),g(l)),Z(e,n)}}}function il(s){var l,r,i,n;let e,t;return e=new zl({props:{stage:s[3],progress:s[4],message:s[5],fileName:((l=s[0])==null?void 0:l.name)||"",totalRows:((r=s[6])==null?void 0:r.rows)||0,errors:((i=s[7])==null?void 0:i.errors.map(cl))||[],warnings:((n=s[7])==null?void 0:n.warnings.map(ul))||[]}}),{c(){ee(e.$$.fragment)},l(a){te(e.$$.fragment,a)},m(a,o){x(e,a,o),t=!0},p(a,o){var h,u,m,v;const f={};o&8&&(f.stage=a[3]),o&16&&(f.progress=a[4]),o&32&&(f.message=a[5]),o&1&&(f.fileName=((h=a[0])==null?void 0:h.name)||""),o&64&&(f.totalRows=((u=a[6])==null?void 0:u.rows)||0),o&128&&(f.errors=((m=a[7])==null?void 0:m.errors.map(cl))||[]),o&128&&(f.warnings=((v=a[7])==null?void 0:v.warnings.map(ul))||[]),e.$set(f)},i(a){t||(T(e.$$.fragment,a),t=!0)},o(a){O(e.$$.fragment,a),t=!1},d(a){Z(e,a)}}}function al(s){let e,t,l,r,i,n,a="Cancel",o,f,h="Validate & Import",u,m,v;return e=new Bl({props:{fileColumns:s[6].columns,dataPreview:s[6].data_preview,suggestedMapping:s[1],currentMapping:s[2]}}),e.$on("change",s[18]),l=new Zl({props:{data:s[6].data_preview,columns:s[6].columns,title:"File Preview",maxRows:5}}),{c(){ee(e.$$.fragment),t=V(),ee(l.$$.fragment),r=V(),i=C("div"),n=C("button"),n.textContent=a,o=V(),f=C("button"),f.textContent=h,this.h()},l(d){te(e.$$.fragment,d),t=M(d),te(l.$$.fragment,d),r=M(d),i=y(d,"DIV",{class:!0});var p=P(i);n=y(p,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(n)!=="svelte-1dt5y2r"&&(n.textContent=a),o=M(p),f=y(p,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(f)!=="svelte-9cbq5z"&&(f.textContent=h),p.forEach(g),this.h()},h(){b(n,"type","button"),b(n,"class","btn-secondary svelte-16ur8w6"),b(f,"type","button"),b(f,"class","btn-primary svelte-16ur8w6"),b(i,"class","actions svelte-16ur8w6")},m(d,p){x(e,d,p),j(d,t,p),x(l,d,p),j(d,r,p),j(d,i,p),c(i,n),c(i,o),c(i,f),u=!0,m||(v=[pe(n,"click",s[20]),pe(f,"click",s[19])],m=!0)},p(d,p){const w={};p&64&&(w.fileColumns=d[6].columns),p&64&&(w.dataPreview=d[6].data_preview),p&2&&(w.suggestedMapping=d[1]),p&4&&(w.currentMapping=d[2]),e.$set(w);const _={};p&64&&(_.data=d[6].data_preview),p&64&&(_.columns=d[6].columns),l.$set(_)},i(d){u||(T(e.$$.fragment,d),T(l.$$.fragment,d),u=!0)},o(d){O(e.$$.fragment,d),O(l.$$.fragment,d),u=!1},d(d){d&&(g(t),g(r),g(i)),Z(e,d),Z(l,d),m=!1,hl(v)}}}function ol(s){let e,t;return e=new rs({props:{result:s[8],onRetry:s[21],onNewImport:s[20]}}),{c(){ee(e.$$.fragment)},l(l){te(e.$$.fragment,l)},m(l,r){x(e,l,r),t=!0},p(l,r){const i={};r&256&&(i.result=l[8]),e.$set(i)},i(l){t||(T(e.$$.fragment,l),t=!0)},o(l){O(e.$$.fragment,l),t=!1},d(l){Z(e,l)}}}function fl(s){let e,t,l="Error",r,i,n,a,o,f="Try Again",h,u;return{c(){e=C("div"),t=C("h3"),t.textContent=l,r=V(),i=C("p"),n=F(s[9]),a=V(),o=C("button"),o.textContent=f,this.h()},l(m){e=y(m,"DIV",{class:!0});var v=P(e);t=y(v,"H3",{class:!0,"data-svelte-h":!0}),X(t)!=="svelte-1tfa5tk"&&(t.textContent=l),r=M(v),i=y(v,"P",{class:!0});var d=P(i);n=z(d,s[9]),d.forEach(g),a=M(v),o=y(v,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),X(o)!=="svelte-cf2jgw"&&(o.textContent=f),v.forEach(g),this.h()},h(){b(t,"class","svelte-16ur8w6"),b(i,"class","svelte-16ur8w6"),b(o,"type","button"),b(o,"class","btn-primary svelte-16ur8w6"),b(e,"class","error-message svelte-16ur8w6")},m(m,v){j(m,e,v),c(e,t),c(e,r),c(e,i),c(i,n),c(e,a),c(e,o),h||(u=pe(o,"click",s[20]),h=!0)},p(m,v){v&512&&Q(n,m[9])},d(m){m&&g(e),h=!1,u()}}}function ns(s){let e,t,l,r='<div><h1 class="svelte-16ur8w6">Import Trades</h1> <p class="svelte-16ur8w6">Upload your trade history from CSV, Excel, or JSON files</p></div>',i,n,a,o,f,h,u=s[3]==="idle"&&nl(s),m=s[3]!=="idle"&&s[3]!=="complete"&&il(s),v=s[3]==="mapping"&&s[6]&&al(s),d=s[3]==="complete"&&s[8]&&ol(s),p=s[9]&&fl(s);return{c(){e=V(),t=C("div"),l=C("header"),l.innerHTML=r,i=V(),u&&u.c(),n=V(),m&&m.c(),a=V(),v&&v.c(),o=V(),d&&d.c(),f=V(),p&&p.c(),this.h()},l(w){_l("svelte-q5i65t",document.head).forEach(g),e=M(w),t=y(w,"DIV",{class:!0});var $=P(t);l=y($,"HEADER",{class:!0,"data-svelte-h":!0}),X(l)!=="svelte-syphyz"&&(l.innerHTML=r),i=M($),u&&u.l($),n=M($),m&&m.l($),a=M($),v&&v.l($),o=M($),d&&d.l($),f=M($),p&&p.l($),$.forEach(g),this.h()},h(){document.title="Import Trades - TradeSense",b(l,"class","page-header svelte-16ur8w6"),b(t,"class","upload-page svelte-16ur8w6")},m(w,_){j(w,e,_),j(w,t,_),c(t,l),c(t,i),u&&u.m(t,null),c(t,n),m&&m.m(t,null),c(t,a),v&&v.m(t,null),c(t,o),d&&d.m(t,null),c(t,f),p&&p.m(t,null),h=!0},p(w,[_]){w[3]==="idle"?u?(u.p(w,_),_&8&&T(u,1)):(u=nl(w),u.c(),T(u,1),u.m(t,n)):u&&(ne(),O(u,1,1,()=>{u=null}),ie()),w[3]!=="idle"&&w[3]!=="complete"?m?(m.p(w,_),_&8&&T(m,1)):(m=il(w),m.c(),T(m,1),m.m(t,a)):m&&(ne(),O(m,1,1,()=>{m=null}),ie()),w[3]==="mapping"&&w[6]?v?(v.p(w,_),_&72&&T(v,1)):(v=al(w),v.c(),T(v,1),v.m(t,o)):v&&(ne(),O(v,1,1,()=>{v=null}),ie()),w[3]==="complete"&&w[8]?d?(d.p(w,_),_&264&&T(d,1)):(d=ol(w),d.c(),T(d,1),d.m(t,f)):d&&(ne(),O(d,1,1,()=>{d=null}),ie()),w[9]?p?p.p(w,_):(p=fl(w),p.c(),p.m(t,null)):p&&(p.d(1),p=null)},i(w){h||(T(u),T(m),T(v),T(d),h=!0)},o(w){O(u),O(m),O(v),O(d),h=!1},d(w){w&&(g(e),g(t)),u&&u.d(),m&&m.d(),v&&v.d(),d&&d.d(),p&&p.d()}}}const cl=s=>`Row ${s.row}: ${s.message}`,ul=s=>`Row ${s.row}: ${s.message}`;function is(s,e,t){let l,r,i,n,a,o,f,h=null,u=null,m={},v={};const{stage:d,progress:p,message:w,uploadResponse:_,validationResult:$,importResult:k,error:E}=G;Pe(s,d,R=>t(3,l=R)),Pe(s,p,R=>t(4,r=R)),Pe(s,w,R=>t(5,i=R)),Pe(s,_,R=>t(6,n=R)),Pe(s,$,R=>t(7,a=R)),Pe(s,k,R=>t(8,o=R)),Pe(s,E,R=>t(9,f=R));async function D(R){const U=R.detail.files[0];if(U){t(0,h=U),G.setFile(U),G.setStage("uploading"),G.setProgress(0),G.setMessage("Uploading file...");try{const q=setInterval(()=>{G.setProgress(Y=>Math.min(Y+10,90))},200),B=await Ye.uploadFile(U);clearInterval(q),G.setProgress(100),G.setUploadResponse(B),u=B.upload_id,t(1,m=await Ye.getSuggestedMappings(B.columns)),t(2,v=m),G.setStage("mapping"),G.setMessage("Configure column mappings...")}catch(q){G.setError(q.message||"Failed to upload file")}}}async function I(R){t(2,v=R.detail.mapping)}async function S(){if(u){G.setStage("validating"),G.setProgress(0),G.setMessage("Validating data...");try{const R=await Ye.validateData(u,v);G.setValidationResult(R),G.setProgress(100),R.valid?await N():(G.setStage("mapping"),G.setMessage(`Validation failed: ${R.errors.length} errors found`))}catch(R){G.setError(R.message||"Failed to validate data")}}}async function N(){if(u){G.setStage("importing"),G.setProgress(0),G.setMessage("Importing trades...");try{const R=setInterval(()=>{G.setProgress(q=>Math.min(q+5,95))},500),U=await Ye.importTrades(u,v);clearInterval(R),G.setProgress(100),G.setImportResult(U),G.setStage("complete"),G.setMessage(U.message)}catch(R){G.setError(R.message||"Failed to import trades")}}}function A(){G.reset(),t(0,h=null),u=null,t(1,m={}),t(2,v={})}function L(){N()}return gl(()=>{bl(El)||wl("/login"),G.reset()}),[h,m,v,l,r,i,n,a,o,f,d,p,w,_,$,k,E,D,I,S,A,L]}class Ds extends Re{constructor(e){super(),Me(this,e,is,ns,Ve,{})}}export{Ds as component};
