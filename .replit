modules = ["nodejs-20", "python-3.11"]

[run]
command = "streamlit run app.py --server.port=5000 --server.address=0.0.0.0 --server.headless=true --server.enableWebsocketCompression=false"

[nix]
channel = "stable-24_05"
packages = ["cargo", "glibcLocales", "libiconv", "libxcrypt", "openssl", "pkg-config", "rustc"]

[deployment]
run = ["sh", "-c", "python3 -m streamlit run app.py --server.port=5000 --server.address=0.0.0.0 --server.headless=true --server.enableWebsocketCompression=false"]

[[ports]]
localPort = 3000
externalPort = 3000

[[ports]]
localPort = 3001
externalPort = 3001

[[ports]]
localPort = 5000
externalPort = 80

[env]
PYTHONUNBUFFERED = "1"
PYTHONPATH = "/home/runner/${REPL_SLUG}"
PIP_DISABLE_PIP_VERSION_CHECK = "1"
LC_ALL = "C"
LANG = "C"
REPLIT_KEEP_PACKAGE_DEV_DEPENDENCIES = "1"

[workflows]
runButton = "Backend API"

[[workflows.workflow]]
name = "Complete App Recovery"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üßπ Phase 1: Complete Environment Cleanup...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "rm -rf ~/.local/lib/python* ~/.cache/pip ~/.pythonlibs ~/.nix-profile/lib/python*"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üîÑ Phase 2: Force Nix Rebuild...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "nix-collect-garbage -d"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üêç Phase 3: Test Clean Python...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 --version && which python3"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üì¶ Phase 4: Install Core Dependencies...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall streamlit==1.29.0"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall pandas==2.0.3 numpy==1.24.4"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall plotly==5.17.0"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall python-dateutil==2.8.2"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall bcrypt==4.0.1"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall \"passlib[bcrypt]==4.0.1\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall cryptography==41.0.7"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall pyjwt==2.8.0"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall psutil==5.9.6"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall openpyxl==3.1.2"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall xlsxwriter==3.1.9"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir --force-reinstall setuptools==68.2.2"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üîç Phase 5: Verify Installation...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -c \"import streamlit, pandas, numpy, plotly; print('‚úÖ All core modules imported successfully')\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Phase 6: Launch TradeSense...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m streamlit run app.py --server.port=5000 --server.address=0.0.0.0 --server.headless=true --server.enableCORS=false"

[[workflows.workflow]]
name = "Robust App Recovery"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üîß Phase 1: Force Process Cleanup...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = 'pkill -f "streamlit\|python" || true'

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üßπ Phase 2: Safe Environment Cleanup...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "rm -rf ~/.cache/pip ~/.pythonlibs || true"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üîÑ Phase 3: Gentle Nix Cleanup...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "nix-store --gc --print-roots | head -10 || true"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üêç Phase 4: Verify Python...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 --version && which python3"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üì¶ Phase 5: Install Dependencies...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir streamlit==1.29.0 pandas==2.0.3 numpy==1.24.4 plotly==5.17.0"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir python-dateutil==2.8.2 bcrypt==4.0.1 cryptography==41.0.7"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ Phase 6: Test Installation...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -c \"import streamlit, pandas, numpy, plotly; print('All modules imported successfully')\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Phase 7: Launch TradeSense...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m streamlit run app.py --server.port=5000 --server.address=0.0.0.0 --server.headless=true --server.enableCORS=false"

[[workflows.workflow]]
name = "Direct Package Install"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üì¶ Installing TradeSense Dependencies...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir streamlit==1.29.0"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir pandas==2.0.3"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir numpy==1.24.4"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir plotly==5.17.0"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir python-dateutil==2.8.2"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir bcrypt==4.0.1"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir \"passlib[bcrypt]==4.0.1\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir cryptography==41.0.7"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir pyjwt==2.8.0"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --no-cache-dir psutil==5.9.6"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ Verifying installation...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -c \"import streamlit, pandas, numpy, plotly; print('‚úÖ Core modules imported successfully')\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Launching TradeSense...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m streamlit run app.py --server.port=5000 --server.address=0.0.0.0 --server.headless=true --server.enableCORS=false"

[[workflows.workflow]]
name = "Use Dependencies Tool"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üîß Using Replit's Dependencies Tool instead of pip...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ Dependencies should be managed through the Dependencies panel\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Attempting to run with existing packages...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m streamlit run app.py --server.port=5000 --server.address=0.0.0.0 --server.headless=true --server.enableCORS=false"

[[workflows.workflow]]
name = "Force User Install"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üîß Forcing user-space installation...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir streamlit==1.29.0"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir pandas==2.0.3"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir numpy==1.24.4"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir plotly==5.17.0"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir python-dateutil==2.8.2"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir bcrypt==4.0.1"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir \"passlib[bcrypt]==4.0.1\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir cryptography==41.0.7"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir pyjwt==2.8.0"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir psutil==5.9.6"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ Testing installation...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -c \"import streamlit, pandas, numpy, plotly; print('‚úÖ Modules imported successfully')\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Launching TradeSense...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m streamlit run app.py --server.port=5000 --server.address=0.0.0.0 --server.headless=true --server.enableCORS=false"

[[workflows.workflow]]
name = "Clean Install and Run"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üßπ Cleaning environment...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "rm -rf ~/.local/lib/python* ~/.cache/pip ~/.pythonlibs"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üì¶ Installing dependencies with Python 3.12...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m pip install --user --break-system-packages --no-cache-dir --force-reinstall -r requirements.txt"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ Testing imports...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -c \"import streamlit, pandas, numpy, plotly; print('‚úÖ All modules imported successfully')\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Starting TradeSense...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m streamlit run app.py --server.port=5000 --server.address=0.0.0.0 --server.headless=true --server.enableCORS=false"

[[workflows.workflow]]
name = "Quick Start"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python3 -m streamlit run app.py --server.port=5000 --server.address=0.0.0.0 --server.headless=true --server.enableWebsocketCompression=false"

[[workflows.workflow]]
name = "Full Stack Development"
author = 43683701
mode = "parallel"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd app && python main.py"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd frontend && npm install --legacy-peer-deps && npm run dev"

[[workflows.workflow]]
name = "Fix Backend Dependencies"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd backend"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python -m pip install --user --break-system-packages --no-cache-dir fastapi uvicorn python-multipart sqlalchemy psycopg2-binary python-jose[cryptography] passlib[bcrypt] python-dateutil"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python main.py"

[[workflows.workflow]]
name = "Complete to 100%"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üéØ TradeSense - Pushing to 100% Completion\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üìä Current Status: 76% ‚Üí Target: 100%\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üîß Phase 1: Fix Backend Infrastructure\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd backend"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python -m pip install --user --break-system-packages --no-cache-dir fastapi uvicorn python-multipart sqlalchemy psycopg2-binary python-jose[cryptography] passlib[bcrypt] python-dateutil pandas cachetools"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üóÑÔ∏è Phase 2: Initialize Database\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "python -c \""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "from backend.db.connection import engine, Base"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "from backend.models.trade import Trade"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "from backend.models.user import User"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "from backend.models.feature_request import FeatureRequest"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "Base.metadata.create_all(bind=engine)"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "print('‚úÖ Database initialized successfully')"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Phase 3: Test Backend\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "timeout 10s python main.py &"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "sleep 5"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "curl -s http://localhost:8000/api/health || echo \"‚ö†Ô∏è Backend needs attention\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "pkill -f \"python main.py\" || true"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üé® Phase 4: Frontend Dependencies\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd ../frontend"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "npm install --legacy-peer-deps"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ Infrastructure Ready - Backend and Frontend Prepared\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üìã Next Steps:\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  1. Polish Trader Profiles UI (15% remaining)\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  2. Complete Market Context Integration (30% remaining)\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  3. Enhance Journal Markdown Editor (25% remaining)\" "

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  4. Finalize DevOps Automation (40% remaining)\""

[[workflows.workflow]]
name = "Backend Infrastructure Fix"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üîß Phase 1: Initialize Database...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd backend && python initialize_db.py"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Phase 2: Start Backend Server...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd backend && python main.py"

[[workflows.workflow]]
name = "DevOps Complete Setup"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Setting up complete DevOps automation...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "bash scripts/automated_testing.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "bash scripts/monitoring_setup.sh"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ DevOps automation setup completed!\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üìã Available tools:\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  ‚Ä¢ Automated testing: bash scripts/automated_testing.sh\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  ‚Ä¢ Monitoring: python monitoring/real_time_monitor.py\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"  ‚Ä¢ Dashboard: streamlit run monitoring/dashboard.py --server.port=5001\""

[[workflows.workflow]]
name = "Backend API"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üöÄ Starting TradeSense Backend API...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "cd app && python main.py"

[[workflows.workflow]]
name = "Run Tests"
author = 43683701
mode = "sequential"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"üß™ Running backend tests...\""

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "pytest tests/ -v"

[[workflows.workflow.tasks]]
task = "shell.exec"
args = "echo \"‚úÖ Tests completed!\""
