import{S as je,i as Re,s as Ge,d as v,l as oe,t as R,a as j,c as be,b as K,e as o,o as ie,p as ee,f as d,I as Je,u as P,g,h as I,v as te,q as ce,w as B,D as Ne,y as A,j as b,x as de,z as U,P as Ke,B as W,A as ke,m as De,n as Ce,r as Xe,L as ve,Y as Qe,_ as We,$ as Ze,V as et}from"../chunks/BizRtQrO.js";import{e as _e}from"../chunks/BUPBrTgu.js";import"../chunks/IHki7fMi.js";import{g as tt}from"../chunks/BnGq5l0c.js";import{c as lt,d as he}from"../chunks/74j3B-n-.js";import{b as at}from"../chunks/DKytfL6r.js";import{L as st}from"../chunks/BO3MFKgn.js";import{P as rt}from"../chunks/ZBGTQ4nB.js";import{P as nt}from"../chunks/CoVB5pCq.js";import{g as ot,e as it,a as ct,n as dt,d as ut,b as Ve,m as Pe,f as pe,h as ft}from"../chunks/ebsVarF6.js";import{C as ht}from"../chunks/BzYvsMex.js";import{T as _t}from"../chunks/DpSY4HOw.js";import{G as mt}from"../chunks/C07D6dCD.js";import{L as pt}from"../chunks/QMcXD-KU.js";function vt(s,t,e){const a=ot(),l=(e==null?void 0:e.locale)??a.locale??it,c=2520,n=ct(s,t);if(isNaN(n))throw new RangeError("Invalid time value");const r=Object.assign({},e,{addSuffix:e==null?void 0:e.addSuffix,comparison:n}),[i,k]=dt(e==null?void 0:e.in,...n>0?[t,s]:[s,t]),w=ut(k,i),D=(Ve(k)-Ve(i))/1e3,f=Math.round((w-D)/60);let m;if(f<2)return f===0?l.formatDistance("lessThanXMinutes",1,r):l.formatDistance("xMinutes",f,r);if(f<45)return l.formatDistance("xMinutes",f,r);if(f<90)return l.formatDistance("aboutXHours",1,r);if(f<Pe){const p=Math.round(f/60);return l.formatDistance("aboutXHours",p,r)}else{if(f<c)return l.formatDistance("xDays",1,r);if(f<pe){const p=Math.round(f/Pe);return l.formatDistance("xDays",p,r)}else if(f<pe*2)return m=Math.round(f/pe),l.formatDistance("aboutXMonths",m,r)}if(m=ft(k,i),m<12){const p=Math.round(f/pe);return l.formatDistance("xMonths",p,r)}else{const p=m%12,u=Math.trunc(m/12);return p<3?l.formatDistance("aboutXYears",u,r):p<9?l.formatDistance("overXYears",u,r):l.formatDistance("almostXYears",u+1,r)}}function Ae(s,t){return vt(s,lt(s),t)}function Oe(s,t,e){const a=s.slice();return a[25]=t[e],a}function Se(s,t,e){const a=s.slice();return a[31]=t[e],a}function gt(s,t,e){const a=s.slice();return a[28]=t[e],a}function Le(s){let t,e;return{c(){t=b("div"),e=U(s[5]),this.h()},l(a){t=g(a,"DIV",{class:!0});var l=I(t);e=B(l,s[5]),l.forEach(v),this.h()},h(){d(t,"class","error svelte-179xg9d")},m(a,l){K(a,t,l),o(t,e)},p(a,l){l[0]&32&&W(e,a[5])},d(a){a&&v(t)}}}function ze(s){let t,e,a,l=s[9][s[4]].dashboards+"",c,n,r=s[9][s[4]].dashboards>1?"s":"",i,k,w,D,f,m,p="Upgrade to create more →";return{c(){t=b("div"),e=b("p"),a=U("You've reached the limit of "),c=U(l),n=U(" dashboard"),i=U(r),k=U(` 
        for your `),w=U(s[4]),D=U(" plan."),f=A(),m=b("a"),m.textContent=p,this.h()},l(u){t=g(u,"DIV",{class:!0});var E=I(t);e=g(E,"P",{class:!0});var $=I(e);a=B($,"You've reached the limit of "),c=B($,l),n=B($," dashboard"),i=B($,r),k=B($,` 
        for your `),w=B($,s[4]),D=B($," plan."),$.forEach(v),f=P(E),m=g(E,"A",{href:!0,class:!0,"data-svelte-h":!0}),te(m)!=="svelte-1vu6opd"&&(m.textContent=p),E.forEach(v),this.h()},h(){d(e,"class","svelte-179xg9d"),d(m,"href","/pricing"),d(m,"class","upgrade-link svelte-179xg9d"),d(t,"class","upgrade-banner svelte-179xg9d")},m(u,E){K(u,t,E),o(t,e),o(e,a),o(e,c),o(e,n),o(e,i),o(e,k),o(e,w),o(e,D),o(t,f),o(t,m)},p(u,E){E[0]&16&&l!==(l=u[9][u[4]].dashboards+"")&&W(c,l),E[0]&16&&r!==(r=u[9][u[4]].dashboards>1?"s":"")&&W(i,r),E[0]&16&&W(w,u[4])},d(u){u&&v(t)}}}function bt(s){let t,e,a=_e(s[1]),l=[];for(let n=0;n<a.length;n+=1)l[n]=Ue(Se(s,a,n));const c=n=>R(l[n],1,1,()=>{l[n]=null});return{c(){t=b("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){t=g(n,"DIV",{class:!0});var r=I(t);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(v),this.h()},h(){d(t,"class","dashboard-grid svelte-179xg9d")},m(n,r){K(n,t,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(t,null);e=!0},p(n,r){if(r[0]&6146){a=_e(n[1]);let i;for(i=0;i<a.length;i+=1){const k=Se(n,a,i);l[i]?(l[i].p(k,r),j(l[i],1)):(l[i]=Ue(k),l[i].c(),j(l[i],1),l[i].m(t,null))}for(Ce(),i=a.length;i<l.length;i+=1)c(i);be()}},i(n){if(!e){for(let r=0;r<a.length;r+=1)j(l[r]);e=!0}},o(n){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)R(l[r]);e=!1},d(n){n&&v(t),De(l,n)}}}function kt(s){let t,e,a,l,c="No dashboards yet",n,r,i="Create your first custom dashboard to visualize your trading data",k,w,D="Create Your First Dashboard",f,m,p;return e=new nt({props:{size:48}}),{c(){t=b("div"),de(e.$$.fragment),a=A(),l=b("h2"),l.textContent=c,n=A(),r=b("p"),r.textContent=i,k=A(),w=b("button"),w.textContent=D,this.h()},l(u){t=g(u,"DIV",{class:!0});var E=I(t);ce(e.$$.fragment,E),a=P(E),l=g(E,"H2",{class:!0,"data-svelte-h":!0}),te(l)!=="svelte-1lkdvu8"&&(l.textContent=c),n=P(E),r=g(E,"P",{class:!0,"data-svelte-h":!0}),te(r)!=="svelte-1yf3as1"&&(r.textContent=i),k=P(E),w=g(E,"BUTTON",{class:!0,"data-svelte-h":!0}),te(w)!=="svelte-lwp3kg"&&(w.textContent=D),E.forEach(v),this.h()},h(){d(l,"class","svelte-179xg9d"),d(r,"class","svelte-179xg9d"),d(w,"class","primary-button svelte-179xg9d"),d(t,"class","empty-state svelte-179xg9d")},m(u,E){K(u,t,E),ie(e,t,null),o(t,a),o(t,l),o(t,n),o(t,r),o(t,k),o(t,w),f=!0,m||(p=ee(w,"click",s[16]),m=!0)},p:ke,i(u){f||(j(e.$$.fragment,u),f=!0)},o(u){R(e.$$.fragment,u),f=!1},d(u){u&&v(t),oe(e),m=!1,p()}}}function Dt(s){let t,e,a=_e(Array(3)),l=[];for(let c=0;c<a.length;c+=1)l[c]=yt(gt(s,a,c));return{c(){t=b("div");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){t=g(c,"DIV",{class:!0});var n=I(t);for(let r=0;r<l.length;r+=1)l[r].l(n);n.forEach(v),this.h()},h(){d(t,"class","dashboard-grid svelte-179xg9d")},m(c,n){K(c,t,n);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(t,null);e=!0},p:ke,i(c){if(!e){for(let n=0;n<a.length;n+=1)j(l[n]);e=!0}},o(c){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)R(l[n]);e=!1},d(c){c&&v(t),De(l,c)}}}function Ct(s){let t,e;return t=new pt({props:{size:16}}),{c(){de(t.$$.fragment)},l(a){ce(t.$$.fragment,a)},m(a,l){ie(t,a,l),e=!0},i(a){e||(j(t.$$.fragment,a),e=!0)},o(a){R(t.$$.fragment,a),e=!1},d(a){oe(t,a)}}}function Et(s){let t,e;return t=new mt({props:{size:16}}),{c(){de(t.$$.fragment)},l(a){ce(t.$$.fragment,a)},m(a,l){ie(t,a,l),e=!0},i(a){e||(j(t.$$.fragment,a),e=!0)},o(a){R(t.$$.fragment,a),e=!1},d(a){oe(t,a)}}}function Be(s){let t,e=s[31].description+"",a;return{c(){t=b("p"),a=U(e),this.h()},l(l){t=g(l,"P",{class:!0});var c=I(t);a=B(c,e),c.forEach(v),this.h()},h(){d(t,"class","card-description svelte-179xg9d")},m(l,c){K(l,t,c),o(t,a)},p(l,c){c[0]&2&&e!==(e=l[31].description+"")&&W(a,e)},d(l){l&&v(t)}}}function Ue(s){let t,e,a,l=s[31].name+"",c,n,r,i,k,w,D,f,m,p=s[31].widgets.length+"",u,E,$,V,M="•",S,T,N,z=Ae(new Date(s[31].updated_at))+"",L,G,O,_,h,y,C,H,x,X,le,J,Z,ae,Q,re,Ee;const ye=[Et,Ct],ne=[];function we(q,Y){return q[31].is_public?0:1}i=we(s),k=ne[i]=ye[i](s);let F=s[31].description&&Be(s);X=new ht({props:{size:16}});function Fe(){return s[17](s[31])}Z=new _t({props:{size:16}});function qe(){return s[18](s[31])}return{c(){t=b("div"),e=b("div"),a=b("h3"),c=U(l),n=A(),r=b("div"),k.c(),w=A(),F&&F.c(),D=A(),f=b("div"),m=b("span"),u=U(p),E=U(" widgets"),$=A(),V=b("span"),V.textContent=M,S=A(),T=b("span"),N=U("Updated "),L=U(z),G=U(" ago"),O=A(),_=b("div"),h=b("a"),y=U("Open Dashboard"),H=A(),x=b("button"),de(X.$$.fragment),le=A(),J=b("button"),de(Z.$$.fragment),ae=A(),this.h()},l(q){t=g(q,"DIV",{class:!0});var Y=I(t);e=g(Y,"DIV",{class:!0});var se=I(e);a=g(se,"H3",{class:!0});var Ie=I(a);c=B(Ie,l),Ie.forEach(v),n=P(se),r=g(se,"DIV",{class:!0});var $e=I(r);k.l($e),$e.forEach(v),se.forEach(v),w=P(Y),F&&F.l(Y),D=P(Y),f=g(Y,"DIV",{class:!0});var ue=I(f);m=g(ue,"SPAN",{});var ge=I(m);u=B(ge,p),E=B(ge," widgets"),ge.forEach(v),$=P(ue),V=g(ue,"SPAN",{"data-svelte-h":!0}),te(V)!=="svelte-7hh8jk"&&(V.textContent=M),S=P(ue),T=g(ue,"SPAN",{});var me=I(T);N=B(me,"Updated "),L=B(me,z),G=B(me," ago"),me.forEach(v),ue.forEach(v),O=P(Y),_=g(Y,"DIV",{class:!0});var fe=I(_);h=g(fe,"A",{href:!0,class:!0});var Te=I(h);y=B(Te,"Open Dashboard"),Te.forEach(v),H=P(fe),x=g(fe,"BUTTON",{class:!0,title:!0});var xe=I(x);ce(X.$$.fragment,xe),xe.forEach(v),le=P(fe),J=g(fe,"BUTTON",{class:!0,title:!0});var Me=I(J);ce(Z.$$.fragment,Me),Me.forEach(v),fe.forEach(v),ae=P(Y),Y.forEach(v),this.h()},h(){d(a,"class","svelte-179xg9d"),d(r,"class","card-badges svelte-179xg9d"),d(e,"class","card-header svelte-179xg9d"),d(f,"class","card-stats svelte-179xg9d"),d(h,"href",C=`/dashboards/${s[31].id}`),d(h,"class","action-button primary svelte-179xg9d"),d(x,"class","action-button svelte-179xg9d"),d(x,"title","Clone dashboard"),d(J,"class","action-button svelte-179xg9d"),d(J,"title","Delete dashboard"),d(_,"class","card-actions svelte-179xg9d"),d(t,"class","dashboard-card svelte-179xg9d")},m(q,Y){K(q,t,Y),o(t,e),o(e,a),o(a,c),o(e,n),o(e,r),ne[i].m(r,null),o(t,w),F&&F.m(t,null),o(t,D),o(t,f),o(f,m),o(m,u),o(m,E),o(f,$),o(f,V),o(f,S),o(f,T),o(T,N),o(T,L),o(T,G),o(t,O),o(t,_),o(_,h),o(h,y),o(_,H),o(_,x),ie(X,x,null),o(_,le),o(_,J),ie(Z,J,null),o(t,ae),Q=!0,re||(Ee=[ee(x,"click",Fe),ee(J,"click",qe)],re=!0)},p(q,Y){s=q,(!Q||Y[0]&2)&&l!==(l=s[31].name+"")&&W(c,l);let se=i;i=we(s),i!==se&&(Ce(),R(ne[se],1,1,()=>{ne[se]=null}),be(),k=ne[i],k||(k=ne[i]=ye[i](s),k.c()),j(k,1),k.m(r,null)),s[31].description?F?F.p(s,Y):(F=Be(s),F.c(),F.m(t,D)):F&&(F.d(1),F=null),(!Q||Y[0]&2)&&p!==(p=s[31].widgets.length+"")&&W(u,p),(!Q||Y[0]&2)&&z!==(z=Ae(new Date(s[31].updated_at))+"")&&W(L,z),(!Q||Y[0]&2&&C!==(C=`/dashboards/${s[31].id}`))&&d(h,"href",C)},i(q){Q||(j(k),j(X.$$.fragment,q),j(Z.$$.fragment,q),Q=!0)},o(q){R(k),R(X.$$.fragment,q),R(Z.$$.fragment,q),Q=!1},d(q){q&&v(t),ne[i].d(),F&&F.d(),oe(X),oe(Z),re=!1,Xe(Ee)}}}function yt(s){let t,e;return t=new st({props:{type:"card",height:"200px"}}),{c(){de(t.$$.fragment)},l(a){ce(t.$$.fragment,a)},m(a,l){ie(t,a,l),e=!0},p:ke,i(a){e||(j(t.$$.fragment,a),e=!0)},o(a){R(t.$$.fragment,a),e=!1},d(a){oe(t,a)}}}function He(s){let t,e,a,l="Create New Dashboard",c,n,r,i,k="Dashboard Name",w,D,f,m,p,u="Choose a Template",E,$,V,M,S,T="Cancel",N,z,L=s[8]?"Creating...":"Create Dashboard",G,O,_,h=_e(s[2]),y=[];for(let C=0;C<h.length;C+=1)y[C]=Ye(Oe(s,h,C));return{c(){t=b("div"),e=b("div"),a=b("h2"),a.textContent=l,c=A(),n=b("form"),r=b("div"),i=b("label"),i.textContent=k,w=A(),D=b("input"),f=A(),m=b("div"),p=b("label"),p.textContent=u,E=A(),$=b("div");for(let C=0;C<y.length;C+=1)y[C].c();V=A(),M=b("div"),S=b("button"),S.textContent=T,N=A(),z=b("button"),G=U(L),this.h()},l(C){t=g(C,"DIV",{class:!0});var H=I(t);e=g(H,"DIV",{class:!0});var x=I(e);a=g(x,"H2",{class:!0,"data-svelte-h":!0}),te(a)!=="svelte-xmiy68"&&(a.textContent=l),c=P(x),n=g(x,"FORM",{});var X=I(n);r=g(X,"DIV",{class:!0});var le=I(r);i=g(le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),te(i)!=="svelte-1pikhbm"&&(i.textContent=k),w=P(le),D=g(le,"INPUT",{id:!0,type:!0,placeholder:!0,maxlength:!0,class:!0}),le.forEach(v),f=P(X),m=g(X,"DIV",{class:!0});var J=I(m);p=g(J,"LABEL",{class:!0,"data-svelte-h":!0}),te(p)!=="svelte-10kgdnw"&&(p.textContent=u),E=P(J),$=g(J,"DIV",{class:!0});var Z=I($);for(let re=0;re<y.length;re+=1)y[re].l(Z);Z.forEach(v),J.forEach(v),V=P(X),M=g(X,"DIV",{class:!0});var ae=I(M);S=g(ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),te(S)!=="svelte-1hlzfe5"&&(S.textContent=T),N=P(ae),z=g(ae,"BUTTON",{type:!0,class:!0});var Q=I(z);G=B(Q,L),Q.forEach(v),ae.forEach(v),X.forEach(v),x.forEach(v),H.forEach(v),this.h()},h(){d(a,"class","svelte-179xg9d"),d(i,"for","name"),d(i,"class","svelte-179xg9d"),d(D,"id","name"),d(D,"type","text"),d(D,"placeholder","My Trading Dashboard"),D.required=!0,d(D,"maxlength","100"),d(D,"class","svelte-179xg9d"),d(r,"class","form-group svelte-179xg9d"),d(p,"class","svelte-179xg9d"),d($,"class","template-grid svelte-179xg9d"),d(m,"class","form-group svelte-179xg9d"),d(S,"type","button"),d(S,"class","secondary-button svelte-179xg9d"),d(z,"type","submit"),d(z,"class","primary-button svelte-179xg9d"),z.disabled=s[8],d(M,"class","modal-actions svelte-179xg9d"),d(e,"class","modal svelte-179xg9d"),d(t,"class","modal-overlay svelte-179xg9d")},m(C,H){K(C,t,H),o(t,e),o(e,a),o(e,c),o(e,n),o(n,r),o(r,i),o(r,w),o(r,D),ve(D,s[6]),o(n,f),o(n,m),o(m,p),o(m,E),o(m,$);for(let x=0;x<y.length;x+=1)y[x]&&y[x].m($,null);o(n,V),o(n,M),o(M,S),o(M,N),o(M,z),o(z,G),O||(_=[ee(D,"input",s[19]),ee(S,"click",s[22]),ee(n,"submit",Qe(s[10])),ee(e,"click",We(s[14])),ee(t,"click",s[23])],O=!0)},p(C,H){if(H[0]&64&&D.value!==C[6]&&ve(D,C[6]),H[0]&132){h=_e(C[2]);let x;for(x=0;x<h.length;x+=1){const X=Oe(C,h,x);y[x]?y[x].p(X,H):(y[x]=Ye(X),y[x].c(),y[x].m($,null))}for(;x<y.length;x+=1)y[x].d(1);y.length=h.length}H[0]&256&&L!==(L=C[8]?"Creating...":"Create Dashboard")&&W(G,L),H[0]&256&&(z.disabled=C[8])},d(C){C&&v(t),De(y,C),O=!1,Xe(_)}}}function Ye(s){let t,e,a,l=!1,c,n,r,i=s[25].name+"",k,w,D,f=s[25].description+"",m,p,u,E,$;return u=et(s[21][0]),{c(){t=b("label"),e=b("input"),c=A(),n=b("div"),r=b("h4"),k=U(i),w=A(),D=b("p"),m=U(f),p=A(),this.h()},l(V){t=g(V,"LABEL",{class:!0});var M=I(t);e=g(M,"INPUT",{type:!0,name:!0,class:!0}),c=P(M),n=g(M,"DIV",{class:!0});var S=I(n);r=g(S,"H4",{class:!0});var T=I(r);k=B(T,i),T.forEach(v),w=P(S),D=g(S,"P",{class:!0});var N=I(D);m=B(N,f),N.forEach(v),S.forEach(v),p=P(M),M.forEach(v),this.h()},h(){d(e,"type","radio"),d(e,"name","template"),e.__value=a=s[25].id,ve(e,e.__value),d(e,"class","svelte-179xg9d"),d(r,"class","svelte-179xg9d"),d(D,"class","svelte-179xg9d"),d(n,"class","template-card svelte-179xg9d"),d(t,"class","template-option svelte-179xg9d"),u.p(e)},m(V,M){K(V,t,M),o(t,e),e.checked=e.__value===s[7],o(t,c),o(t,n),o(n,r),o(r,k),o(n,w),o(n,D),o(D,m),o(t,p),E||($=ee(e,"change",s[20]),E=!0)},p(V,M){M[0]&4&&a!==(a=V[25].id)&&(e.__value=a,ve(e,e.__value),l=!0),(l||M[0]&132)&&(e.checked=e.__value===V[7]),M[0]&4&&i!==(i=V[25].name+"")&&W(k,i),M[0]&4&&f!==(f=V[25].description+"")&&W(m,f)},d(V){V&&v(t),u.r(),E=!1,$()}}}function wt(s){let t,e,a,l,c='<h1 class="svelte-179xg9d">Custom Dashboards</h1> <p class="svelte-179xg9d">Build personalized trading dashboards with drag-and-drop widgets</p>',n,r,i,k,w,D,f=!s[13]()&&s[4]!=="enterprise",m,p,u,E,$,V,M,S;i=new rt({props:{size:20}});let T=s[5]&&Le(s),N=f&&ze(s);const z=[Dt,kt,bt],L=[];function G(_,h){return _[0]?0:_[1].length===0?1:2}p=G(s),u=L[p]=z[p](s);let O=s[3]&&He(s);return{c(){t=A(),e=b("div"),a=b("header"),l=b("div"),l.innerHTML=c,n=A(),r=b("button"),de(i.$$.fragment),k=U(`
      Create Dashboard`),w=A(),T&&T.c(),D=A(),N&&N.c(),m=A(),u.c(),E=A(),O&&O.c(),$=Ne(),this.h()},l(_){Je("svelte-fdhiyr",document.head).forEach(v),t=P(_),e=g(_,"DIV",{class:!0});var y=I(e);a=g(y,"HEADER",{class:!0});var C=I(a);l=g(C,"DIV",{"data-svelte-h":!0}),te(l)!=="svelte-18qnn81"&&(l.innerHTML=c),n=P(C),r=g(C,"BUTTON",{class:!0});var H=I(r);ce(i.$$.fragment,H),k=B(H,`
      Create Dashboard`),H.forEach(v),C.forEach(v),w=P(y),T&&T.l(y),D=P(y),N&&N.l(y),m=P(y),u.l(y),y.forEach(v),E=P(_),O&&O.l(_),$=Ne(),this.h()},h(){document.title="Dashboards - TradeSense",d(r,"class","create-button svelte-179xg9d"),r.disabled=!s[13](),d(a,"class","page-header svelte-179xg9d"),d(e,"class","container svelte-179xg9d")},m(_,h){K(_,t,h),K(_,e,h),o(e,a),o(a,l),o(a,n),o(a,r),ie(i,r,null),o(r,k),o(e,w),T&&T.m(e,null),o(e,D),N&&N.m(e,null),o(e,m),L[p].m(e,null),K(_,E,h),O&&O.m(_,h),K(_,$,h),V=!0,M||(S=ee(r,"click",s[15]),M=!0)},p(_,h){_[5]?T?T.p(_,h):(T=Le(_),T.c(),T.m(e,D)):T&&(T.d(1),T=null),h[0]&16&&(f=!_[13]()&&_[4]!=="enterprise"),f?N?N.p(_,h):(N=ze(_),N.c(),N.m(e,m)):N&&(N.d(1),N=null);let y=p;p=G(_),p===y?L[p].p(_,h):(Ce(),R(L[y],1,1,()=>{L[y]=null}),be(),u=L[p],u?u.p(_,h):(u=L[p]=z[p](_),u.c()),j(u,1),u.m(e,null)),_[3]?O?O.p(_,h):(O=He(_),O.c(),O.m($.parentNode,$)):O&&(O.d(1),O=null)},i(_){V||(j(i.$$.fragment,_),j(u),V=!0)},o(_){R(i.$$.fragment,_),R(u),V=!1},d(_){_&&(v(t),v(e),v(E),v($)),oe(i),T&&T.d(),N&&N.d(),L[p].d(),O&&O.d(_),M=!1,S()}}}function It(s,t,e){let a=!0,l=[],c=[],n=!1,r="free",i="",k="",w="custom",D=!1;const f={free:{dashboards:1,widgets:4},pro:{dashboards:5,widgets:10},enterprise:{dashboards:999,widgets:999}};async function m(){try{e(0,a=!0),e(5,i="");try{const C=await at.getSubscription();C!=null&&C.plan_id.includes("enterprise")?e(4,r="enterprise"):C!=null&&C.plan_id.includes("pro")&&e(4,r="pro")}catch{}const[h,y]=await Promise.all([he.list(),he.getTemplates()]);e(1,l=h.dashboards),e(2,c=y)}catch(h){e(5,i=h.message||"Failed to load dashboards"),console.error("Error loading dashboards:",h)}finally{e(0,a=!1)}}async function p(){if(k.trim())try{e(8,D=!0);const h=await he.create(k.trim(),w);tt(`/dashboards/${h.id}`)}catch(h){e(5,i=h.message||"Failed to create dashboard")}finally{e(8,D=!1)}}async function u(h){const y=prompt("Enter name for cloned dashboard:",`${h.name} (Copy)`);if(y)try{await he.clone(h.id,y),await m()}catch(C){e(5,i=C.message||"Failed to clone dashboard")}}async function E(h){if(confirm(`Delete dashboard "${h.name}"? This cannot be undone.`))try{await he.delete(h.id),await m()}catch(y){e(5,i=y.message||"Failed to delete dashboard")}}function $(){return l.length<f[r].dashboards}Ke(()=>{m()});const V=[[]];function M(h){Ze.call(this,s,h)}const S=()=>e(3,n=!0),T=()=>e(3,n=!0),N=h=>u(h),z=h=>E(h);function L(){k=this.value,e(6,k)}function G(){w=this.__value,e(7,w)}return[a,l,c,n,r,i,k,w,D,f,p,u,E,$,M,S,T,N,z,L,G,V,()=>e(3,n=!1),()=>e(3,n=!1)]}class Ht extends je{constructor(t){super(),Re(this,t,It,wt,Ge,{},null,[-1,-1])}}export{Ht as component};
