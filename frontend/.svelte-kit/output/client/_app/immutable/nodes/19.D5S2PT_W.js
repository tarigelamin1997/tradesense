import{S as Ge,i as Re,s as je,d as v,y as oe,t as R,a as G,I as be,f as K,h as o,z as ie,G as ee,D as d,E as Je,o as O,k as g,l as I,m as te,A as ce,p as L,M as Ne,r as P,q as b,B as de,v as U,w as Ke,e as W,n as ke,H as De,J as Ce,N as Ye,O as ve,T as Qe,X as We,Y as Ze,a4 as et}from"../chunks/Lbc7qOuA.js";import{e as _e}from"../chunks/BPb2qfkA.js";import"../chunks/IHki7fMi.js";import{g as tt}from"../chunks/C_yqYPEv.js";import{c as lt,d as he}from"../chunks/BqDDBsAC.js";import{b as at}from"../chunks/Crj0BkzR.js";import{L as st}from"../chunks/yBtR4AKW.js";import{P as rt}from"../chunks/bUqTUu5f.js";import{P as nt}from"../chunks/CF4q6GpO.js";import{g as ot,e as it,a as ct,n as dt,d as ut,b as Ve,m as Oe,f as pe,h as ft}from"../chunks/ebsVarF6.js";import{C as ht}from"../chunks/CkXdArYm.js";import{T as _t}from"../chunks/CU7Y70JQ.js";import{G as mt}from"../chunks/DTBmZ6Zn.js";import{L as pt}from"../chunks/Bq5Rfu0O.js";function vt(s,t,e){const a=ot(),l=(e==null?void 0:e.locale)??a.locale??it,c=2520,n=ct(s,t);if(isNaN(n))throw new RangeError("Invalid time value");const r=Object.assign({},e,{addSuffix:e==null?void 0:e.addSuffix,comparison:n}),[i,k]=dt(e==null?void 0:e.in,...n>0?[t,s]:[s,t]),w=ut(k,i),D=(Ve(k)-Ve(i))/1e3,f=Math.round((w-D)/60);let m;if(f<2)return f===0?l.formatDistance("lessThanXMinutes",1,r):l.formatDistance("xMinutes",f,r);if(f<45)return l.formatDistance("xMinutes",f,r);if(f<90)return l.formatDistance("aboutXHours",1,r);if(f<Oe){const p=Math.round(f/60);return l.formatDistance("aboutXHours",p,r)}else{if(f<c)return l.formatDistance("xDays",1,r);if(f<pe){const p=Math.round(f/Oe);return l.formatDistance("xDays",p,r)}else if(f<pe*2)return m=Math.round(f/pe),l.formatDistance("aboutXMonths",m,r)}if(m=ft(k,i),m<12){const p=Math.round(f/pe);return l.formatDistance("xMonths",p,r)}else{const p=m%12,u=Math.trunc(m/12);return p<3?l.formatDistance("aboutXYears",u,r):p<9?l.formatDistance("overXYears",u,r):l.formatDistance("almostXYears",u+1,r)}}function Pe(s,t){return vt(s,lt(s),t)}function Ae(s,t,e){const a=s.slice();return a[25]=t[e],a}function Se(s,t,e){const a=s.slice();return a[31]=t[e],a}function gt(s,t,e){const a=s.slice();return a[28]=t[e],a}function ze(s){let t,e;return{c(){t=b("div"),e=U(s[5]),this.h()},l(a){t=g(a,"DIV",{class:!0});var l=I(t);e=L(l,s[5]),l.forEach(v),this.h()},h(){d(t,"class","error svelte-179xg9d")},m(a,l){K(a,t,l),o(t,e)},p(a,l){l[0]&32&&W(e,a[5])},d(a){a&&v(t)}}}function Be(s){let t,e,a,l=s[9][s[4]].dashboards+"",c,n,r=s[9][s[4]].dashboards>1?"s":"",i,k,w,D,f,m,p="Upgrade to create more →";return{c(){t=b("div"),e=b("p"),a=U("You've reached the limit of "),c=U(l),n=U(" dashboard"),i=U(r),k=U(` 
        for your `),w=U(s[4]),D=U(" plan."),f=P(),m=b("a"),m.textContent=p,this.h()},l(u){t=g(u,"DIV",{class:!0});var E=I(t);e=g(E,"P",{class:!0});var T=I(e);a=L(T,"You've reached the limit of "),c=L(T,l),n=L(T," dashboard"),i=L(T,r),k=L(T,` 
        for your `),w=L(T,s[4]),D=L(T," plan."),T.forEach(v),f=O(E),m=g(E,"A",{href:!0,class:!0,"data-svelte-h":!0}),te(m)!=="svelte-1vu6opd"&&(m.textContent=p),E.forEach(v),this.h()},h(){d(e,"class","svelte-179xg9d"),d(m,"href","/pricing"),d(m,"class","upgrade-link svelte-179xg9d"),d(t,"class","upgrade-banner svelte-179xg9d")},m(u,E){K(u,t,E),o(t,e),o(e,a),o(e,c),o(e,n),o(e,i),o(e,k),o(e,w),o(e,D),o(t,f),o(t,m)},p(u,E){E[0]&16&&l!==(l=u[9][u[4]].dashboards+"")&&W(c,l),E[0]&16&&r!==(r=u[9][u[4]].dashboards>1?"s":"")&&W(i,r),E[0]&16&&W(w,u[4])},d(u){u&&v(t)}}}function bt(s){let t,e,a=_e(s[1]),l=[];for(let n=0;n<a.length;n+=1)l[n]=Ue(Se(s,a,n));const c=n=>R(l[n],1,1,()=>{l[n]=null});return{c(){t=b("div");for(let n=0;n<l.length;n+=1)l[n].c();this.h()},l(n){t=g(n,"DIV",{class:!0});var r=I(t);for(let i=0;i<l.length;i+=1)l[i].l(r);r.forEach(v),this.h()},h(){d(t,"class","dashboard-grid svelte-179xg9d")},m(n,r){K(n,t,r);for(let i=0;i<l.length;i+=1)l[i]&&l[i].m(t,null);e=!0},p(n,r){if(r[0]&6146){a=_e(n[1]);let i;for(i=0;i<a.length;i+=1){const k=Se(n,a,i);l[i]?(l[i].p(k,r),G(l[i],1)):(l[i]=Ue(k),l[i].c(),G(l[i],1),l[i].m(t,null))}for(Ce(),i=a.length;i<l.length;i+=1)c(i);be()}},i(n){if(!e){for(let r=0;r<a.length;r+=1)G(l[r]);e=!0}},o(n){l=l.filter(Boolean);for(let r=0;r<l.length;r+=1)R(l[r]);e=!1},d(n){n&&v(t),De(l,n)}}}function kt(s){let t,e,a,l,c="No dashboards yet",n,r,i="Create your first custom dashboard to visualize your trading data",k,w,D="Create Your First Dashboard",f,m,p;return e=new nt({props:{size:48}}),{c(){t=b("div"),de(e.$$.fragment),a=P(),l=b("h2"),l.textContent=c,n=P(),r=b("p"),r.textContent=i,k=P(),w=b("button"),w.textContent=D,this.h()},l(u){t=g(u,"DIV",{class:!0});var E=I(t);ce(e.$$.fragment,E),a=O(E),l=g(E,"H2",{class:!0,"data-svelte-h":!0}),te(l)!=="svelte-1lkdvu8"&&(l.textContent=c),n=O(E),r=g(E,"P",{class:!0,"data-svelte-h":!0}),te(r)!=="svelte-1yf3as1"&&(r.textContent=i),k=O(E),w=g(E,"BUTTON",{class:!0,"data-svelte-h":!0}),te(w)!=="svelte-lwp3kg"&&(w.textContent=D),E.forEach(v),this.h()},h(){d(l,"class","svelte-179xg9d"),d(r,"class","svelte-179xg9d"),d(w,"class","primary-button svelte-179xg9d"),d(t,"class","empty-state svelte-179xg9d")},m(u,E){K(u,t,E),ie(e,t,null),o(t,a),o(t,l),o(t,n),o(t,r),o(t,k),o(t,w),f=!0,m||(p=ee(w,"click",s[16]),m=!0)},p:ke,i(u){f||(G(e.$$.fragment,u),f=!0)},o(u){R(e.$$.fragment,u),f=!1},d(u){u&&v(t),oe(e),m=!1,p()}}}function Dt(s){let t,e,a=_e(Array(3)),l=[];for(let c=0;c<a.length;c+=1)l[c]=yt(gt(s,a,c));return{c(){t=b("div");for(let c=0;c<l.length;c+=1)l[c].c();this.h()},l(c){t=g(c,"DIV",{class:!0});var n=I(t);for(let r=0;r<l.length;r+=1)l[r].l(n);n.forEach(v),this.h()},h(){d(t,"class","dashboard-grid svelte-179xg9d")},m(c,n){K(c,t,n);for(let r=0;r<l.length;r+=1)l[r]&&l[r].m(t,null);e=!0},p:ke,i(c){if(!e){for(let n=0;n<a.length;n+=1)G(l[n]);e=!0}},o(c){l=l.filter(Boolean);for(let n=0;n<l.length;n+=1)R(l[n]);e=!1},d(c){c&&v(t),De(l,c)}}}function Ct(s){let t,e;return t=new pt({props:{size:16}}),{c(){de(t.$$.fragment)},l(a){ce(t.$$.fragment,a)},m(a,l){ie(t,a,l),e=!0},i(a){e||(G(t.$$.fragment,a),e=!0)},o(a){R(t.$$.fragment,a),e=!1},d(a){oe(t,a)}}}function Et(s){let t,e;return t=new mt({props:{size:16}}),{c(){de(t.$$.fragment)},l(a){ce(t.$$.fragment,a)},m(a,l){ie(t,a,l),e=!0},i(a){e||(G(t.$$.fragment,a),e=!0)},o(a){R(t.$$.fragment,a),e=!1},d(a){oe(t,a)}}}function Le(s){let t,e=s[31].description+"",a;return{c(){t=b("p"),a=U(e),this.h()},l(l){t=g(l,"P",{class:!0});var c=I(t);a=L(c,e),c.forEach(v),this.h()},h(){d(t,"class","card-description svelte-179xg9d")},m(l,c){K(l,t,c),o(t,a)},p(l,c){c[0]&2&&e!==(e=l[31].description+"")&&W(a,e)},d(l){l&&v(t)}}}function Ue(s){let t,e,a,l=s[31].name+"",c,n,r,i,k,w,D,f,m,p=s[31].widgets.length+"",u,E,T,V,x="•",S,$,N,B=Pe(new Date(s[31].updated_at))+"",z,j,A,_,h,y,C,H,M,Y,le,J,Z,ae,Q,re,Ee;const ye=[Et,Ct],ne=[];function we(q,X){return q[31].is_public?0:1}i=we(s),k=ne[i]=ye[i](s);let F=s[31].description&&Le(s);Y=new ht({props:{size:16}});function Fe(){return s[17](s[31])}Z=new _t({props:{size:16}});function qe(){return s[18](s[31])}return{c(){t=b("div"),e=b("div"),a=b("h3"),c=U(l),n=P(),r=b("div"),k.c(),w=P(),F&&F.c(),D=P(),f=b("div"),m=b("span"),u=U(p),E=U(" widgets"),T=P(),V=b("span"),V.textContent=x,S=P(),$=b("span"),N=U("Updated "),z=U(B),j=U(" ago"),A=P(),_=b("div"),h=b("a"),y=U("Open Dashboard"),H=P(),M=b("button"),de(Y.$$.fragment),le=P(),J=b("button"),de(Z.$$.fragment),ae=P(),this.h()},l(q){t=g(q,"DIV",{class:!0});var X=I(t);e=g(X,"DIV",{class:!0});var se=I(e);a=g(se,"H3",{class:!0});var Ie=I(a);c=L(Ie,l),Ie.forEach(v),n=O(se),r=g(se,"DIV",{class:!0});var Te=I(r);k.l(Te),Te.forEach(v),se.forEach(v),w=O(X),F&&F.l(X),D=O(X),f=g(X,"DIV",{class:!0});var ue=I(f);m=g(ue,"SPAN",{});var ge=I(m);u=L(ge,p),E=L(ge," widgets"),ge.forEach(v),T=O(ue),V=g(ue,"SPAN",{"data-svelte-h":!0}),te(V)!=="svelte-7hh8jk"&&(V.textContent=x),S=O(ue),$=g(ue,"SPAN",{});var me=I($);N=L(me,"Updated "),z=L(me,B),j=L(me," ago"),me.forEach(v),ue.forEach(v),A=O(X),_=g(X,"DIV",{class:!0});var fe=I(_);h=g(fe,"A",{href:!0,class:!0});var $e=I(h);y=L($e,"Open Dashboard"),$e.forEach(v),H=O(fe),M=g(fe,"BUTTON",{class:!0,title:!0});var Me=I(M);ce(Y.$$.fragment,Me),Me.forEach(v),le=O(fe),J=g(fe,"BUTTON",{class:!0,title:!0});var xe=I(J);ce(Z.$$.fragment,xe),xe.forEach(v),fe.forEach(v),ae=O(X),X.forEach(v),this.h()},h(){d(a,"class","svelte-179xg9d"),d(r,"class","card-badges svelte-179xg9d"),d(e,"class","card-header svelte-179xg9d"),d(f,"class","card-stats svelte-179xg9d"),d(h,"href",C=`/dashboards/${s[31].id}`),d(h,"class","action-button primary svelte-179xg9d"),d(M,"class","action-button svelte-179xg9d"),d(M,"title","Clone dashboard"),d(J,"class","action-button svelte-179xg9d"),d(J,"title","Delete dashboard"),d(_,"class","card-actions svelte-179xg9d"),d(t,"class","dashboard-card svelte-179xg9d")},m(q,X){K(q,t,X),o(t,e),o(e,a),o(a,c),o(e,n),o(e,r),ne[i].m(r,null),o(t,w),F&&F.m(t,null),o(t,D),o(t,f),o(f,m),o(m,u),o(m,E),o(f,T),o(f,V),o(f,S),o(f,$),o($,N),o($,z),o($,j),o(t,A),o(t,_),o(_,h),o(h,y),o(_,H),o(_,M),ie(Y,M,null),o(_,le),o(_,J),ie(Z,J,null),o(t,ae),Q=!0,re||(Ee=[ee(M,"click",Fe),ee(J,"click",qe)],re=!0)},p(q,X){s=q,(!Q||X[0]&2)&&l!==(l=s[31].name+"")&&W(c,l);let se=i;i=we(s),i!==se&&(Ce(),R(ne[se],1,1,()=>{ne[se]=null}),be(),k=ne[i],k||(k=ne[i]=ye[i](s),k.c()),G(k,1),k.m(r,null)),s[31].description?F?F.p(s,X):(F=Le(s),F.c(),F.m(t,D)):F&&(F.d(1),F=null),(!Q||X[0]&2)&&p!==(p=s[31].widgets.length+"")&&W(u,p),(!Q||X[0]&2)&&B!==(B=Pe(new Date(s[31].updated_at))+"")&&W(z,B),(!Q||X[0]&2&&C!==(C=`/dashboards/${s[31].id}`))&&d(h,"href",C)},i(q){Q||(G(k),G(Y.$$.fragment,q),G(Z.$$.fragment,q),Q=!0)},o(q){R(k),R(Y.$$.fragment,q),R(Z.$$.fragment,q),Q=!1},d(q){q&&v(t),ne[i].d(),F&&F.d(),oe(Y),oe(Z),re=!1,Ye(Ee)}}}function yt(s){let t,e;return t=new st({props:{type:"card",height:"200px"}}),{c(){de(t.$$.fragment)},l(a){ce(t.$$.fragment,a)},m(a,l){ie(t,a,l),e=!0},p:ke,i(a){e||(G(t.$$.fragment,a),e=!0)},o(a){R(t.$$.fragment,a),e=!1},d(a){oe(t,a)}}}function He(s){let t,e,a,l="Create New Dashboard",c,n,r,i,k="Dashboard Name",w,D,f,m,p,u="Choose a Template",E,T,V,x,S,$="Cancel",N,B,z=s[8]?"Creating...":"Create Dashboard",j,A,_,h=_e(s[2]),y=[];for(let C=0;C<h.length;C+=1)y[C]=Xe(Ae(s,h,C));return{c(){t=b("div"),e=b("div"),a=b("h2"),a.textContent=l,c=P(),n=b("form"),r=b("div"),i=b("label"),i.textContent=k,w=P(),D=b("input"),f=P(),m=b("div"),p=b("label"),p.textContent=u,E=P(),T=b("div");for(let C=0;C<y.length;C+=1)y[C].c();V=P(),x=b("div"),S=b("button"),S.textContent=$,N=P(),B=b("button"),j=U(z),this.h()},l(C){t=g(C,"DIV",{class:!0});var H=I(t);e=g(H,"DIV",{class:!0});var M=I(e);a=g(M,"H2",{class:!0,"data-svelte-h":!0}),te(a)!=="svelte-xmiy68"&&(a.textContent=l),c=O(M),n=g(M,"FORM",{});var Y=I(n);r=g(Y,"DIV",{class:!0});var le=I(r);i=g(le,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),te(i)!=="svelte-1pikhbm"&&(i.textContent=k),w=O(le),D=g(le,"INPUT",{id:!0,type:!0,placeholder:!0,maxlength:!0,class:!0}),le.forEach(v),f=O(Y),m=g(Y,"DIV",{class:!0});var J=I(m);p=g(J,"LABEL",{class:!0,"data-svelte-h":!0}),te(p)!=="svelte-10kgdnw"&&(p.textContent=u),E=O(J),T=g(J,"DIV",{class:!0});var Z=I(T);for(let re=0;re<y.length;re+=1)y[re].l(Z);Z.forEach(v),J.forEach(v),V=O(Y),x=g(Y,"DIV",{class:!0});var ae=I(x);S=g(ae,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),te(S)!=="svelte-1hlzfe5"&&(S.textContent=$),N=O(ae),B=g(ae,"BUTTON",{type:!0,class:!0});var Q=I(B);j=L(Q,z),Q.forEach(v),ae.forEach(v),Y.forEach(v),M.forEach(v),H.forEach(v),this.h()},h(){d(a,"class","svelte-179xg9d"),d(i,"for","name"),d(i,"class","svelte-179xg9d"),d(D,"id","name"),d(D,"type","text"),d(D,"placeholder","My Trading Dashboard"),D.required=!0,d(D,"maxlength","100"),d(D,"class","svelte-179xg9d"),d(r,"class","form-group svelte-179xg9d"),d(p,"class","svelte-179xg9d"),d(T,"class","template-grid svelte-179xg9d"),d(m,"class","form-group svelte-179xg9d"),d(S,"type","button"),d(S,"class","secondary-button svelte-179xg9d"),d(B,"type","submit"),d(B,"class","primary-button svelte-179xg9d"),B.disabled=s[8],d(x,"class","modal-actions svelte-179xg9d"),d(e,"class","modal svelte-179xg9d"),d(t,"class","modal-overlay svelte-179xg9d")},m(C,H){K(C,t,H),o(t,e),o(e,a),o(e,c),o(e,n),o(n,r),o(r,i),o(r,w),o(r,D),ve(D,s[6]),o(n,f),o(n,m),o(m,p),o(m,E),o(m,T);for(let M=0;M<y.length;M+=1)y[M]&&y[M].m(T,null);o(n,V),o(n,x),o(x,S),o(x,N),o(x,B),o(B,j),A||(_=[ee(D,"input",s[19]),ee(S,"click",s[22]),ee(n,"submit",Qe(s[10])),ee(e,"click",We(s[14])),ee(t,"click",s[23])],A=!0)},p(C,H){if(H[0]&64&&D.value!==C[6]&&ve(D,C[6]),H[0]&132){h=_e(C[2]);let M;for(M=0;M<h.length;M+=1){const Y=Ae(C,h,M);y[M]?y[M].p(Y,H):(y[M]=Xe(Y),y[M].c(),y[M].m(T,null))}for(;M<y.length;M+=1)y[M].d(1);y.length=h.length}H[0]&256&&z!==(z=C[8]?"Creating...":"Create Dashboard")&&W(j,z),H[0]&256&&(B.disabled=C[8])},d(C){C&&v(t),De(y,C),A=!1,Ye(_)}}}function Xe(s){let t,e,a,l=!1,c,n,r,i=s[25].name+"",k,w,D,f=s[25].description+"",m,p,u,E,T;return u=et(s[21][0]),{c(){t=b("label"),e=b("input"),c=P(),n=b("div"),r=b("h4"),k=U(i),w=P(),D=b("p"),m=U(f),p=P(),this.h()},l(V){t=g(V,"LABEL",{class:!0});var x=I(t);e=g(x,"INPUT",{type:!0,name:!0,class:!0}),c=O(x),n=g(x,"DIV",{class:!0});var S=I(n);r=g(S,"H4",{class:!0});var $=I(r);k=L($,i),$.forEach(v),w=O(S),D=g(S,"P",{class:!0});var N=I(D);m=L(N,f),N.forEach(v),S.forEach(v),p=O(x),x.forEach(v),this.h()},h(){d(e,"type","radio"),d(e,"name","template"),e.__value=a=s[25].id,ve(e,e.__value),d(e,"class","svelte-179xg9d"),d(r,"class","svelte-179xg9d"),d(D,"class","svelte-179xg9d"),d(n,"class","template-card svelte-179xg9d"),d(t,"class","template-option svelte-179xg9d"),u.p(e)},m(V,x){K(V,t,x),o(t,e),e.checked=e.__value===s[7],o(t,c),o(t,n),o(n,r),o(r,k),o(n,w),o(n,D),o(D,m),o(t,p),E||(T=ee(e,"change",s[20]),E=!0)},p(V,x){x[0]&4&&a!==(a=V[25].id)&&(e.__value=a,ve(e,e.__value),l=!0),(l||x[0]&132)&&(e.checked=e.__value===V[7]),x[0]&4&&i!==(i=V[25].name+"")&&W(k,i),x[0]&4&&f!==(f=V[25].description+"")&&W(m,f)},d(V){V&&v(t),u.r(),E=!1,T()}}}function wt(s){let t,e,a,l,c='<h1 class="svelte-179xg9d">Custom Dashboards</h1> <p class="svelte-179xg9d">Build personalized trading dashboards with drag-and-drop widgets</p>',n,r,i,k,w,D,f=!s[13]()&&s[4]!=="enterprise",m,p,u,E,T,V,x,S;i=new rt({props:{size:20}});let $=s[5]&&ze(s),N=f&&Be(s);const B=[Dt,kt,bt],z=[];function j(_,h){return _[0]?0:_[1].length===0?1:2}p=j(s),u=z[p]=B[p](s);let A=s[3]&&He(s);return{c(){t=P(),e=b("div"),a=b("header"),l=b("div"),l.innerHTML=c,n=P(),r=b("button"),de(i.$$.fragment),k=U(`
      Create Dashboard`),w=P(),$&&$.c(),D=P(),N&&N.c(),m=P(),u.c(),E=P(),A&&A.c(),T=Ne(),this.h()},l(_){Je("svelte-fdhiyr",document.head).forEach(v),t=O(_),e=g(_,"DIV",{class:!0});var y=I(e);a=g(y,"HEADER",{class:!0});var C=I(a);l=g(C,"DIV",{"data-svelte-h":!0}),te(l)!=="svelte-18qnn81"&&(l.innerHTML=c),n=O(C),r=g(C,"BUTTON",{class:!0});var H=I(r);ce(i.$$.fragment,H),k=L(H,`
      Create Dashboard`),H.forEach(v),C.forEach(v),w=O(y),$&&$.l(y),D=O(y),N&&N.l(y),m=O(y),u.l(y),y.forEach(v),E=O(_),A&&A.l(_),T=Ne(),this.h()},h(){document.title="Dashboards - TradeSense",d(r,"class","create-button svelte-179xg9d"),r.disabled=!s[13](),d(a,"class","page-header svelte-179xg9d"),d(e,"class","container svelte-179xg9d")},m(_,h){K(_,t,h),K(_,e,h),o(e,a),o(a,l),o(a,n),o(a,r),ie(i,r,null),o(r,k),o(e,w),$&&$.m(e,null),o(e,D),N&&N.m(e,null),o(e,m),z[p].m(e,null),K(_,E,h),A&&A.m(_,h),K(_,T,h),V=!0,x||(S=ee(r,"click",s[15]),x=!0)},p(_,h){_[5]?$?$.p(_,h):($=ze(_),$.c(),$.m(e,D)):$&&($.d(1),$=null),h[0]&16&&(f=!_[13]()&&_[4]!=="enterprise"),f?N?N.p(_,h):(N=Be(_),N.c(),N.m(e,m)):N&&(N.d(1),N=null);let y=p;p=j(_),p===y?z[p].p(_,h):(Ce(),R(z[y],1,1,()=>{z[y]=null}),be(),u=z[p],u?u.p(_,h):(u=z[p]=B[p](_),u.c()),G(u,1),u.m(e,null)),_[3]?A?A.p(_,h):(A=He(_),A.c(),A.m(T.parentNode,T)):A&&(A.d(1),A=null)},i(_){V||(G(i.$$.fragment,_),G(u),V=!0)},o(_){R(i.$$.fragment,_),R(u),V=!1},d(_){_&&(v(t),v(e),v(E),v(T)),oe(i),$&&$.d(),N&&N.d(),z[p].d(),A&&A.d(_),x=!1,S()}}}function It(s,t,e){let a=!0,l=[],c=[],n=!1,r="free",i="",k="",w="custom",D=!1;const f={free:{dashboards:1,widgets:4},pro:{dashboards:5,widgets:10},enterprise:{dashboards:999,widgets:999}};async function m(){try{e(0,a=!0),e(5,i="");try{const C=await at.getSubscription();C!=null&&C.plan_id.includes("enterprise")?e(4,r="enterprise"):C!=null&&C.plan_id.includes("pro")&&e(4,r="pro")}catch{}const[h,y]=await Promise.all([he.list(),he.getTemplates()]);e(1,l=h.dashboards),e(2,c=y)}catch(h){e(5,i=h.message||"Failed to load dashboards"),console.error("Error loading dashboards:",h)}finally{e(0,a=!1)}}async function p(){if(k.trim())try{e(8,D=!0);const h=await he.create(k.trim(),w);tt(`/dashboards/${h.id}`)}catch(h){e(5,i=h.message||"Failed to create dashboard")}finally{e(8,D=!1)}}async function u(h){const y=prompt("Enter name for cloned dashboard:",`${h.name} (Copy)`);if(y)try{await he.clone(h.id,y),await m()}catch(C){e(5,i=C.message||"Failed to clone dashboard")}}async function E(h){if(confirm(`Delete dashboard "${h.name}"? This cannot be undone.`))try{await he.delete(h.id),await m()}catch(y){e(5,i=y.message||"Failed to delete dashboard")}}function T(){return l.length<f[r].dashboards}Ke(()=>{m()});const V=[[]];function x(h){Ze.call(this,s,h)}const S=()=>e(3,n=!0),$=()=>e(3,n=!0),N=h=>u(h),B=h=>E(h);function z(){k=this.value,e(6,k)}function j(){w=this.__value,e(7,w)}return[a,l,c,n,r,i,k,w,D,f,p,u,E,T,x,S,$,N,B,z,j,V,()=>e(3,n=!1),()=>e(3,n=!1)]}class Ht extends Ge{constructor(t){super(),Re(this,t,It,wt,je,{},null,[-1,-1])}}export{Ht as component};
