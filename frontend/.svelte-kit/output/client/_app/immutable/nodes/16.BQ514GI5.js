import{S as dt,i as _t,s as vt,d as f,t as J,a as B,I as ze,f as U,h as l,D as v,E as pt,o as E,k as c,l as b,m as Y,r as D,q as d,w as ht,n as _e,y as Se,e as K,z as Ae,A as Ne,p as y,B as je,v as S,J as Fe,M as st,K as mt,Z as ve,N as gt,G as Qe,j as ye}from"../chunks/Lbc7qOuA.js";import"../chunks/IHki7fMi.js";import{b as at}from"../chunks/Bt-Xh7oU.js";import{g as bt}from"../chunks/D-G9JMcs.js";import{b as Be}from"../chunks/BSJOQjbZ.js";import{i as kt}from"../chunks/D2gfHBTb.js";import{C as ct}from"../chunks/B5zPiAHL.js";import{C as qt}from"../chunks/DSnWZT4c.js";import{T as Ct}from"../chunks/BXNpXYMZ.js";import{E as Et}from"../chunks/CQ6ZQGQE.js";import{C as Dt}from"../chunks/C0zI6MH4.js";function wt(r){const e=r.slice(),t=jt(e[2].plan_id);e[9]=t;const s=e[4][e[9]]||e[4].free;return e[10]=s,e}function $t(r){let e,t,s="Current Plan",n,o,a,u,p,g,i=!r[2]||r[2].plan_id.includes("free"),h,_;const C=[yt,Pt],w=[];function H(m,k){return m[2]?0:1}function Z(m,k){return k===0?wt(m):m}a=H(r),u=w[a]=C[a](Z(r,a));let A=r[3]&&nt(r),$=i&&ft();return{c(){e=d("div"),t=d("h2"),t.textContent=s,n=D(),o=d("div"),u.c(),p=D(),A&&A.c(),g=D(),$&&$.c(),h=st(),this.h()},l(m){e=c(m,"DIV",{class:!0});var k=b(e);t=c(k,"H2",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-u440f6"&&(t.textContent=s),n=E(k),o=c(k,"DIV",{class:!0});var I=b(o);u.l(I),I.forEach(f),k.forEach(f),p=E(m),A&&A.l(m),g=E(m),$&&$.l(m),h=st(),this.h()},h(){v(t,"class","svelte-rd5lqf"),v(o,"class","plan-card card svelte-rd5lqf"),v(e,"class","billing-section svelte-rd5lqf")},m(m,k){U(m,e,k),l(e,t),l(e,n),l(e,o),w[a].m(o,null),U(m,p,k),A&&A.m(m,k),U(m,g,k),$&&$.m(m,k),U(m,h,k),_=!0},p(m,k){let I=a;a=H(m),a===I?w[a].p(Z(m,a),k):(Fe(),J(w[I],1,1,()=>{w[I]=null}),ze(),u=w[a],u?u.p(Z(m,a),k):(u=w[a]=C[a](Z(m,a)),u.c()),B(u,1),u.m(o,null)),m[3]?A?A.p(m,k):(A=nt(m),A.c(),A.m(g.parentNode,g)):A&&(A.d(1),A=null),k&4&&(i=!m[2]||m[2].plan_id.includes("free")),i?$?k&4&&B($,1):($=ft(),$.c(),B($,1),$.m(h.parentNode,h)):$&&(Fe(),J($,1,1,()=>{$=null}),ze())},i(m){_||(B(u),B($),_=!0)},o(m){J(u),J($),_=!1},d(m){m&&(f(e),f(p),f(g),f(h)),w[a].d(),A&&A.d(m),$&&$.d(m)}}}function Vt(r){let e,t,s,n,o;return t=new ct({props:{size:20}}),{c(){e=d("div"),je(t.$$.fragment),s=D(),n=S(r[1]),this.h()},l(a){e=c(a,"DIV",{class:!0});var u=b(e);Ne(t.$$.fragment,u),s=E(u),n=y(u,r[1]),u.forEach(f),this.h()},h(){v(e,"class","error-message svelte-rd5lqf")},m(a,u){U(a,e,u),Ae(t,e,null),l(e,s),l(e,n),o=!0},p(a,u){(!o||u&2)&&K(n,a[1])},i(a){o||(B(t.$$.fragment,a),o=!0)},o(a){J(t.$$.fragment,a),o=!1},d(a){a&&f(e),Se(t)}}}function It(r){let e,t="Loading billing information...";return{c(){e=d("div"),e.textContent=t,this.h()},l(s){e=c(s,"DIV",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-7dc546"&&(e.textContent=t),this.h()},h(){v(e,"class","loading svelte-rd5lqf")},m(s,n){U(s,e,n)},p:_e,i:_e,o:_e,d(s){s&&f(e)}}}function Pt(r){let e,t,s='<h3 class="svelte-rd5lqf">Free Plan</h3> <p class="plan-price svelte-rd5lqf">$0/month</p> <p class="plan-description svelte-rd5lqf">Limited features with usage caps</p>',n,o,a,u,p,g;return u=new Ct({props:{size:18}}),{c(){e=d("div"),t=d("div"),t.innerHTML=s,n=D(),o=d("div"),a=d("a"),je(u.$$.fragment),p=S(`
								Upgrade Plan`),this.h()},l(i){e=c(i,"DIV",{class:!0});var h=b(e);t=c(h,"DIV",{"data-svelte-h":!0}),Y(t)!=="svelte-jk8kry"&&(t.innerHTML=s),n=E(h),o=c(h,"DIV",{class:!0});var _=b(o);a=c(_,"A",{href:!0,class:!0});var C=b(a);Ne(u.$$.fragment,C),p=y(C,`
								Upgrade Plan`),C.forEach(f),_.forEach(f),h.forEach(f),this.h()},h(){v(a,"href","/pricing"),v(a,"class","upgrade-button svelte-rd5lqf"),v(o,"class","plan-actions svelte-rd5lqf"),v(e,"class","plan-info svelte-rd5lqf")},m(i,h){U(i,e,h),l(e,t),l(e,n),l(e,o),l(o,a),Ae(u,a,null),l(a,p),g=!0},p:_e,i(i){g||(B(u.$$.fragment,i),g=!0)},o(i){J(u.$$.fragment,i),g=!1},d(i){i&&f(e),Se(u)}}}function yt(r){let e,t,s,n=r[10].name+"",o,a,u,p,g,i=r[10].price+"",h,_,C,w,H,Z=r[2].status+"",A,$,m,k,I,oe,j,F,le,pe,M,se,te=ae(r[2].current_period_start)+"",re,he,Q=ae(r[2].current_period_end)+"",me,ge,z;const ue=[At,St],W=[];function qe(q,V){return q[2].status==="active"?0:q[2].status==="canceled"?1:-1}~(k=qe(r))&&(I=W[k]=ue[k](r)),le=new qt({props:{size:16}});let N=r[2].status==="canceled"&&rt(r);return{c(){e=d("div"),t=d("div"),s=d("h3"),o=S(n),a=S(" Plan"),u=D(),p=d("p"),g=S("$"),h=S(i),_=S("/month"),C=D(),w=d("div"),H=d("span"),A=S(Z),$=D(),m=d("div"),I&&I.c(),oe=D(),j=d("div"),F=d("div"),je(le.$$.fragment),pe=D(),M=d("span"),se=S("Current period: "),re=S(te),he=S(" - "),me=S(Q),ge=D(),N&&N.c(),this.h()},l(q){e=c(q,"DIV",{class:!0});var V=b(e);t=c(V,"DIV",{});var X=b(t);s=c(X,"H3",{class:!0});var be=b(s);o=y(be,n),a=y(be," Plan"),be.forEach(f),u=E(X),p=c(X,"P",{class:!0});var G=b(p);g=y(G,"$"),h=y(G,i),_=y(G,"/month"),G.forEach(f),C=E(X),w=c(X,"DIV",{class:!0});var ne=b(w);H=c(ne,"SPAN",{class:!0});var fe=b(H);A=y(fe,Z),fe.forEach(f),ne.forEach(f),X.forEach(f),$=E(V),m=c(V,"DIV",{class:!0});var ke=b(m);I&&I.l(ke),ke.forEach(f),V.forEach(f),oe=E(q),j=c(q,"DIV",{class:!0});var ce=b(j);F=c(ce,"DIV",{class:!0});var x=b(F);Ne(le.$$.fragment,x),pe=E(x),M=c(x,"SPAN",{});var de=b(M);se=y(de,"Current period: "),re=y(de,te),he=y(de," - "),me=y(de,Q),de.forEach(f),x.forEach(f),ge=E(ce),N&&N.l(ce),ce.forEach(f),this.h()},h(){v(s,"class","svelte-rd5lqf"),v(p,"class","plan-price svelte-rd5lqf"),v(H,"class","status-badge svelte-rd5lqf"),ve(H,"active",r[2].status==="active"),v(w,"class","plan-status svelte-rd5lqf"),v(m,"class","plan-actions svelte-rd5lqf"),v(e,"class","plan-info svelte-rd5lqf"),v(F,"class","date-item svelte-rd5lqf"),v(j,"class","billing-dates svelte-rd5lqf")},m(q,V){U(q,e,V),l(e,t),l(t,s),l(s,o),l(s,a),l(t,u),l(t,p),l(p,g),l(p,h),l(p,_),l(t,C),l(t,w),l(w,H),l(H,A),l(e,$),l(e,m),~k&&W[k].m(m,null),U(q,oe,V),U(q,j,V),l(j,F),Ae(le,F,null),l(F,pe),l(F,M),l(M,se),l(M,re),l(M,he),l(M,me),l(j,ge),N&&N.m(j,null),z=!0},p(q,V){(!z||V&4)&&n!==(n=q[10].name+"")&&K(o,n),(!z||V&4)&&i!==(i=q[10].price+"")&&K(h,i),(!z||V&4)&&Z!==(Z=q[2].status+"")&&K(A,Z),(!z||V&4)&&ve(H,"active",q[2].status==="active");let X=k;k=qe(q),k===X?~k&&W[k].p(q,V):(I&&(Fe(),J(W[X],1,1,()=>{W[X]=null}),ze()),~k?(I=W[k],I?I.p(q,V):(I=W[k]=ue[k](q),I.c()),B(I,1),I.m(m,null)):I=null),(!z||V&4)&&te!==(te=ae(q[2].current_period_start)+"")&&K(re,te),(!z||V&4)&&Q!==(Q=ae(q[2].current_period_end)+"")&&K(me,Q),q[2].status==="canceled"?N?(N.p(q,V),V&4&&B(N,1)):(N=rt(q),N.c(),B(N,1),N.m(j,null)):N&&(Fe(),J(N,1,1,()=>{N=null}),ze())},i(q){z||(B(I),B(le.$$.fragment,q),B(N),z=!0)},o(q){J(I),J(le.$$.fragment,q),J(N),z=!1},d(q){q&&(f(e),f(oe),f(j)),~k&&W[k].d(),Se(le),N&&N.d()}}}function St(r){let e,t="Resume Subscription",s,n;return{c(){e=d("button"),e.textContent=t,this.h()},l(o){e=c(o,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(e)!=="svelte-13zgitu"&&(e.textContent=t),this.h()},h(){v(e,"class","resume-button svelte-rd5lqf")},m(o,a){U(o,e,a),s||(n=Qe(e,"click",r[7]),s=!0)},p:_e,i:_e,o:_e,d(o){o&&f(e),s=!1,n()}}}function At(r){let e,t,s,n,o,a="Cancel Subscription",u,p,g;return t=new Dt({props:{size:18}}),{c(){e=d("button"),je(t.$$.fragment),s=S(`
									Manage Billing`),n=D(),o=d("button"),o.textContent=a,this.h()},l(i){e=c(i,"BUTTON",{class:!0});var h=b(e);Ne(t.$$.fragment,h),s=y(h,`
									Manage Billing`),h.forEach(f),n=E(i),o=c(i,"BUTTON",{class:!0,"data-svelte-h":!0}),Y(o)!=="svelte-1xv4rnx"&&(o.textContent=a),this.h()},h(){v(e,"class","manage-button svelte-rd5lqf"),v(o,"class","cancel-button svelte-rd5lqf")},m(i,h){U(i,e,h),Ae(t,e,null),l(e,s),U(i,n,h),U(i,o,h),u=!0,p||(g=[Qe(e,"click",r[5]),Qe(o,"click",r[6])],p=!0)},p:_e,i(i){u||(B(t.$$.fragment,i),u=!0)},o(i){J(t.$$.fragment,i),u=!1},d(i){i&&(f(e),f(n),f(o)),Se(t),p=!1,gt(g)}}}function rt(r){let e,t,s,n,o,a=ae(r[2].current_period_end)+"",u,p;return t=new ct({props:{size:16}}),{c(){e=d("div"),je(t.$$.fragment),s=D(),n=d("span"),o=S("Access ends on "),u=S(a),this.h()},l(g){e=c(g,"DIV",{class:!0});var i=b(e);Ne(t.$$.fragment,i),s=E(i),n=c(i,"SPAN",{});var h=b(n);o=y(h,"Access ends on "),u=y(h,a),h.forEach(f),i.forEach(f),this.h()},h(){v(e,"class","date-item warning svelte-rd5lqf")},m(g,i){U(g,e,i),Ae(t,e,null),l(e,s),l(e,n),l(n,o),l(n,u),p=!0},p(g,i){(!p||i&4)&&a!==(a=ae(g[2].current_period_end)+"")&&K(u,a)},i(g){p||(B(t.$$.fragment,g),p=!0)},o(g){J(t.$$.fragment,g),p=!1},d(g){g&&f(e),Se(t)}}}function nt(r){let e,t,s="Usage This Period",n,o,a,u,p="Trades",g,i,h,_=r[3].trades_count+"",C,w,H,Z="/",A,$,m=(r[3].trades_limit===-1?"Unlimited":r[3].trades_limit)+"",k,I,oe,j,F,le="Journal Entries",pe,M,se,te=r[3].journal_entries_count+"",re,he,Q,me="/",ge,z,ue=(r[3].journal_entries_limit===-1?"Unlimited":r[3].journal_entries_limit)+"",W,qe,N,q,V,X="Playbooks",be,G,ne,fe=r[3].playbooks_count+"",ke,ce,x,de="/",Je,Ce,Ue=(r[3].playbooks_limit===-1?"Unlimited":r[3].playbooks_limit)+"",Le,Ge,Ke,ie,Ye,Te=ae(r[3].period_start)+"",Oe,Ze,He=ae(r[3].period_end)+"",Re,L=r[3].trades_limit!==-1&&it(r),O=r[3].journal_entries_limit!==-1&&ot(r),R=r[3].playbooks_limit!==-1&&ut(r);return{c(){e=d("div"),t=d("h2"),t.textContent=s,n=D(),o=d("div"),a=d("div"),u=d("h3"),u.textContent=p,g=D(),i=d("div"),h=d("span"),C=S(_),w=D(),H=d("span"),H.textContent=Z,A=D(),$=d("span"),k=S(m),I=D(),L&&L.c(),oe=D(),j=d("div"),F=d("h3"),F.textContent=le,pe=D(),M=d("div"),se=d("span"),re=S(te),he=D(),Q=d("span"),Q.textContent=me,ge=D(),z=d("span"),W=S(ue),qe=D(),O&&O.c(),N=D(),q=d("div"),V=d("h3"),V.textContent=X,be=D(),G=d("div"),ne=d("span"),ke=S(fe),ce=D(),x=d("span"),x.textContent=de,Je=D(),Ce=d("span"),Le=S(Ue),Ge=D(),R&&R.c(),Ke=D(),ie=d("div"),Ye=S("Usage period: "),Oe=S(Te),Ze=S(" - "),Re=S(He),this.h()},l(P){e=c(P,"DIV",{class:!0});var T=b(e);t=c(T,"H2",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-1032m08"&&(t.textContent=s),n=E(T),o=c(T,"DIV",{class:!0});var Ee=b(o);a=c(Ee,"DIV",{class:!0});var De=b(a);u=c(De,"H3",{class:!0,"data-svelte-h":!0}),Y(u)!=="svelte-agkse7"&&(u.textContent=p),g=E(De),i=c(De,"DIV",{class:!0});var we=b(i);h=c(we,"SPAN",{class:!0});var We=b(h);C=y(We,_),We.forEach(f),w=E(we),H=c(we,"SPAN",{class:!0,"data-svelte-h":!0}),Y(H)!=="svelte-1nor02f"&&(H.textContent=Z),A=E(we),$=c(we,"SPAN",{class:!0});var Xe=b($);k=y(Xe,m),Xe.forEach(f),we.forEach(f),I=E(De),L&&L.l(De),De.forEach(f),oe=E(Ee),j=c(Ee,"DIV",{class:!0});var $e=b(j);F=c($e,"H3",{class:!0,"data-svelte-h":!0}),Y(F)!=="svelte-fp3em7"&&(F.textContent=le),pe=E($e),M=c($e,"DIV",{class:!0});var Ve=b(M);se=c(Ve,"SPAN",{class:!0});var xe=b(se);re=y(xe,te),xe.forEach(f),he=E(Ve),Q=c(Ve,"SPAN",{class:!0,"data-svelte-h":!0}),Y(Q)!=="svelte-1nor02f"&&(Q.textContent=me),ge=E(Ve),z=c(Ve,"SPAN",{class:!0});var et=b(z);W=y(et,ue),et.forEach(f),Ve.forEach(f),qe=E($e),O&&O.l($e),$e.forEach(f),N=E(Ee),q=c(Ee,"DIV",{class:!0});var Ie=b(q);V=c(Ie,"H3",{class:!0,"data-svelte-h":!0}),Y(V)!=="svelte-1u2mly2"&&(V.textContent=X),be=E(Ie),G=c(Ie,"DIV",{class:!0});var Pe=b(G);ne=c(Pe,"SPAN",{class:!0});var tt=b(ne);ke=y(tt,fe),tt.forEach(f),ce=E(Pe),x=c(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),Y(x)!=="svelte-1nor02f"&&(x.textContent=de),Je=E(Pe),Ce=c(Pe,"SPAN",{class:!0});var lt=b(Ce);Le=y(lt,Ue),lt.forEach(f),Pe.forEach(f),Ge=E(Ie),R&&R.l(Ie),Ie.forEach(f),Ee.forEach(f),Ke=E(T),ie=c(T,"DIV",{class:!0});var Me=b(ie);Ye=y(Me,"Usage period: "),Oe=y(Me,Te),Ze=y(Me," - "),Re=y(Me,He),Me.forEach(f),T.forEach(f),this.h()},h(){v(t,"class","svelte-rd5lqf"),v(u,"class","svelte-rd5lqf"),v(h,"class","usage-current svelte-rd5lqf"),v(H,"class","usage-separator svelte-rd5lqf"),v($,"class","usage-limit svelte-rd5lqf"),v(i,"class","usage-stats svelte-rd5lqf"),v(a,"class","usage-card card svelte-rd5lqf"),v(F,"class","svelte-rd5lqf"),v(se,"class","usage-current svelte-rd5lqf"),v(Q,"class","usage-separator svelte-rd5lqf"),v(z,"class","usage-limit svelte-rd5lqf"),v(M,"class","usage-stats svelte-rd5lqf"),v(j,"class","usage-card card svelte-rd5lqf"),v(V,"class","svelte-rd5lqf"),v(ne,"class","usage-current svelte-rd5lqf"),v(x,"class","usage-separator svelte-rd5lqf"),v(Ce,"class","usage-limit svelte-rd5lqf"),v(G,"class","usage-stats svelte-rd5lqf"),v(q,"class","usage-card card svelte-rd5lqf"),v(o,"class","usage-grid svelte-rd5lqf"),v(ie,"class","usage-period svelte-rd5lqf"),v(e,"class","billing-section svelte-rd5lqf")},m(P,T){U(P,e,T),l(e,t),l(e,n),l(e,o),l(o,a),l(a,u),l(a,g),l(a,i),l(i,h),l(h,C),l(i,w),l(i,H),l(i,A),l(i,$),l($,k),l(a,I),L&&L.m(a,null),l(o,oe),l(o,j),l(j,F),l(j,pe),l(j,M),l(M,se),l(se,re),l(M,he),l(M,Q),l(M,ge),l(M,z),l(z,W),l(j,qe),O&&O.m(j,null),l(o,N),l(o,q),l(q,V),l(q,be),l(q,G),l(G,ne),l(ne,ke),l(G,ce),l(G,x),l(G,Je),l(G,Ce),l(Ce,Le),l(q,Ge),R&&R.m(q,null),l(e,Ke),l(e,ie),l(ie,Ye),l(ie,Oe),l(ie,Ze),l(ie,Re)},p(P,T){T&8&&_!==(_=P[3].trades_count+"")&&K(C,_),T&8&&m!==(m=(P[3].trades_limit===-1?"Unlimited":P[3].trades_limit)+"")&&K(k,m),P[3].trades_limit!==-1?L?L.p(P,T):(L=it(P),L.c(),L.m(a,null)):L&&(L.d(1),L=null),T&8&&te!==(te=P[3].journal_entries_count+"")&&K(re,te),T&8&&ue!==(ue=(P[3].journal_entries_limit===-1?"Unlimited":P[3].journal_entries_limit)+"")&&K(W,ue),P[3].journal_entries_limit!==-1?O?O.p(P,T):(O=ot(P),O.c(),O.m(j,null)):O&&(O.d(1),O=null),T&8&&fe!==(fe=P[3].playbooks_count+"")&&K(ke,fe),T&8&&Ue!==(Ue=(P[3].playbooks_limit===-1?"Unlimited":P[3].playbooks_limit)+"")&&K(Le,Ue),P[3].playbooks_limit!==-1?R?R.p(P,T):(R=ut(P),R.c(),R.m(q,null)):R&&(R.d(1),R=null),T&8&&Te!==(Te=ae(P[3].period_start)+"")&&K(Oe,Te),T&8&&He!==(He=ae(P[3].period_end)+"")&&K(Re,He)},d(P){P&&f(e),L&&L.d(),O&&O.d(),R&&R.d()}}}function it(r){let e,t;return{c(){e=d("div"),t=d("div"),this.h()},l(s){e=c(s,"DIV",{class:!0});var n=b(e);t=c(n,"DIV",{class:!0,style:!0}),b(t).forEach(f),n.forEach(f),this.h()},h(){v(t,"class","usage-bar-fill svelte-rd5lqf"),ye(t,"width",ee(r[3].trades_count,r[3].trades_limit)+"%"),ve(t,"warning",ee(r[3].trades_count,r[3].trades_limit)>80),v(e,"class","usage-bar svelte-rd5lqf")},m(s,n){U(s,e,n),l(e,t)},p(s,n){n&8&&ye(t,"width",ee(s[3].trades_count,s[3].trades_limit)+"%"),n&8&&ve(t,"warning",ee(s[3].trades_count,s[3].trades_limit)>80)},d(s){s&&f(e)}}}function ot(r){let e,t;return{c(){e=d("div"),t=d("div"),this.h()},l(s){e=c(s,"DIV",{class:!0});var n=b(e);t=c(n,"DIV",{class:!0,style:!0}),b(t).forEach(f),n.forEach(f),this.h()},h(){v(t,"class","usage-bar-fill svelte-rd5lqf"),ye(t,"width",ee(r[3].journal_entries_count,r[3].journal_entries_limit)+"%"),ve(t,"warning",ee(r[3].journal_entries_count,r[3].journal_entries_limit)>80),v(e,"class","usage-bar svelte-rd5lqf")},m(s,n){U(s,e,n),l(e,t)},p(s,n){n&8&&ye(t,"width",ee(s[3].journal_entries_count,s[3].journal_entries_limit)+"%"),n&8&&ve(t,"warning",ee(s[3].journal_entries_count,s[3].journal_entries_limit)>80)},d(s){s&&f(e)}}}function ut(r){let e,t;return{c(){e=d("div"),t=d("div"),this.h()},l(s){e=c(s,"DIV",{class:!0});var n=b(e);t=c(n,"DIV",{class:!0,style:!0}),b(t).forEach(f),n.forEach(f),this.h()},h(){v(t,"class","usage-bar-fill svelte-rd5lqf"),ye(t,"width",ee(r[3].playbooks_count,r[3].playbooks_limit)+"%"),ve(t,"warning",ee(r[3].playbooks_count,r[3].playbooks_limit)>80),v(e,"class","usage-bar svelte-rd5lqf")},m(s,n){U(s,e,n),l(e,t)},p(s,n){n&8&&ye(t,"width",ee(s[3].playbooks_count,s[3].playbooks_limit)+"%"),n&8&&ve(t,"warning",ee(s[3].playbooks_count,s[3].playbooks_limit)>80)},d(s){s&&f(e)}}}function ft(r){let e,t,s="Need more features?",n,o,a="Upgrade to Pro for unlimited trades, advanced analytics, and real-time data.",u,p,g,i,h;return i=new Et({props:{size:16}}),{c(){e=d("div"),t=d("h3"),t.textContent=s,n=D(),o=d("p"),o.textContent=a,u=D(),p=d("a"),g=S(`View Plans
					`),je(i.$$.fragment),this.h()},l(_){e=c(_,"DIV",{class:!0});var C=b(e);t=c(C,"H3",{class:!0,"data-svelte-h":!0}),Y(t)!=="svelte-sgubxl"&&(t.textContent=s),n=E(C),o=c(C,"P",{class:!0,"data-svelte-h":!0}),Y(o)!=="svelte-3ttan4"&&(o.textContent=a),u=E(C),p=c(C,"A",{href:!0,class:!0});var w=b(p);g=y(w,`View Plans
					`),Ne(i.$$.fragment,w),w.forEach(f),C.forEach(f),this.h()},h(){v(t,"class","svelte-rd5lqf"),v(o,"class","svelte-rd5lqf"),v(p,"href","/pricing"),v(p,"class","upgrade-button svelte-rd5lqf"),v(e,"class","upgrade-prompt card svelte-rd5lqf")},m(_,C){U(_,e,C),l(e,t),l(e,n),l(e,o),l(e,u),l(e,p),l(p,g),Ae(i,p,null),h=!0},i(_){h||(B(i.$$.fragment,_),h=!0)},o(_){J(i.$$.fragment,_),h=!1},d(_){_&&f(e),Se(i)}}}function Nt(r){let e,t,s,n='<h1 class="svelte-rd5lqf">Billing &amp; Subscription</h1> <p class="svelte-rd5lqf">Manage your subscription and view usage</p>',o,a,u,p;const g=[It,Vt,$t],i=[];function h(_,C){return _[0]?0:_[1]?1:2}return a=h(r),u=i[a]=g[a](r),{c(){e=D(),t=d("div"),s=d("header"),s.innerHTML=n,o=D(),u.c(),this.h()},l(_){pt("svelte-omtoq8",document.head).forEach(f),e=E(_),t=c(_,"DIV",{class:!0});var w=b(t);s=c(w,"HEADER",{class:!0,"data-svelte-h":!0}),Y(s)!=="svelte-gh86h1"&&(s.innerHTML=n),o=E(w),u.l(w),w.forEach(f),this.h()},h(){document.title="Billing - TradeSense",v(s,"class","page-header svelte-rd5lqf"),v(t,"class","billing-page svelte-rd5lqf")},m(_,C){U(_,e,C),U(_,t,C),l(t,s),l(t,o),i[a].m(t,null),p=!0},p(_,[C]){let w=a;a=h(_),a===w?i[a].p(_,C):(Fe(),J(i[w],1,1,()=>{i[w]=null}),ze(),u=i[a],u?u.p(_,C):(u=i[a]=g[a](_),u.c()),B(u,1),u.m(t,null))},i(_){p||(B(u),p=!0)},o(_){J(u),p=!1},d(_){_&&(f(e),f(t)),i[a].d()}}}function ae(r){return new Date(r).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function ee(r,e){return e===-1?0:Math.min(r/e*100,100)}function jt(r){return r.includes("enterprise")?"enterprise":r.includes("pro")?"pro":"free"}function Ut(r,e,t){let s=!0,n="",o=null,a=null;const u={free:{name:"Free",color:"gray",price:0},pro:{name:"Pro",color:"blue",price:29},enterprise:{name:"Enterprise",color:"purple",price:99}};async function p(){try{if(t(0,s=!0),t(1,n=""),!mt(kt)){bt("/login");return}const[_,C]=await Promise.all([Be.getSubscription(),Be.getUsage()]);t(2,o=_),t(3,a=C)}catch(_){t(1,n=_.message||"Failed to load billing information")}finally{t(0,s=!1)}}async function g(){try{const{url:_}=await Be.createPortalSession(at?window.location.href:"/billing");at&&(window.location.href=_)}catch(_){t(1,n=_.message||"Failed to open billing portal")}}async function i(){if(confirm("Are you sure you want to cancel your subscription? You will lose access to premium features at the end of your billing period."))try{await Be.cancelSubscription(),await p()}catch(_){t(1,n=_.message||"Failed to cancel subscription")}}async function h(){try{await Be.resumeSubscription(),await p()}catch(_){t(1,n=_.message||"Failed to resume subscription")}}return ht(()=>{p()}),[s,n,o,a,u,g,i,h]}class Kt extends dt{constructor(e){super(),_t(this,e,Ut,Nt,vt,{})}}export{Kt as component};
