import{S as _e,i as we,s as be,d as p,t as F,a as O,I as ye,f as D,h as u,D as i,E as Ce,o as P,k as v,l as L,r as x,q as h,F as ge,w as ke,n as pe,y as Q,z as W,A as X,m as V,B as ee,N as Pe,O as K,e as ve,G as ne,p as he,v as me,J as xe}from"../chunks/Lbc7qOuA.js";import"../chunks/IHki7fMi.js";import{p as Ee}from"../chunks/CmZqjJK5.js";import{g as Ie}from"../chunks/_pMazo4M.js";import{a as De}from"../chunks/Bxua-J_s.js";import{C as Le}from"../chunks/C4vSTWbX.js";import{C as Ve}from"../chunks/DNA3zxjK.js";import{L as fe}from"../chunks/Bq5Rfu0O.js";function Te(y){let e,s="Reset Your Password",r,t,o="Enter your new password below",g,m,a,w,n,f="New Password",k,b,c,d,C,H,T,M="Must be at least 8 characters with letters and numbers",te,R,z,oe="Confirm Password",se,q,B,le,I,re,N,U=y[2]?"Resetting...":"Reset Password",Y,j,A,ie='<a href="/login" class="svelte-1uy39p8">Back to Login</a>',$,ae,ue,E=y[3]&&de(y);return c=new fe({props:{size:20}}),B=new fe({props:{size:20}}),{c(){e=h("h1"),e.textContent=s,r=x(),t=h("p"),t.textContent=o,g=x(),E&&E.c(),m=x(),a=h("form"),w=h("div"),n=h("label"),n.textContent=f,k=x(),b=h("div"),ee(c.$$.fragment),d=x(),C=h("input"),H=x(),T=h("p"),T.textContent=M,te=x(),R=h("div"),z=h("label"),z.textContent=oe,se=x(),q=h("div"),ee(B.$$.fragment),le=x(),I=h("input"),re=x(),N=h("button"),Y=me(U),j=x(),A=h("div"),A.innerHTML=ie,this.h()},l(l){e=v(l,"H1",{class:!0,"data-svelte-h":!0}),V(e)!=="svelte-1a693r7"&&(e.textContent=s),r=P(l),t=v(l,"P",{class:!0,"data-svelte-h":!0}),V(t)!=="svelte-tdqkhi"&&(t.textContent=o),g=P(l),E&&E.l(l),m=P(l),a=v(l,"FORM",{});var _=L(a);w=v(_,"DIV",{class:!0});var S=L(w);n=v(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(n)!=="svelte-1fqrm48"&&(n.textContent=f),k=P(S),b=v(S,"DIV",{class:!0});var G=L(b);X(c.$$.fragment,G),d=P(G),C=v(G,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),G.forEach(p),H=P(S),T=v(S,"P",{class:!0,"data-svelte-h":!0}),V(T)!=="svelte-dns8ui"&&(T.textContent=M),S.forEach(p),te=P(_),R=v(_,"DIV",{class:!0});var J=L(R);z=v(J,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),V(z)!=="svelte-ckuh5e"&&(z.textContent=oe),se=P(J),q=v(J,"DIV",{class:!0});var Z=L(q);X(B.$$.fragment,Z),le=P(Z),I=v(Z,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Z.forEach(p),J.forEach(p),re=P(_),N=v(_,"BUTTON",{type:!0,class:!0});var ce=L(N);Y=he(ce,U),ce.forEach(p),_.forEach(p),j=P(l),A=v(l,"DIV",{class:!0,"data-svelte-h":!0}),V(A)!=="svelte-1897lpg"&&(A.innerHTML=ie),this.h()},h(){i(e,"class","svelte-1uy39p8"),i(t,"class","subtitle svelte-1uy39p8"),i(n,"for","password"),i(n,"class","svelte-1uy39p8"),i(C,"id","password"),i(C,"type","password"),i(C,"placeholder","Enter new password"),C.required=!0,C.disabled=y[2],i(C,"class","svelte-1uy39p8"),i(b,"class","input-wrapper svelte-1uy39p8"),i(T,"class","password-hint svelte-1uy39p8"),i(w,"class","form-group svelte-1uy39p8"),i(z,"for","confirmPassword"),i(z,"class","svelte-1uy39p8"),i(I,"id","confirmPassword"),i(I,"type","password"),i(I,"placeholder","Confirm new password"),I.required=!0,I.disabled=y[2],i(I,"class","svelte-1uy39p8"),i(q,"class","input-wrapper svelte-1uy39p8"),i(R,"class","form-group svelte-1uy39p8"),i(N,"type","submit"),i(N,"class","submit-button svelte-1uy39p8"),N.disabled=y[2],i(A,"class","auth-footer svelte-1uy39p8")},m(l,_){D(l,e,_),D(l,r,_),D(l,t,_),D(l,g,_),E&&E.m(l,_),D(l,m,_),D(l,a,_),u(a,w),u(w,n),u(w,k),u(w,b),W(c,b,null),u(b,d),u(b,C),K(C,y[0]),u(w,H),u(w,T),u(a,te),u(a,R),u(R,z),u(R,se),u(R,q),W(B,q,null),u(q,le),u(q,I),K(I,y[1]),u(a,re),u(a,N),u(N,Y),D(l,j,_),D(l,A,_),$=!0,ae||(ue=[ne(C,"input",y[7]),ne(I,"input",y[8]),ne(a,"submit",y[6])],ae=!0)},p(l,_){l[3]?E?E.p(l,_):(E=de(l),E.c(),E.m(m.parentNode,m)):E&&(E.d(1),E=null),(!$||_&4)&&(C.disabled=l[2]),_&1&&C.value!==l[0]&&K(C,l[0]),(!$||_&4)&&(I.disabled=l[2]),_&2&&I.value!==l[1]&&K(I,l[1]),(!$||_&4)&&U!==(U=l[2]?"Resetting...":"Reset Password")&&ve(Y,U),(!$||_&4)&&(N.disabled=l[2])},i(l){$||(O(c.$$.fragment,l),O(B.$$.fragment,l),$=!0)},o(l){F(c.$$.fragment,l),F(B.$$.fragment,l),$=!1},d(l){l&&(p(e),p(r),p(t),p(g),p(m),p(a),p(j),p(A)),E&&E.d(l),Q(c),Q(B),ae=!1,Pe(ue)}}}function Ne(y){let e,s,r,t,o,g="Invalid or Expired Link",m,a,w="This password reset link is invalid or has expired. Password reset links are valid for 1 hour.",n,f,k="Request New Link",b;return r=new Ve({props:{size:64}}),{c(){e=h("div"),s=h("div"),ee(r.$$.fragment),t=x(),o=h("h1"),o.textContent=g,m=x(),a=h("p"),a.textContent=w,n=x(),f=h("a"),f.textContent=k,this.h()},l(c){e=v(c,"DIV",{class:!0});var d=L(e);s=v(d,"DIV",{class:!0});var C=L(s);X(r.$$.fragment,C),C.forEach(p),t=P(d),o=v(d,"H1",{class:!0,"data-svelte-h":!0}),V(o)!=="svelte-1e7l5nr"&&(o.textContent=g),m=P(d),a=v(d,"P",{class:!0,"data-svelte-h":!0}),V(a)!=="svelte-112pywi"&&(a.textContent=w),n=P(d),f=v(d,"A",{href:!0,class:!0,"data-svelte-h":!0}),V(f)!=="svelte-1coziz"&&(f.textContent=k),d.forEach(p),this.h()},h(){i(s,"class","error-icon svelte-1uy39p8"),i(o,"class","svelte-1uy39p8"),i(a,"class","svelte-1uy39p8"),i(f,"href","/forgot-password"),i(f,"class","primary-button svelte-1uy39p8"),i(e,"class","error-state svelte-1uy39p8")},m(c,d){D(c,e,d),u(e,s),W(r,s,null),u(e,t),u(e,o),u(e,m),u(e,a),u(e,n),u(e,f),b=!0},p:pe,i(c){b||(O(r.$$.fragment,c),b=!0)},o(c){F(r.$$.fragment,c),b=!1},d(c){c&&p(e),Q(r)}}}function Re(y){let e,s,r,t,o,g="Password Reset Successful!",m,a,w="Your password has been successfully reset. You'll be redirected to login in a moment...",n,f,k="Go to Login",b;return r=new Le({props:{size:64}}),{c(){e=h("div"),s=h("div"),ee(r.$$.fragment),t=x(),o=h("h1"),o.textContent=g,m=x(),a=h("p"),a.textContent=w,n=x(),f=h("a"),f.textContent=k,this.h()},l(c){e=v(c,"DIV",{class:!0});var d=L(e);s=v(d,"DIV",{class:!0});var C=L(s);X(r.$$.fragment,C),C.forEach(p),t=P(d),o=v(d,"H1",{class:!0,"data-svelte-h":!0}),V(o)!=="svelte-wxl127"&&(o.textContent=g),m=P(d),a=v(d,"P",{class:!0,"data-svelte-h":!0}),V(a)!=="svelte-j75gam"&&(a.textContent=w),n=P(d),f=v(d,"A",{href:!0,class:!0,"data-svelte-h":!0}),V(f)!=="svelte-1b6wjrp"&&(f.textContent=k),d.forEach(p),this.h()},h(){i(s,"class","success-icon svelte-1uy39p8"),i(o,"class","svelte-1uy39p8"),i(a,"class","svelte-1uy39p8"),i(f,"href","/login"),i(f,"class","login-button svelte-1uy39p8"),i(e,"class","success-state svelte-1uy39p8")},m(c,d){D(c,e,d),u(e,s),W(r,s,null),u(e,t),u(e,o),u(e,m),u(e,a),u(e,n),u(e,f),b=!0},p:pe,i(c){b||(O(r.$$.fragment,c),b=!0)},o(c){F(r.$$.fragment,c),b=!1},d(c){c&&p(e),Q(r)}}}function de(y){let e,s;return{c(){e=h("div"),s=me(y[3]),this.h()},l(r){e=v(r,"DIV",{class:!0});var t=L(e);s=he(t,y[3]),t.forEach(p),this.h()},h(){i(e,"class","error-message svelte-1uy39p8")},m(r,t){D(r,e,t),u(e,s)},p(r,t){t&8&&ve(s,r[3])},d(r){r&&p(e)}}}function ze(y){let e,s,r,t,o,g;const m=[Re,Ne,Te],a=[];function w(n,f){return n[4]?0:n[5]?2:1}return t=w(y),o=a[t]=m[t](y),{c(){e=x(),s=h("div"),r=h("div"),o.c(),this.h()},l(n){Ce("svelte-1l9lag7",document.head).forEach(p),e=P(n),s=v(n,"DIV",{class:!0});var k=L(s);r=v(k,"DIV",{class:!0});var b=L(r);o.l(b),b.forEach(p),k.forEach(p),this.h()},h(){document.title="Reset Password - TradeSense",i(r,"class","auth-card svelte-1uy39p8"),i(s,"class","auth-container svelte-1uy39p8")},m(n,f){D(n,e,f),D(n,s,f),u(s,r),a[t].m(r,null),g=!0},p(n,[f]){let k=t;t=w(n),t===k?a[t].p(n,f):(xe(),F(a[k],1,1,()=>{a[k]=null}),ye(),o=a[t],o?o.p(n,f):(o=a[t]=m[t](n),o.c()),O(o,1),o.m(r,null))},i(n){g||(O(o),g=!0)},o(n){F(o),g=!1},d(n){n&&(p(e),p(s)),a[t].d()}}}function qe(y,e,s){let r;ge(y,Ee,c=>s(10,r=c));let t="",o="",g=!1,m="",a=!1,w=!0,n="";ke(()=>{n=r.url.searchParams.get("token")||"",n||(s(5,w=!1),s(3,m="No reset token provided"))});async function f(c){var H,T;if(c.preventDefault(),!t||!o){s(3,m="Please fill in all fields");return}if(t!==o){s(3,m="Passwords do not match");return}if(t.length<8){s(3,m="Password must be at least 8 characters long");return}const d=/[a-zA-Z]/.test(t),C=/[0-9]/.test(t);if(!d||!C){s(3,m="Password must contain both letters and numbers");return}s(2,g=!0),s(3,m="");try{await De.resetPassword(n,t),s(4,a=!0),setTimeout(()=>{Ie("/login")},3e3)}catch(M){s(3,m=M.message||"Failed to reset password. The link may be expired."),((H=M.message)!=null&&H.includes("expired")||(T=M.message)!=null&&T.includes("invalid"))&&s(5,w=!1)}finally{s(2,g=!1)}}function k(){t=this.value,s(0,t)}function b(){o=this.value,s(1,o)}return[t,o,g,m,a,w,f,k,b]}class Ue extends _e{constructor(e){super(),we(this,e,qe,ze,be,{})}}export{Ue as component};
