<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TradeSense Frontend-Backend Integration Mission Plan</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f8f9fa;
        }
        .container {
            background: white;
            padding: 40px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            border-bottom: 3px solid #3498db;
            padding-bottom: 20px;
            margin-bottom: 30px;
        }
        h2 {
            color: #34495e;
            border-left: 4px solid #3498db;
            padding-left: 15px;
            margin-top: 30px;
        }
        h3 {
            color: #2c3e50;
            margin-top: 25px;
        }
        .status-not-started { color: #e74c3c; font-weight: bold; }
        .status-in-progress { color: #f39c12; font-weight: bold; }
        .status-completed { color: #27ae60; font-weight: bold; }
        .status-blocked { color: #8e44ad; font-weight: bold; }
        .phase-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 15px 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        .step-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 15px 0;
            background: #fafafa;
        }
        .task-list {
            list-style: none;
            padding-left: 0;
        }
        .task-list li {
            padding: 5px 0;
            padding-left: 25px;
            position: relative;
            cursor: pointer;
            transition: background-color 0.2s;
        }
        .task-list li:hover {
            background-color: #f0f8ff;
            border-radius: 4px;
        }
        .task-list li:before {
            content: "‚òê";
            position: absolute;
            left: 0;
            color: #3498db;
            font-size: 1.2em;
        }
        .task-list li.completed:before {
            content: "‚òë";
            color: #27ae60;
        }
        .task-list li.completed {
            text-decoration: line-through;
            color: #666;
        }
        .progress-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        .progress-table th, .progress-table td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        .progress-table th {
            background-color: #3498db;
            color: white;
        }
        .progress-table tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        .success-criteria {
            background: #d4edda;
            border: 1px solid #c3e6cb;
            border-radius: 5px;
            padding: 15px;
            margin: 10px 0;
        }
        .dependencies {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 5px;
            padding: 10px;
            margin: 10px 0;
            font-size: 0.9em;
        }
        .checklist {
            background: #e8f4fd;
            border: 1px solid #bee5eb;
            border-radius: 5px;
            padding: 20px;
            margin: 20px 0;
        }
        .checklist h4 {
            margin-top: 0;
            color: #0c5460;
        }
        .metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        .metric-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
        }
        .metric-value {
            font-size: 2em;
            font-weight: bold;
            color: #3498db;
        }
        .metric-label {
            color: #666;
            margin-top: 5px;
        }
        .emoji {
            font-size: 1.2em;
        }
        .footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #666;
            font-size: 0.9em;
        }
        .progress-controls {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        .progress-controls h3 {
            margin-top: 0;
            color: #495057;
        }
        .btn {
            background: #3498db;
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
            font-size: 14px;
        }
        .btn:hover {
            background: #2980b9;
        }
        .btn-success {
            background: #27ae60;
        }
        .btn-success:hover {
            background: #229954;
        }
        .btn-warning {
            background: #f39c12;
        }
        .btn-warning:hover {
            background: #e67e22;
        }
        .progress-bar {
            width: 100%;
            height: 20px;
            background-color: #e9ecef;
            border-radius: 10px;
            overflow: hidden;
            margin: 10px 0;
        }
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #27ae60, #2ecc71);
            transition: width 0.3s ease;
        }
        @media print {
            body { background: white; }
            .container { box-shadow: none; }
            .progress-controls { display: none; }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ TradeSense Frontend-Backend Integration Mission Plan</h1>
        
        <div class="metrics">
            <div class="metric-card">
                <div class="metric-value" id="total-phases">6</div>
                <div class="metric-label">Phases</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="total-steps">24</div>
                <div class="metric-label">Steps</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="total-tasks">120</div>
                <div class="metric-label">Tasks</div>
            </div>
            <div class="metric-card">
                <div class="metric-value" id="overall-progress">0%</div>
                <div class="metric-label">Progress</div>
            </div>
        </div>

        <div class="progress-controls">
            <h3>üìä Progress Tracking Controls</h3>
            <p>Click on any task to mark it as completed. Use the buttons below for bulk operations.</p>
            <button class="btn" onclick="saveProgress()">üíæ Save Progress</button>
            <button class="btn" onclick="loadProgress()">üìÇ Load Progress</button>
            <button class="btn btn-warning" onclick="resetProgress()">üîÑ Reset All</button>
            <button class="btn btn-success" onclick="exportProgress()">üì§ Export Progress</button>
            <div class="progress-bar">
                <div class="progress-fill" id="progress-bar-fill" style="width: 0%"></div>
            </div>
            <p><strong>Overall Progress:</strong> <span id="progress-text">0% (0/120 tasks completed)</span></p>
        </div>

        <h2>üéØ Mission Overview</h2>
        <p><strong>Primary Goal:</strong> Complete integration between frontend and backend, enhance UI/UX, and create a fully functional trading analytics platform.</p>
        
        <h3>Success Criteria:</h3>
        <ul>
            <li>‚úÖ All backend APIs connected to frontend components</li>
            <li>‚úÖ Real-time data flow and updates</li>
            <li>‚úÖ Professional, responsive UI/UX</li>
            <li>‚úÖ Complete authentication and user management</li>
            <li>‚úÖ Performance optimized and production-ready</li>
        </ul>

        <h2>üìã PHASE 1: FOUNDATION & CORE INTEGRATION</h2>
        <div class="phase-header">
            <strong>Priority:</strong> CRITICAL | <strong>Estimated Time:</strong> 2-3 days | <strong>Status:</strong> <span class="status-not-started" id="phase1-status">NOT STARTED</span>
        </div>

        <div class="step-card">
            <h3>Step 1.1: Authentication System Implementation</h3>
            <p><strong>Status:</strong> <span class="status-not-started" id="step1.1-status">NOT STARTED</span></p>
            <p><strong>Objective:</strong> Implement complete authentication flow</p>
            
            <h4>Tasks:</h4>
            <ul class="task-list" id="step1.1-tasks">
                <li data-step="1.1" data-task="1">Create Login/Register components</li>
                <li data-step="1.1" data-task="2">Implement JWT token management</li>
                <li data-step="1.1" data-task="3">Add protected route wrapper</li>
                <li data-step="1.1" data-task="4">Create user context and hooks</li>
                <li data-step="1.1" data-task="5">Test authentication flow end-to-end</li>
            </ul>
            
            <div class="success-criteria">
                <strong>Success Criteria:</strong> Users can login, logout, and access protected routes
            </div>
            
            <div class="dependencies">
                <strong>Dependencies:</strong> Backend auth API ready ‚úÖ
            </div>
        </div>

        <div class="step-card">
            <h3>Step 1.2: Fix Core Navigation & Routing</h3>
            <p><strong>Status:</strong> <span class="status-not-started" id="step1.2-status">NOT STARTED</span></p>
            <p><strong>Objective:</strong> Make navigation functional and intuitive</p>
            
            <h4>Tasks:</h4>
            <ul class="task-list" id="step1.2-tasks">
                <li data-step="1.2" data-task="1">Fix Navbar component with working links</li>
                <li data-step="1.2" data-task="2">Implement proper React Router setup</li>
                <li data-step="1.2" data-task="3">Add breadcrumb navigation</li>
                <li data-step="1.2" data-task="4">Create responsive mobile navigation</li>
                <li data-step="1.2" data-task="5">Add active route highlighting</li>
            </ul>
            
            <div class="success-criteria">
                <strong>Success Criteria:</strong> All navigation links work, mobile-friendly navigation
            </div>
            
            <div class="dependencies">
                <strong>Dependencies:</strong> Step 1.1 (Authentication)
            </div>
        </div>

        <div class="step-card">
            <h3>Step 1.3: Dashboard Integration with Real Data</h3>
            <p><strong>Status:</strong> <span class="status-not-started" id="step1.3-status">NOT STARTED</span></p>
            <p><strong>Objective:</strong> Replace static dashboard with live backend data</p>
            
            <h4>Tasks:</h4>
            <ul class="task-list" id="step1.3-tasks">
                <li data-step="1.3" data-task="1">Connect Dashboard to analytics API</li>
                <li data-step="1.3" data-task="2">Implement real-time P&L display</li>
                <li data-step="1.3" data-task="3">Add trade statistics from backend</li>
                <li data-step="1.3" data-task="4">Create loading states and error handling</li>
                <li data-step="1.3" data-task="5">Add data refresh functionality</li>
            </ul>
            
            <div class="success-criteria">
                <strong>Success Criteria:</strong> Dashboard shows real data from backend APIs
            </div>
            
            <div class="dependencies">
                <strong>Dependencies:</strong> Step 1.1 (Authentication), Backend analytics API ‚úÖ
            </div>
        </div>

        <div class="step-card">
            <h3>Step 1.4: API Client Enhancement</h3>
            <p><strong>Status:</strong> <span class="status-not-started" id="step1.4-status">NOT STARTED</span></p>
            <p><strong>Objective:</strong> Improve API communication reliability</p>
            
            <h4>Tasks:</h4>
            <ul class="task-list" id="step1.4-tasks">
                <li data-step="1.4" data-task="1">Add retry mechanisms for failed requests</li>
                <li data-step="1.4" data-task="2">Implement request/response interceptors</li>
                <li data-step="1.4" data-task="3">Add offline detection and handling</li>
                <li data-step="1.4" data-task="4">Create API error boundary components</li>
                <li data-step="1.4" data-task="5">Add request caching strategies</li>
            </ul>
            
            <div class="success-criteria">
                <strong>Success Criteria:</strong> Robust API communication with error recovery
            </div>
            
            <div class="dependencies">
                <strong>Dependencies:</strong> Step 1.1 (Authentication)
            </div>
        </div>

        <h2>üìã PHASE 2: ADVANCED FEATURES INTEGRATION</h2>
        <div class="phase-header">
            <strong>Priority:</strong> HIGH | <strong>Estimated Time:</strong> 3-4 days | <strong>Status:</strong> <span class="status-not-started" id="phase2-status">NOT STARTED</span>
        </div>

        <div class="step-card">
            <h3>Step 2.1: Trade Management System</h3>
            <p><strong>Status:</strong> <span class="status-not-started" id="step2.1-status">NOT STARTED</span></p>
            <p><strong>Objective:</strong> Full CRUD operations for trades</p>
            
            <h4>Tasks:</h4>
            <ul class="task-list" id="step2.1-tasks">
                <li data-step="2.1" data-task="1">Connect TradeLog component to backend</li>
                <li data-step="2.1" data-task="2">Implement trade search and filtering</li>
                <li data-step="2.1" data-task="3">Add trade creation/editing forms</li>
                <li data-step="2.1" data-task="4">Create trade detail views</li>
                <li data-step="2.1" data-task="5">Add bulk trade operations</li>
            </ul>
            
            <div class="success-criteria">
                <strong>Success Criteria:</strong> Complete trade management functionality
            </div>
            
            <div class="dependencies">
                <strong>Dependencies:</strong> Phase 1 complete, Backend trades API ‚úÖ
            </div>
        </div>

        <div class="step-card">
            <h3>Step 2.2: Analytics Dashboard Integration</h3>
            <p><strong>Status:</strong> <span class="status-not-started" id="step2.2-status">NOT STARTED</span></p>
            <p><strong>Objective:</strong> Connect all analytics components to backend</p>
            
            <h4>Tasks:</h4>
            <ul class="task-list" id="step2.2-tasks">
                <li data-step="2.2" data-task="1">Integrate PerformanceHeatmap with real data</li>
                <li data-step="2.2" data-task="2">Connect TradeIntelligenceDashboard</li>
                <li data-step="2.2" data-task="3">Implement StrategyLabDashboard</li>
                <li data-step="2.2" data-task="4">Add PlaybookManager functionality</li>
                <li data-step="2.2" data-task="5">Create analytics data refresh system</li>
            </ul>
            
            <div class="success-criteria">
                <strong>Success Criteria:</strong> All analytics components show real data
            </div>
            
            <div class="dependencies">
                <strong>Dependencies:</strong> Phase 1 complete, Backend analytics APIs ‚úÖ
            </div>
        </div>

        <h2>üìä Progress Tracking</h2>
        
        <table class="progress-table">
            <thead>
                <tr>
                    <th>Phase</th>
                    <th>Status</th>
                    <th>Progress</th>
                    <th>Dependencies</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>Phase 1 - Foundation</td>
                    <td><span class="status-not-started" id="table-phase1-status">NOT STARTED</span></td>
                    <td id="table-phase1-progress">0%</td>
                    <td>Backend APIs ‚úÖ</td>
                </tr>
                <tr>
                    <td>Phase 2 - Advanced Features</td>
                    <td><span class="status-not-started" id="table-phase2-status">NOT STARTED</span></td>
                    <td id="table-phase2-progress">0%</td>
                    <td>Phase 1</td>
                </tr>
                <tr>
                    <td>Phase 3 - Real-time Features</td>
                    <td><span class="status-not-started" id="table-phase3-status">NOT STARTED</span></td>
                    <td id="table-phase3-progress">0%</td>
                    <td>Phase 2</td>
                </tr>
                <tr>
                    <td>Phase 4 - Performance</td>
                    <td><span class="status-not-started" id="table-phase4-status">NOT STARTED</span></td>
                    <td id="table-phase4-progress">0%</td>
                    <td>Phase 3</td>
                </tr>
                <tr>
                    <td>Phase 5 - UI/UX</td>
                    <td><span class="status-not-started" id="table-phase5-status">NOT STARTED</span></td>
                    <td id="table-phase5-progress">0%</td>
                    <td>Phase 4</td>
                </tr>
                <tr>
                    <td>Phase 6 - Testing & Deployment</td>
                    <td><span class="status-not-started" id="table-phase6-status">NOT STARTED</span></td>
                    <td id="table-phase6-progress">0%</td>
                    <td>Phase 5</td>
                </tr>
            </tbody>
        </table>

        <div class="checklist">
            <h4>üéØ Mission Completion Checklist</h4>
            
            <h5>Phase 1 Checklist</h5>
            <ul class="task-list" id="phase1-checklist">
                <li data-checklist="phase1" data-item="1">Authentication system working</li>
                <li data-checklist="phase1" data-item="2">Navigation functional</li>
                <li data-checklist="phase1" data-item="3">Dashboard showing real data</li>
                <li data-checklist="phase1" data-item="4">API client robust and reliable</li>
            </ul>
            
            <h5>Phase 2 Checklist</h5>
            <ul class="task-list" id="phase2-checklist">
                <li data-checklist="phase2" data-item="1">Trade management complete</li>
                <li data-checklist="phase2" data-item="2">Analytics dashboards connected</li>
                <li data-checklist="phase2" data-item="3">Portfolio data integrated</li>
                <li data-checklist="phase2" data-item="4">Psychology features working</li>
            </ul>
            
            <h5>Phase 3 Checklist</h5>
            <ul class="task-list" id="phase3-checklist">
                <li data-checklist="phase3" data-item="1">Real-time updates working</li>
                <li data-checklist="phase3" data-item="2">Advanced search functional</li>
                <li data-checklist="phase3" data-item="3">Strategy system complete</li>
                <li data-checklist="phase3" data-item="4">Community features active</li>
            </ul>
            
            <h5>Phase 4 Checklist</h5>
            <ul class="task-list" id="phase4-checklist">
                <li data-checklist="phase4" data-item="1">Performance optimized</li>
                <li data-checklist="phase4" data-item="2">Caching implemented</li>
                <li data-checklist="phase4" data-item="3">Error handling robust</li>
                <li data-checklist="phase4" data-item="4">Monitoring in place</li>
            </ul>
            
            <h5>Phase 5 Checklist</h5>
            <ul class="task-list" id="phase5-checklist">
                <li data-checklist="phase5" data-item="1">Design system complete</li>
                <li data-checklist="phase5" data-item="2">Mobile optimized</li>
                <li data-checklist="phase5" data-item="3">Accessibility implemented</li>
                <li data-checklist="phase5" data-item="4">User experience polished</li>
            </ul>
            
            <h5>Phase 6 Checklist</h5>
            <ul class="task-list" id="phase6-checklist">
                <li data-checklist="phase6" data-item="1">Testing comprehensive</li>
                <li data-checklist="phase6" data-item="2">Production deployment ready</li>
                <li data-checklist="phase6" data-item="3">Documentation complete</li>
                <li data-checklist="phase6" data-item="4">Mission accomplished! üéâ</li>
            </ul>
        </div>

        <h2>üöÄ Execution Strategy</h2>
        
        <h3>Daily Workflow</h3>
        <ol>
            <li><strong>Morning Review:</strong> Check progress, identify blockers</li>
            <li><strong>Task Execution:</strong> Work on current phase tasks</li>
            <li><strong>Testing:</strong> Verify each completed task</li>
            <li><strong>Documentation:</strong> Update progress and notes</li>
            <li><strong>Planning:</strong> Prepare for next day's tasks</li>
        </ol>

        <h3>Decision Making Framework</h3>
        <ul>
            <li><strong>Always prioritize user experience</strong></li>
            <li><strong>Maintain code quality and consistency</strong></li>
            <li><strong>Consider scalability and maintainability</strong></li>
            <li><strong>Keep performance in mind</strong></li>
            <li><strong>Ensure security best practices</strong></li>
        </ul>

        <h2>üìù Current Status Summary</h2>
        
        <h3>Backend Status ‚úÖ</h3>
        <ul>
            <li>FastAPI server running on port 8000</li>
            <li>25+ API endpoints available</li>
            <li>Database with 16 models</li>
            <li>Authentication system ready</li>
            <li>Real-time capabilities available</li>
        </ul>

        <h3>Frontend Status ‚ö†Ô∏è</h3>
        <ul>
            <li>React + TypeScript setup ‚úÖ</li>
            <li>30+ service files for API integration ‚úÖ</li>
            <li>25+ advanced analytics components ‚úÖ</li>
            <li>Modern UI framework (Tailwind CSS) ‚úÖ</li>
            <li>Basic components need integration ‚ö†Ô∏è</li>
            <li>Navigation not functional ‚ö†Ô∏è</li>
            <li>Authentication not implemented ‚ö†Ô∏è</li>
        </ul>

        <div class="footer">
            <p><strong>Document Version:</strong> 1.0 | <strong>Last Updated:</strong> January 2025</p>
            <p><strong>TradeSense Integration Mission Plan</strong></p>
            <p>This plan provides a systematic roadmap to complete the integration mission while maintaining focus on the ultimate goal of creating a world-class trading analytics platform.</p>
        </div>
    </div>

    <script>
        // Progress tracking system
        let progress = {
            tasks: {},
            checklist: {},
            lastUpdated: new Date().toISOString()
        };

        // Initialize progress tracking
        document.addEventListener('DOMContentLoaded', function() {
            loadProgress();
            setupEventListeners();
            updateProgressDisplay();
        });

        function setupEventListeners() {
            // Add click listeners to all task items
            document.querySelectorAll('.task-list li[data-step]').forEach(item => {
                item.addEventListener('click', function() {
                    toggleTask(this);
                });
            });

            // Add click listeners to checklist items
            document.querySelectorAll('.task-list li[data-checklist]').forEach(item => {
                item.addEventListener('click', function() {
                    toggleChecklistItem(this);
                });
            });
        }

        function toggleTask(element) {
            const step = element.getAttribute('data-step');
            const task = element.getAttribute('data-task');
            const taskId = `${step}-${task}`;
            
            if (element.classList.contains('completed')) {
                element.classList.remove('completed');
                delete progress.tasks[taskId];
            } else {
                element.classList.add('completed');
                progress.tasks[taskId] = {
                    completed: true,
                    completedAt: new Date().toISOString()
                };
            }
            
            updateStepStatus(step);
            updatePhaseStatus();
            updateProgressDisplay();
            saveProgress();
        }

        function toggleChecklistItem(element) {
            const phase = element.getAttribute('data-checklist');
            const item = element.getAttribute('data-item');
            const itemId = `${phase}-${item}`;
            
            if (element.classList.contains('completed')) {
                element.classList.remove('completed');
                delete progress.checklist[itemId];
            } else {
                element.classList.add('completed');
                progress.checklist[itemId] = {
                    completed: true,
                    completedAt: new Date().toISOString()
                };
            }
            
            updateProgressDisplay();
            saveProgress();
        }

        function updateStepStatus(step) {
            const stepElement = document.getElementById(`step${step}-tasks`);
            const statusElement = document.getElementById(`step${step}-status`);
            
            if (!stepElement) return;
            
            const totalTasks = stepElement.children.length;
            const completedTasks = stepElement.querySelectorAll('.completed').length;
            
            if (completedTasks === 0) {
                statusElement.textContent = 'NOT STARTED';
                statusElement.className = 'status-not-started';
            } else if (completedTasks === totalTasks) {
                statusElement.textContent = 'COMPLETED';
                statusElement.className = 'status-completed';
            } else {
                statusElement.textContent = 'IN PROGRESS';
                statusElement.className = 'status-in-progress';
            }
        }

        function updatePhaseStatus() {
            // Update Phase 1 status
            const phase1Steps = ['1.1', '1.2', '1.3', '1.4'];
            const phase1Status = getPhaseStatus(phase1Steps);
            updatePhaseStatusDisplay('phase1', phase1Status);
            updatePhaseStatusDisplay('table-phase1', phase1Status);
            
            // Update Phase 2 status
            const phase2Steps = ['2.1', '2.2'];
            const phase2Status = getPhaseStatus(phase2Steps);
            updatePhaseStatusDisplay('phase2', phase2Status);
            updatePhaseStatusDisplay('table-phase2', phase2Status);
        }

        function getPhaseStatus(steps) {
            let totalTasks = 0;
            let completedTasks = 0;
            
            steps.forEach(step => {
                const stepElement = document.getElementById(`step${step}-tasks`);
                if (stepElement) {
                    totalTasks += stepElement.children.length;
                    completedTasks += stepElement.querySelectorAll('.completed').length;
                }
            });
            
            if (completedTasks === 0) return { status: 'NOT STARTED', progress: 0 };
            if (completedTasks === totalTasks) return { status: 'COMPLETED', progress: 100 };
            return { status: 'IN PROGRESS', progress: Math.round((completedTasks / totalTasks) * 100) };
        }

        function updatePhaseStatusDisplay(elementId, status) {
            const element = document.getElementById(elementId);
            if (element) {
                element.textContent = status.status;
                element.className = `status-${status.status.toLowerCase().replace(' ', '-')}`;
            }
            
            const progressElement = document.getElementById(`${elementId}-progress`);
            if (progressElement) {
                progressElement.textContent = `${status.progress}%`;
            }
        }

        function updateProgressDisplay() {
            const totalTasks = document.querySelectorAll('.task-list li[data-step]').length;
            const completedTasks = document.querySelectorAll('.task-list li[data-step].completed').length;
            const progressPercentage = Math.round((completedTasks / totalTasks) * 100);
            
            // Update metrics
            document.getElementById('overall-progress').textContent = `${progressPercentage}%`;
            document.getElementById('progress-text').textContent = `${progressPercentage}% (${completedTasks}/${totalTasks} tasks completed)`;
            document.getElementById('progress-bar-fill').style.width = `${progressPercentage}%`;
            
            // Update last updated time
            progress.lastUpdated = new Date().toISOString();
        }

        function saveProgress() {
            try {
                localStorage.setItem('tradesense-progress', JSON.stringify(progress));
                console.log('Progress saved successfully');
            } catch (error) {
                console.error('Failed to save progress:', error);
            }
        }

        function loadProgress() {
            try {
                const saved = localStorage.getItem('tradesense-progress');
                if (saved) {
                    progress = JSON.parse(saved);
                    
                    // Restore task completion states
                    Object.keys(progress.tasks).forEach(taskId => {
                        const [step, task] = taskId.split('-');
                        const element = document.querySelector(`[data-step="${step}"][data-task="${task}"]`);
                        if (element) {
                            element.classList.add('completed');
                        }
                    });
                    
                    // Restore checklist completion states
                    Object.keys(progress.checklist).forEach(itemId => {
                        const [phase, item] = itemId.split('-');
                        const element = document.querySelector(`[data-checklist="${phase}"][data-item="${item}"]`);
                        if (element) {
                            element.classList.add('completed');
                        }
                    });
                    
                    console.log('Progress loaded successfully');
                }
            } catch (error) {
                console.error('Failed to load progress:', error);
            }
        }

        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This cannot be undone.')) {
                progress = { tasks: {}, checklist: {}, lastUpdated: new Date().toISOString() };
                
                // Remove all completed classes
                document.querySelectorAll('.task-list li.completed').forEach(item => {
                    item.classList.remove('completed');
                });
                
                // Reset all status displays
                document.querySelectorAll('[id$="-status"]').forEach(element => {
                    element.textContent = 'NOT STARTED';
                    element.className = 'status-not-started';
                });
                
                updateProgressDisplay();
                saveProgress();
            }
        }

        function exportProgress() {
            const exportData = {
                progress: progress,
                exportDate: new Date().toISOString(),
                summary: {
                    totalTasks: document.querySelectorAll('.task-list li[data-step]').length,
                    completedTasks: document.querySelectorAll('.task-list li[data-step].completed').length,
                    overallProgress: document.getElementById('overall-progress').textContent
                }
            };
            
            const blob = new Blob([JSON.stringify(exportData, null, 2)], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `tradesense-progress-${new Date().toISOString().split('T')[0]}.json`;
            a.click();
            URL.revokeObjectURL(url);
        }
    </script>
</body>
</html> 