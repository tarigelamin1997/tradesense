import{S as Fl,i as Wl,s as Xl,d as f,y as Fe,H as Lt,N as al,t as me,a as ce,e as fe,O as Q,P as Vl,J as ml,I as gl,f as he,h as t,z as We,G as K,T as Rs,D as r,U as Ps,k as i,l as p,p as j,o as b,A as Xe,m as O,q as u,v as P,r as k,B as Ge,a7 as As,R as Ot,V as xs,Z as Et,E as Hs,w as qs,n as pl,M as Zl,K as Ms,X as Al}from"../chunks/Lbc7qOuA.js";import{e as Ue}from"../chunks/BPb2qfkA.js";import"../chunks/IHki7fMi.js";import{g as Fs}from"../chunks/KzgLiahW.js";import{i as Ws}from"../chunks/DvhTOQ1T.js";import{X as Xs}from"../chunks/D9QBKBPx.js";import{P as Ml}from"../chunks/bUqTUu5f.js";import{M as Vs}from"../chunks/D0PyiF5G.js";import{S as Os}from"../chunks/CLaVRBMD.js";import{C as Ls}from"../chunks/CkXdArYm.js";import{T as Bs}from"../chunks/CU7Y70JQ.js";import{T as Gs}from"../chunks/DT_GQsO_.js";import{T as Ks}from"../chunks/D6w_Jmzs.js";import{S as Qs}from"../chunks/CV73WfoF.js";import{F as Js}from"../chunks/BVoy4-16.js";function Yl(l,e,s){const a=l.slice();return a[40]=e[s],a}function es(l,e,s){const a=l.slice();return a[43]=e[s],a}function ts(l,e,s){const a=l.slice();return a[46]=e[s],a[47]=e,a[48]=s,a}function ls(l,e,s){const a=l.slice();return a[46]=e[s],a[49]=e,a[48]=s,a}function ss(l){let e,s,a=l[48]+1+"",o,n,c,_,d,v,h,g,m,E,D;function A(){l[19].call(_,l[48])}h=new Vs({props:{size:16}});function le(){return l[20](l[48])}return{c(){e=u("div"),s=u("span"),o=P(a),n=P("."),c=k(),_=u("input"),d=k(),v=u("button"),Ge(h.$$.fragment),this.h()},l(C){e=i(C,"DIV",{class:!0});var I=p(e);s=i(I,"SPAN",{class:!0});var w=p(s);o=j(w,a),n=j(w,"."),w.forEach(f),c=b(I),_=i(I,"INPUT",{type:!0,placeholder:!0,class:!0}),d=b(I),v=i(I,"BUTTON",{type:!0,class:!0});var L=p(v);Xe(h.$$.fragment,L),L.forEach(f),I.forEach(f),this.h()},h(){r(s,"class","rule-number svelte-1j669ox"),r(_,"type","text"),r(_,"placeholder","Enter entry rule..."),r(_,"class","svelte-1j669ox"),r(v,"type","button"),r(v,"class","remove-button svelte-1j669ox"),v.disabled=g=l[1].entry_rules.length===1,r(e,"class","rule-input svelte-1j669ox")},m(C,I){he(C,e,I),t(e,s),t(s,o),t(s,n),t(e,c),t(e,_),Q(_,l[1].entry_rules[l[48]]),t(e,d),t(e,v),We(h,v,null),m=!0,E||(D=[K(_,"input",A),K(v,"click",le)],E=!0)},p(C,I){l=C,I[0]&2&&_.value!==l[1].entry_rules[l[48]]&&Q(_,l[1].entry_rules[l[48]]),(!m||I[0]&2&&g!==(g=l[1].entry_rules.length===1))&&(v.disabled=g)},i(C){m||(ce(h.$$.fragment,C),m=!0)},o(C){me(h.$$.fragment,C),m=!1},d(C){C&&f(e),Fe(h),E=!1,al(D)}}}function ns(l){let e,s,a=l[48]+1+"",o,n,c,_,d,v,h,g,m,E,D;function A(){l[21].call(_,l[48])}h=new Vs({props:{size:16}});function le(){return l[22](l[48])}return{c(){e=u("div"),s=u("span"),o=P(a),n=P("."),c=k(),_=u("input"),d=k(),v=u("button"),Ge(h.$$.fragment),this.h()},l(C){e=i(C,"DIV",{class:!0});var I=p(e);s=i(I,"SPAN",{class:!0});var w=p(s);o=j(w,a),n=j(w,"."),w.forEach(f),c=b(I),_=i(I,"INPUT",{type:!0,placeholder:!0,class:!0}),d=b(I),v=i(I,"BUTTON",{type:!0,class:!0});var L=p(v);Xe(h.$$.fragment,L),L.forEach(f),I.forEach(f),this.h()},h(){r(s,"class","rule-number svelte-1j669ox"),r(_,"type","text"),r(_,"placeholder","Enter exit rule..."),r(_,"class","svelte-1j669ox"),r(v,"type","button"),r(v,"class","remove-button svelte-1j669ox"),v.disabled=g=l[1].exit_rules.length===1,r(e,"class","rule-input svelte-1j669ox")},m(C,I){he(C,e,I),t(e,s),t(s,o),t(s,n),t(e,c),t(e,_),Q(_,l[1].exit_rules[l[48]]),t(e,d),t(e,v),We(h,v,null),m=!0,E||(D=[K(_,"input",A),K(v,"click",le)],E=!0)},p(C,I){l=C,I[0]&2&&_.value!==l[1].exit_rules[l[48]]&&Q(_,l[1].exit_rules[l[48]]),(!m||I[0]&2&&g!==(g=l[1].exit_rules.length===1))&&(v.disabled=g)},i(C){m||(ce(h.$$.fragment,C),m=!0)},o(C){me(h.$$.fragment,C),m=!1},d(C){C&&f(e),Fe(h),E=!1,al(D)}}}function as(l){let e,s=Ue(l[1].indicators),a=[];for(let o=0;o<s.length;o+=1)a[o]=rs(es(l,s,o));return{c(){e=u("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=i(o,"DIV",{class:!0});var n=p(e);for(let c=0;c<a.length;c+=1)a[c].l(n);n.forEach(f),this.h()},h(){r(e,"class","tags svelte-1j669ox")},m(o,n){he(o,e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null)},p(o,n){if(n[0]&1026){s=Ue(o[1].indicators);let c;for(c=0;c<s.length;c+=1){const _=es(o,s,c);a[c]?a[c].p(_,n):(a[c]=rs(_),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=s.length}},d(o){o&&f(e),Lt(a,o)}}}function rs(l){let e,s=l[43]+"",a,o,n,c="×",_,d,v;function h(){return l[27](l[43])}return{c(){e=u("span"),a=P(s),o=k(),n=u("button"),n.textContent=c,_=k(),this.h()},l(g){e=i(g,"SPAN",{class:!0});var m=p(e);a=j(m,s),o=b(m),n=i(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1xh1gn3"&&(n.textContent=c),_=b(m),m.forEach(f),this.h()},h(){r(n,"type","button"),r(n,"class","svelte-1j669ox"),r(e,"class","tag removable svelte-1j669ox")},m(g,m){he(g,e,m),t(e,a),t(e,o),t(e,n),t(e,_),d||(v=K(n,"click",h),d=!0)},p(g,m){l=g,m[0]&2&&s!==(s=l[43]+"")&&fe(a,s)},d(g){g&&f(e),d=!1,v()}}}function os(l){let e,s,a,o="Win Rate (%)",n,c,_,d,v,h="Profit Factor",g,m,E,D,A,le="Avg Win ($)",C,I,w,L,N,Z="Avg Loss ($)",B,z,se,M,F,R="Max Drawdown (%)",W,Y,ae,oe;return{c(){e=u("div"),s=u("div"),a=u("label"),a.textContent=o,n=k(),c=u("input"),_=k(),d=u("div"),v=u("label"),v.textContent=h,g=k(),m=u("input"),E=k(),D=u("div"),A=u("label"),A.textContent=le,C=k(),I=u("input"),w=k(),L=u("div"),N=u("label"),N.textContent=Z,B=k(),z=u("input"),se=k(),M=u("div"),F=u("label"),F.textContent=R,W=k(),Y=u("input"),this.h()},l(y){e=i(y,"DIV",{class:!0});var x=p(e);s=i(x,"DIV",{class:!0});var S=p(s);a=i(S,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(a)!=="svelte-ixwmn1"&&(a.textContent=o),n=b(S),c=i(S,"INPUT",{id:!0,type:!0,step:!0,min:!0,max:!0,class:!0}),S.forEach(f),_=b(x),d=i(x,"DIV",{class:!0});var V=p(d);v=i(V,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(v)!=="svelte-1g1znu3"&&(v.textContent=h),g=b(V),m=i(V,"INPUT",{id:!0,type:!0,step:!0,min:!0,class:!0}),V.forEach(f),E=b(x),D=i(x,"DIV",{class:!0});var J=p(D);A=i(J,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(A)!=="svelte-bg5rjw"&&(A.textContent=le),C=b(J),I=i(J,"INPUT",{id:!0,type:!0,step:!0,min:!0,class:!0}),J.forEach(f),w=b(x),L=i(x,"DIV",{class:!0});var ge=p(L);N=i(ge,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(N)!=="svelte-2yvqhg"&&(N.textContent=Z),B=b(ge),z=i(ge,"INPUT",{id:!0,type:!0,step:!0,min:!0,class:!0}),ge.forEach(f),se=b(x),M=i(x,"DIV",{class:!0});var ee=p(M);F=i(ee,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(F)!=="svelte-s61zml"&&(F.textContent=R),W=b(ee),Y=i(ee,"INPUT",{id:!0,type:!0,step:!0,min:!0,max:!0,class:!0}),ee.forEach(f),x.forEach(f),this.h()},h(){r(a,"for","win_rate"),r(a,"class","svelte-1j669ox"),r(c,"id","win_rate"),r(c,"type","number"),r(c,"step","0.1"),r(c,"min","0"),r(c,"max","100"),r(c,"class","svelte-1j669ox"),r(s,"class","form-group svelte-1j669ox"),r(v,"for","profit_factor"),r(v,"class","svelte-1j669ox"),r(m,"id","profit_factor"),r(m,"type","number"),r(m,"step","0.1"),r(m,"min","0"),r(m,"class","svelte-1j669ox"),r(d,"class","form-group svelte-1j669ox"),r(A,"for","avg_win"),r(A,"class","svelte-1j669ox"),r(I,"id","avg_win"),r(I,"type","number"),r(I,"step","1"),r(I,"min","0"),r(I,"class","svelte-1j669ox"),r(D,"class","form-group svelte-1j669ox"),r(N,"for","avg_loss"),r(N,"class","svelte-1j669ox"),r(z,"id","avg_loss"),r(z,"type","number"),r(z,"step","1"),r(z,"min","0"),r(z,"class","svelte-1j669ox"),r(L,"class","form-group svelte-1j669ox"),r(F,"for","max_drawdown"),r(F,"class","svelte-1j669ox"),r(Y,"id","max_drawdown"),r(Y,"type","number"),r(Y,"step","0.1"),r(Y,"min","0"),r(Y,"max","100"),r(Y,"class","svelte-1j669ox"),r(M,"class","form-group svelte-1j669ox"),r(e,"class","backtest-grid svelte-1j669ox")},m(y,x){he(y,e,x),t(e,s),t(s,a),t(s,n),t(s,c),Q(c,l[1].backtest_results.win_rate),t(e,_),t(e,d),t(d,v),t(d,g),t(d,m),Q(m,l[1].backtest_results.profit_factor),t(e,E),t(e,D),t(D,A),t(D,C),t(D,I),Q(I,l[1].backtest_results.avg_win),t(e,w),t(e,L),t(L,N),t(L,B),t(L,z),Q(z,l[1].backtest_results.avg_loss),t(e,se),t(e,M),t(M,F),t(M,W),t(M,Y),Q(Y,l[1].backtest_results.max_drawdown),ae||(oe=[K(c,"input",l[29]),K(m,"input",l[30]),K(I,"input",l[31]),K(z,"input",l[32]),K(Y,"input",l[33])],ae=!0)},p(y,x){x[0]&2&&Ot(c.value)!==y[1].backtest_results.win_rate&&Q(c,y[1].backtest_results.win_rate),x[0]&2&&Ot(m.value)!==y[1].backtest_results.profit_factor&&Q(m,y[1].backtest_results.profit_factor),x[0]&2&&Ot(I.value)!==y[1].backtest_results.avg_win&&Q(I,y[1].backtest_results.avg_win),x[0]&2&&Ot(z.value)!==y[1].backtest_results.avg_loss&&Q(z,y[1].backtest_results.avg_loss),x[0]&2&&Ot(Y.value)!==y[1].backtest_results.max_drawdown&&Q(Y,y[1].backtest_results.max_drawdown)},d(y){y&&f(e),ae=!1,al(oe)}}}function is(l){let e,s=Ue(l[1].tags),a=[];for(let o=0;o<s.length;o+=1)a[o]=us(Yl(l,s,o));return{c(){e=u("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=i(o,"DIV",{class:!0});var n=p(e);for(let c=0;c<a.length;c+=1)a[c].l(n);n.forEach(f),this.h()},h(){r(e,"class","tags svelte-1j669ox")},m(o,n){he(o,e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null)},p(o,n){if(n[0]&4098){s=Ue(o[1].tags);let c;for(c=0;c<s.length;c+=1){const _=Yl(o,s,c);a[c]?a[c].p(_,n):(a[c]=us(_),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=s.length}},d(o){o&&f(e),Lt(a,o)}}}function us(l){let e,s=l[40]+"",a,o,n,c="×",_,d,v;function h(){return l[37](l[40])}return{c(){e=u("span"),a=P(s),o=k(),n=u("button"),n.textContent=c,_=k(),this.h()},l(g){e=i(g,"SPAN",{class:!0});var m=p(e);a=j(m,s),o=b(m),n=i(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(n)!=="svelte-1vvip9z"&&(n.textContent=c),_=b(m),m.forEach(f),this.h()},h(){r(n,"type","button"),r(n,"class","svelte-1j669ox"),r(e,"class","tag removable svelte-1j669ox")},m(g,m){he(g,e,m),t(e,a),t(e,o),t(e,n),t(e,_),d||(v=K(n,"click",h),d=!0)},p(g,m){l=g,m[0]&2&&s!==(s=l[40]+"")&&fe(a,s)},d(g){g&&f(e),d=!1,v()}}}function Zs(l){let e,s,a,o,n=l[0]?"Edit":"New",c,_,d,v,h,g,m,E,D,A="Basic Information",le,C,I,w="Strategy Name",L,N,Z,B,z,se,M="Strategy Type",F,R,W,Y="Scalping",ae,oe="Day Trading",y,x="Swing Trading",S,V="Position Trading",J,ge="Other",ee,ue,_e,Ce="Timeframe",U,ne,ie,we,Ie,de="Market Conditions",rt,H,be,ke,je,Qe="Entry Rules",pe,re,ve,Te,ze,Ke,Pe,xe,Ct="Exit Rules",wt,It,Ae,Re,ot,$t,Oe,Je,Xt="Risk Management",Gt,it,ut,Kt="Risk Management Rules",Rt,He,vt,lt,ht,Ht="Position Sizing",qt,Ze,Nt,st,ct,Qt="Indicators",Me,pt,ft,jt,ye,Bt="Add",Ve,Le,Ee,De,Se,$,X,G,qe,Pt,Ut="Additional Notes",rl,zt,dt,At,at,xt,bl="Tags",Mt,Tt,nt,Jt,mt,Zt="Add",Yt,ol,Dt,gt,bt,il,Ft,St,kt,el="Cancel",tl,yt,_t=l[0]?"Update":"Create",kl,Ol,ul,Ll,Gl;h=new Xs({props:{size:20}});let ll=Ue(l[1].entry_rules),$e=[];for(let T=0;T<ll.length;T+=1)$e[T]=ss(ls(l,ll,T));const Us=T=>me($e[T],1,1,()=>{$e[T]=null});Te=new Ml({props:{size:16}});let sl=Ue(l[1].exit_rules),Ne=[];for(let T=0;T<sl.length;T+=1)Ne[T]=ns(ts(l,sl,T));const zs=T=>me(Ne[T],1,1,()=>{Ne[T]=null});Re=new Ml({props:{size:16}});let Ye=l[1].indicators.length>0&&as(l),et=l[4]&&os(l),tt=l[1].tags.length>0&&is(l);return{c(){e=u("div"),s=u("div"),a=u("div"),o=u("h2"),c=P(n),_=P(" Strategy"),d=k(),v=u("button"),Ge(h.$$.fragment),g=k(),m=u("form"),E=u("div"),D=u("h3"),D.textContent=A,le=k(),C=u("div"),I=u("label"),I.textContent=w,L=k(),N=u("input"),Z=k(),B=u("div"),z=u("div"),se=u("label"),se.textContent=M,F=k(),R=u("select"),W=u("option"),W.textContent=Y,ae=u("option"),ae.textContent=oe,y=u("option"),y.textContent=x,S=u("option"),S.textContent=V,J=u("option"),J.textContent=ge,ee=k(),ue=u("div"),_e=u("label"),_e.textContent=Ce,U=k(),ne=u("input"),ie=k(),we=u("div"),Ie=u("label"),Ie.textContent=de,rt=k(),H=u("textarea"),be=k(),ke=u("div"),je=u("h3"),je.textContent=Qe,pe=k();for(let T=0;T<$e.length;T+=1)$e[T].c();re=k(),ve=u("button"),Ge(Te.$$.fragment),ze=P(`
					Add Entry Rule`),Ke=k(),Pe=u("div"),xe=u("h3"),xe.textContent=Ct,wt=k();for(let T=0;T<Ne.length;T+=1)Ne[T].c();It=k(),Ae=u("button"),Ge(Re.$$.fragment),ot=P(`
					Add Exit Rule`),$t=k(),Oe=u("div"),Je=u("h3"),Je.textContent=Xt,Gt=k(),it=u("div"),ut=u("label"),ut.textContent=Kt,Rt=k(),He=u("textarea"),vt=k(),lt=u("div"),ht=u("label"),ht.textContent=Ht,qt=k(),Ze=u("input"),Nt=k(),st=u("div"),ct=u("h3"),ct.textContent=Qt,Me=k(),pt=u("div"),ft=u("input"),jt=k(),ye=u("button"),ye.textContent=Bt,Ve=k(),Ye&&Ye.c(),Le=k(),Ee=u("div"),De=u("label"),Se=u("input"),$=P(`
					Include Backtest Results`),X=k(),et&&et.c(),G=k(),qe=u("div"),Pt=u("h3"),Pt.textContent=Ut,rl=k(),zt=u("div"),dt=u("textarea"),At=k(),at=u("div"),xt=u("h3"),xt.textContent=bl,Mt=k(),Tt=u("div"),nt=u("input"),Jt=k(),mt=u("button"),mt.textContent=Zt,Yt=k(),tt&&tt.c(),ol=k(),Dt=u("div"),gt=u("label"),bt=u("input"),il=P(`
					Active Strategy`),Ft=k(),St=u("div"),kt=u("button"),kt.textContent=el,tl=k(),yt=u("button"),kl=P(_t),Ol=P(" Strategy"),this.h()},l(T){e=i(T,"DIV",{class:!0});var te=p(e);s=i(te,"DIV",{class:!0});var q=p(s);a=i(q,"DIV",{class:!0});var Vt=p(a);o=i(Vt,"H2",{class:!0});var Bl=p(o);c=j(Bl,n),_=j(Bl," Strategy"),Bl.forEach(f),d=b(Vt),v=i(Vt,"BUTTON",{type:!0,class:!0});var Kl=p(v);Xe(h.$$.fragment,Kl),Kl.forEach(f),Vt.forEach(f),g=b(q),m=i(q,"FORM",{});var Be=p(m);E=i(Be,"DIV",{class:!0});var Wt=p(E);D=i(Wt,"H3",{class:!0,"data-svelte-h":!0}),O(D)!=="svelte-cic2su"&&(D.textContent=A),le=b(Wt),C=i(Wt,"DIV",{class:!0});var yl=p(C);I=i(yl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(I)!=="svelte-1q8agno"&&(I.textContent=w),L=b(yl),N=i(yl,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),yl.forEach(f),Z=b(Wt),B=i(Wt,"DIV",{class:!0});var El=p(B);z=i(El,"DIV",{class:!0});var Cl=p(z);se=i(Cl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(se)!=="svelte-19yuuqv"&&(se.textContent=M),F=b(Cl),R=i(Cl,"SELECT",{id:!0,class:!0});var cl=p(R);W=i(cl,"OPTION",{"data-svelte-h":!0}),O(W)!=="svelte-7lc21u"&&(W.textContent=Y),ae=i(cl,"OPTION",{"data-svelte-h":!0}),O(ae)!=="svelte-alar7q"&&(ae.textContent=oe),y=i(cl,"OPTION",{"data-svelte-h":!0}),O(y)!=="svelte-14er361"&&(y.textContent=x),S=i(cl,"OPTION",{"data-svelte-h":!0}),O(S)!=="svelte-2p3u2t"&&(S.textContent=V),J=i(cl,"OPTION",{"data-svelte-h":!0}),O(J)!=="svelte-902jce"&&(J.textContent=ge),cl.forEach(f),Cl.forEach(f),ee=b(El),ue=i(El,"DIV",{class:!0});var wl=p(ue);_e=i(wl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(_e)!=="svelte-8pp54i"&&(_e.textContent=Ce),U=b(wl),ne=i(wl,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),wl.forEach(f),El.forEach(f),ie=b(Wt),we=i(Wt,"DIV",{class:!0});var Il=p(we);Ie=i(Il,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(Ie)!=="svelte-crpd9d"&&(Ie.textContent=de),rt=b(Il),H=i(Il,"TEXTAREA",{id:!0,placeholder:!0,rows:!0,class:!0}),p(H).forEach(f),Il.forEach(f),Wt.forEach(f),be=b(Be),ke=i(Be,"DIV",{class:!0});var fl=p(ke);je=i(fl,"H3",{class:!0,"data-svelte-h":!0}),O(je)!=="svelte-1atbgrb"&&(je.textContent=Qe),pe=b(fl);for(let nl=0;nl<$e.length;nl+=1)$e[nl].l(fl);re=b(fl),ve=i(fl,"BUTTON",{type:!0,class:!0});var Ul=p(ve);Xe(Te.$$.fragment,Ul),ze=j(Ul,`
					Add Entry Rule`),Ul.forEach(f),fl.forEach(f),Ke=b(Be),Pe=i(Be,"DIV",{class:!0});var dl=p(Pe);xe=i(dl,"H3",{class:!0,"data-svelte-h":!0}),O(xe)!=="svelte-dsluxb"&&(xe.textContent=Ct),wt=b(dl);for(let nl=0;nl<Ne.length;nl+=1)Ne[nl].l(dl);It=b(dl),Ae=i(dl,"BUTTON",{type:!0,class:!0});var zl=p(Ae);Xe(Re.$$.fragment,zl),ot=j(zl,`
					Add Exit Rule`),zl.forEach(f),dl.forEach(f),$t=b(Be),Oe=i(Be,"DIV",{class:!0});var _l=p(Oe);Je=i(_l,"H3",{class:!0,"data-svelte-h":!0}),O(Je)!=="svelte-w1gcdw"&&(Je.textContent=Xt),Gt=b(_l),it=i(_l,"DIV",{class:!0});var Tl=p(it);ut=i(Tl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(ut)!=="svelte-1ontbta"&&(ut.textContent=Kt),Rt=b(Tl),He=i(Tl,"TEXTAREA",{id:!0,placeholder:!0,rows:!0,class:!0}),p(He).forEach(f),Tl.forEach(f),vt=b(_l),lt=i(_l,"DIV",{class:!0});var Dl=p(lt);ht=i(Dl,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),O(ht)!=="svelte-1wu0nez"&&(ht.textContent=Ht),qt=b(Dl),Ze=i(Dl,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Dl.forEach(f),_l.forEach(f),Nt=b(Be),st=i(Be,"DIV",{class:!0});var vl=p(st);ct=i(vl,"H3",{class:!0,"data-svelte-h":!0}),O(ct)!=="svelte-1lz3u12"&&(ct.textContent=Qt),Me=b(vl),pt=i(vl,"DIV",{class:!0});var Sl=p(pt);ft=i(Sl,"INPUT",{type:!0,placeholder:!0}),jt=b(Sl),ye=i(Sl,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(ye)!=="svelte-155gzlz"&&(ye.textContent=Bt),Sl.forEach(f),Ve=b(vl),Ye&&Ye.l(vl),vl.forEach(f),Le=b(Be),Ee=i(Be,"DIV",{class:!0});var $l=p(Ee);De=i($l,"LABEL",{class:!0});var Rl=p(De);Se=i(Rl,"INPUT",{type:!0}),$=j(Rl,`
					Include Backtest Results`),Rl.forEach(f),X=b($l),et&&et.l($l),$l.forEach(f),G=b(Be),qe=i(Be,"DIV",{class:!0});var Nl=p(qe);Pt=i(Nl,"H3",{class:!0,"data-svelte-h":!0}),O(Pt)!=="svelte-1bsqjng"&&(Pt.textContent=Ut),rl=b(Nl),zt=i(Nl,"DIV",{class:!0});var Ql=p(zt);dt=i(Ql,"TEXTAREA",{placeholder:!0,rows:!0,class:!0}),p(dt).forEach(f),Ql.forEach(f),Nl.forEach(f),At=b(Be),at=i(Be,"DIV",{class:!0});var hl=p(at);xt=i(hl,"H3",{class:!0,"data-svelte-h":!0}),O(xt)!=="svelte-1nl40cx"&&(xt.textContent=bl),Mt=b(hl),Tt=i(hl,"DIV",{class:!0});var jl=p(Tt);nt=i(jl,"INPUT",{type:!0,placeholder:!0}),Jt=b(jl),mt=i(jl,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(mt)!=="svelte-hhbt6a"&&(mt.textContent=Zt),jl.forEach(f),Yt=b(hl),tt&&tt.l(hl),hl.forEach(f),ol=b(Be),Dt=i(Be,"DIV",{class:!0});var Jl=p(Dt);gt=i(Jl,"LABEL",{class:!0});var Hl=p(gt);bt=i(Hl,"INPUT",{type:!0}),il=j(Hl,`
					Active Strategy`),Hl.forEach(f),Jl.forEach(f),Ft=b(Be),St=i(Be,"DIV",{class:!0});var Pl=p(St);kt=i(Pl,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),O(kt)!=="svelte-6z6n7q"&&(kt.textContent=el),tl=b(Pl),yt=i(Pl,"BUTTON",{type:!0,class:!0});var ql=p(yt);kl=j(ql,_t),Ol=j(ql," Strategy"),ql.forEach(f),Pl.forEach(f),Be.forEach(f),q.forEach(f),te.forEach(f),this.h()},h(){r(o,"class","svelte-1j669ox"),r(v,"type","button"),r(v,"class","close-button svelte-1j669ox"),r(a,"class","form-header svelte-1j669ox"),r(D,"class","svelte-1j669ox"),r(I,"for","title"),r(I,"class","svelte-1j669ox"),r(N,"id","title"),r(N,"type","text"),r(N,"placeholder","e.g., Morning Gap Strategy"),N.required=!0,r(N,"class","svelte-1j669ox"),r(C,"class","form-group svelte-1j669ox"),r(se,"for","strategy_type"),r(se,"class","svelte-1j669ox"),W.__value="scalping",Q(W,W.__value),ae.__value="daytrading",Q(ae,ae.__value),y.__value="swing",Q(y,y.__value),S.__value="position",Q(S,S.__value),J.__value="other",Q(J,J.__value),r(R,"id","strategy_type"),r(R,"class","svelte-1j669ox"),l[1].strategy_type===void 0&&Ps(()=>l[16].call(R)),r(z,"class","form-group svelte-1j669ox"),r(_e,"for","timeframe"),r(_e,"class","svelte-1j669ox"),r(ne,"id","timeframe"),r(ne,"type","text"),r(ne,"placeholder","e.g., 5min, 15min"),ne.required=!0,r(ne,"class","svelte-1j669ox"),r(ue,"class","form-group svelte-1j669ox"),r(B,"class","form-row svelte-1j669ox"),r(Ie,"for","market_conditions"),r(Ie,"class","svelte-1j669ox"),r(H,"id","market_conditions"),r(H,"placeholder","Describe when this strategy works best..."),r(H,"rows","3"),H.required=!0,r(H,"class","svelte-1j669ox"),r(we,"class","form-group svelte-1j669ox"),r(E,"class","form-section svelte-1j669ox"),r(je,"class","svelte-1j669ox"),r(ve,"type","button"),r(ve,"class","add-button svelte-1j669ox"),r(ke,"class","form-section svelte-1j669ox"),r(xe,"class","svelte-1j669ox"),r(Ae,"type","button"),r(Ae,"class","add-button svelte-1j669ox"),r(Pe,"class","form-section svelte-1j669ox"),r(Je,"class","svelte-1j669ox"),r(ut,"for","risk_management"),r(ut,"class","svelte-1j669ox"),r(He,"id","risk_management"),r(He,"placeholder","e.g., 1% account risk per trade, max 3 concurrent positions"),r(He,"rows","2"),He.required=!0,r(He,"class","svelte-1j669ox"),r(it,"class","form-group svelte-1j669ox"),r(ht,"for","position_sizing"),r(ht,"class","svelte-1j669ox"),r(Ze,"id","position_sizing"),r(Ze,"type","text"),r(Ze,"placeholder","e.g., Risk / (Entry - Stop Loss) = Share size"),Ze.required=!0,r(Ze,"class","svelte-1j669ox"),r(lt,"class","form-group svelte-1j669ox"),r(Oe,"class","form-section svelte-1j669ox"),r(ct,"class","svelte-1j669ox"),r(ft,"type","text"),r(ft,"placeholder","Add indicator (e.g., RSI, MACD, VWAP)"),r(ye,"type","button"),r(ye,"class","add-tag-button svelte-1j669ox"),r(pt,"class","indicator-input svelte-1j669ox"),r(st,"class","form-section svelte-1j669ox"),r(Se,"type","checkbox"),r(De,"class","checkbox-label svelte-1j669ox"),r(Ee,"class","form-section svelte-1j669ox"),r(Pt,"class","svelte-1j669ox"),r(dt,"placeholder","Any additional notes, observations, or reminders..."),r(dt,"rows","4"),r(dt,"class","svelte-1j669ox"),r(zt,"class","form-group svelte-1j669ox"),r(qe,"class","form-section svelte-1j669ox"),r(xt,"class","svelte-1j669ox"),r(nt,"type","text"),r(nt,"placeholder","Add tags..."),r(mt,"type","button"),r(mt,"class","add-tag-button svelte-1j669ox"),r(Tt,"class","tag-input-container svelte-1j669ox"),r(at,"class","form-section svelte-1j669ox"),r(bt,"type","checkbox"),r(gt,"class","checkbox-label svelte-1j669ox"),r(Dt,"class","form-section svelte-1j669ox"),r(kt,"type","button"),r(kt,"class","cancel-button svelte-1j669ox"),r(yt,"type","submit"),r(yt,"class","save-button svelte-1j669ox"),r(St,"class","form-actions svelte-1j669ox"),r(s,"class","form-card card svelte-1j669ox"),r(e,"class","form-container svelte-1j669ox")},m(T,te){he(T,e,te),t(e,s),t(s,a),t(a,o),t(o,c),t(o,_),t(a,d),t(a,v),We(h,v,null),t(s,g),t(s,m),t(m,E),t(E,D),t(E,le),t(E,C),t(C,I),t(C,L),t(C,N),Q(N,l[1].title),t(E,Z),t(E,B),t(B,z),t(z,se),t(z,F),t(z,R),t(R,W),t(R,ae),t(R,y),t(R,S),t(R,J),Vl(R,l[1].strategy_type,!0),t(B,ee),t(B,ue),t(ue,_e),t(ue,U),t(ue,ne),Q(ne,l[1].timeframe),t(E,ie),t(E,we),t(we,Ie),t(we,rt),t(we,H),Q(H,l[1].market_conditions),t(m,be),t(m,ke),t(ke,je),t(ke,pe);for(let q=0;q<$e.length;q+=1)$e[q]&&$e[q].m(ke,null);t(ke,re),t(ke,ve),We(Te,ve,null),t(ve,ze),t(m,Ke),t(m,Pe),t(Pe,xe),t(Pe,wt);for(let q=0;q<Ne.length;q+=1)Ne[q]&&Ne[q].m(Pe,null);t(Pe,It),t(Pe,Ae),We(Re,Ae,null),t(Ae,ot),t(m,$t),t(m,Oe),t(Oe,Je),t(Oe,Gt),t(Oe,it),t(it,ut),t(it,Rt),t(it,He),Q(He,l[1].risk_management),t(Oe,vt),t(Oe,lt),t(lt,ht),t(lt,qt),t(lt,Ze),Q(Ze,l[1].position_sizing),t(m,Nt),t(m,st),t(st,ct),t(st,Me),t(st,pt),t(pt,ft),Q(ft,l[3]),t(pt,jt),t(pt,ye),t(st,Ve),Ye&&Ye.m(st,null),t(m,Le),t(m,Ee),t(Ee,De),t(De,Se),Se.checked=l[4],t(De,$),t(Ee,X),et&&et.m(Ee,null),t(m,G),t(m,qe),t(qe,Pt),t(qe,rl),t(qe,zt),t(zt,dt),Q(dt,l[1].notes),t(m,At),t(m,at),t(at,xt),t(at,Mt),t(at,Tt),t(Tt,nt),Q(nt,l[2]),t(Tt,Jt),t(Tt,mt),t(at,Yt),tt&&tt.m(at,null),t(m,ol),t(m,Dt),t(Dt,gt),t(gt,bt),bt.checked=l[1].is_active,t(gt,il),t(m,Ft),t(m,St),t(St,kt),t(St,tl),t(St,yt),t(yt,kl),t(yt,Ol),ul=!0,Ll||(Gl=[K(v,"click",l[14]),K(N,"input",l[15]),K(R,"change",l[16]),K(ne,"input",l[17]),K(H,"input",l[18]),K(ve,"click",l[5]),K(Ae,"click",l[7]),K(He,"input",l[23]),K(Ze,"input",l[24]),K(ft,"input",l[25]),K(ft,"keypress",l[26]),K(ye,"click",l[9]),K(Se,"change",l[28]),K(dt,"input",l[34]),K(nt,"input",l[35]),K(nt,"keypress",l[36]),K(mt,"click",l[11]),K(bt,"change",l[38]),K(kt,"click",l[14]),K(m,"submit",Rs(l[13]))],Ll=!0)},p(T,te){if((!ul||te[0]&1)&&n!==(n=T[0]?"Edit":"New")&&fe(c,n),te[0]&2&&N.value!==T[1].title&&Q(N,T[1].title),te[0]&2&&Vl(R,T[1].strategy_type),te[0]&2&&ne.value!==T[1].timeframe&&Q(ne,T[1].timeframe),te[0]&2&&Q(H,T[1].market_conditions),te[0]&66){ll=Ue(T[1].entry_rules);let q;for(q=0;q<ll.length;q+=1){const Vt=ls(T,ll,q);$e[q]?($e[q].p(Vt,te),ce($e[q],1)):($e[q]=ss(Vt),$e[q].c(),ce($e[q],1),$e[q].m(ke,re))}for(ml(),q=ll.length;q<$e.length;q+=1)Us(q);gl()}if(te[0]&258){sl=Ue(T[1].exit_rules);let q;for(q=0;q<sl.length;q+=1){const Vt=ts(T,sl,q);Ne[q]?(Ne[q].p(Vt,te),ce(Ne[q],1)):(Ne[q]=ns(Vt),Ne[q].c(),ce(Ne[q],1),Ne[q].m(Pe,It))}for(ml(),q=sl.length;q<Ne.length;q+=1)zs(q);gl()}te[0]&2&&Q(He,T[1].risk_management),te[0]&2&&Ze.value!==T[1].position_sizing&&Q(Ze,T[1].position_sizing),te[0]&8&&ft.value!==T[3]&&Q(ft,T[3]),T[1].indicators.length>0?Ye?Ye.p(T,te):(Ye=as(T),Ye.c(),Ye.m(st,null)):Ye&&(Ye.d(1),Ye=null),te[0]&16&&(Se.checked=T[4]),T[4]?et?et.p(T,te):(et=os(T),et.c(),et.m(Ee,null)):et&&(et.d(1),et=null),te[0]&2&&Q(dt,T[1].notes),te[0]&4&&nt.value!==T[2]&&Q(nt,T[2]),T[1].tags.length>0?tt?tt.p(T,te):(tt=is(T),tt.c(),tt.m(at,null)):tt&&(tt.d(1),tt=null),te[0]&2&&(bt.checked=T[1].is_active),(!ul||te[0]&1)&&_t!==(_t=T[0]?"Update":"Create")&&fe(kl,_t)},i(T){if(!ul){ce(h.$$.fragment,T);for(let te=0;te<ll.length;te+=1)ce($e[te]);ce(Te.$$.fragment,T);for(let te=0;te<sl.length;te+=1)ce(Ne[te]);ce(Re.$$.fragment,T),ul=!0}},o(T){me(h.$$.fragment,T),$e=$e.filter(Boolean);for(let te=0;te<$e.length;te+=1)me($e[te]);me(Te.$$.fragment,T),Ne=Ne.filter(Boolean);for(let te=0;te<Ne.length;te+=1)me(Ne[te]);me(Re.$$.fragment,T),ul=!1},d(T){T&&f(e),Fe(h),Lt($e,T),Fe(Te),Lt(Ne,T),Fe(Re),Ye&&Ye.d(),et&&et.d(),tt&&tt.d(),Ll=!1,al(Gl)}}}function Ys(l,e,s){let{playbook:a=null}=e;const o=As();let n={title:"",strategy_type:"daytrading",timeframe:"",market_conditions:"",entry_rules:[""],exit_rules:[""],risk_management:"",position_sizing:"",indicators:[],notes:"",backtest_results:{win_rate:0,profit_factor:0,avg_win:0,avg_loss:0,max_drawdown:0},tags:[],is_active:!0},c="",_="",d=!1;a&&(n={...a,entry_rules:[...a.entry_rules],exit_rules:[...a.exit_rules],indicators:[...a.indicators],tags:[...a.tags],backtest_results:a.backtest_results||{win_rate:0,profit_factor:0,avg_win:0,avg_loss:0,max_drawdown:0}},d=!!a.backtest_results);function v(){s(1,n.entry_rules=[...n.entry_rules,""],n)}function h(U){s(1,n.entry_rules=n.entry_rules.filter((ne,ie)=>ie!==U),n)}function g(){s(1,n.exit_rules=[...n.exit_rules,""],n)}function m(U){s(1,n.exit_rules=n.exit_rules.filter((ne,ie)=>ie!==U),n)}function E(){_.trim()&&!n.indicators.includes(_.trim())&&(s(1,n.indicators=[...n.indicators,_.trim()],n),s(3,_=""))}function D(U){s(1,n.indicators=n.indicators.filter(ne=>ne!==U),n)}function A(){c.trim()&&!n.tags.includes(c.trim())&&(s(1,n.tags=[...n.tags,c.trim()],n),s(2,c=""))}function le(U){s(1,n.tags=n.tags.filter(ne=>ne!==U),n)}function C(){const U={...n,entry_rules:n.entry_rules.filter(ne=>ne.trim()),exit_rules:n.exit_rules.filter(ne=>ne.trim()),backtest_results:d?n.backtest_results:void 0,updated_at:new Date().toISOString()};o("save",{playbook:U})}function I(){o("cancel")}function w(){n.title=this.value,s(1,n)}function L(){n.strategy_type=xs(this),s(1,n)}function N(){n.timeframe=this.value,s(1,n)}function Z(){n.market_conditions=this.value,s(1,n)}function B(U){n.entry_rules[U]=this.value,s(1,n)}const z=U=>h(U);function se(U){n.exit_rules[U]=this.value,s(1,n)}const M=U=>m(U);function F(){n.risk_management=this.value,s(1,n)}function R(){n.position_sizing=this.value,s(1,n)}function W(){_=this.value,s(3,_)}const Y=U=>U.key==="Enter"&&(U.preventDefault(),E()),ae=U=>D(U);function oe(){d=this.checked,s(4,d)}function y(){n.backtest_results.win_rate=Ot(this.value),s(1,n)}function x(){n.backtest_results.profit_factor=Ot(this.value),s(1,n)}function S(){n.backtest_results.avg_win=Ot(this.value),s(1,n)}function V(){n.backtest_results.avg_loss=Ot(this.value),s(1,n)}function J(){n.backtest_results.max_drawdown=Ot(this.value),s(1,n)}function ge(){n.notes=this.value,s(1,n)}function ee(){c=this.value,s(2,c)}const ue=U=>U.key==="Enter"&&(U.preventDefault(),A()),_e=U=>le(U);function Ce(){n.is_active=this.checked,s(1,n)}return l.$$set=U=>{"playbook"in U&&s(0,a=U.playbook)},[a,n,c,_,d,v,h,g,m,E,D,A,le,C,I,w,L,N,Z,B,z,se,M,F,R,W,Y,ae,oe,y,x,S,V,J,ge,ee,ue,_e,Ce]}class en extends Fl{constructor(e){super(),Wl(this,e,Ys,Zs,Xl,{playbook:0},null,[-1,-1])}}function cs(l,e,s){const a=l.slice();return a[5]=e[s],a}function fs(l,e,s){const a=l.slice();return a[8]=e[s],a}function ds(l,e,s){const a=l.slice();return a[11]=e[s],a}function _s(l,e,s){const a=l.slice();return a[11]=e[s],a}function vs(l){let e,s=l[11]+"",a;return{c(){e=u("li"),a=P(s),this.h()},l(o){e=i(o,"LI",{class:!0});var n=p(e);a=j(n,s),n.forEach(f),this.h()},h(){r(e,"class","svelte-nnom24")},m(o,n){he(o,e,n),t(e,a)},p(o,n){n&1&&s!==(s=o[11]+"")&&fe(a,s)},d(o){o&&f(e)}}}function hs(l){let e,s=l[11]+"",a;return{c(){e=u("li"),a=P(s),this.h()},l(o){e=i(o,"LI",{class:!0});var n=p(e);a=j(n,s),n.forEach(f),this.h()},h(){r(e,"class","svelte-nnom24")},m(o,n){he(o,e,n),t(e,a)},p(o,n){n&1&&s!==(s=o[11]+"")&&fe(a,s)},d(o){o&&f(e)}}}function ps(l){let e,s,a="Indicators",o,n,c=Ue(l[0].indicators),_=[];for(let d=0;d<c.length;d+=1)_[d]=ms(fs(l,c,d));return{c(){e=u("section"),s=u("h3"),s.textContent=a,o=k(),n=u("div");for(let d=0;d<_.length;d+=1)_[d].c();this.h()},l(d){e=i(d,"SECTION",{class:!0});var v=p(e);s=i(v,"H3",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-1lz3u12"&&(s.textContent=a),o=b(v),n=i(v,"DIV",{class:!0});var h=p(n);for(let g=0;g<_.length;g+=1)_[g].l(h);h.forEach(f),v.forEach(f),this.h()},h(){r(s,"class","svelte-nnom24"),r(n,"class","indicators svelte-nnom24"),r(e,"class","detail-section svelte-nnom24")},m(d,v){he(d,e,v),t(e,s),t(e,o),t(e,n);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(n,null)},p(d,v){if(v&1){c=Ue(d[0].indicators);let h;for(h=0;h<c.length;h+=1){const g=fs(d,c,h);_[h]?_[h].p(g,v):(_[h]=ms(g),_[h].c(),_[h].m(n,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=c.length}},d(d){d&&f(e),Lt(_,d)}}}function ms(l){let e,s=l[8]+"",a;return{c(){e=u("span"),a=P(s),this.h()},l(o){e=i(o,"SPAN",{class:!0});var n=p(e);a=j(n,s),n.forEach(f),this.h()},h(){r(e,"class","indicator-tag svelte-nnom24")},m(o,n){he(o,e,n),t(e,a)},p(o,n){n&1&&s!==(s=o[8]+"")&&fe(a,s)},d(o){o&&f(e)}}}function gs(l){let e,s,a="Backtest Results",o,n,c,_,d="Win Rate",v,h,g=l[0].backtest_results.win_rate+"",m,E,D,A,le,C="Profit Factor",I,w,L=l[0].backtest_results.profit_factor+"",N,Z,B,z,se="Avg Win",M,F,R,W=l[0].backtest_results.avg_win+"",Y,ae,oe,y,x="Avg Loss",S,V,J,ge=l[0].backtest_results.avg_loss+"",ee,ue,_e,Ce,U="Max Drawdown",ne,ie,we,Ie=l[0].backtest_results.max_drawdown+"",de,rt;return{c(){e=u("section"),s=u("h3"),s.textContent=a,o=k(),n=u("div"),c=u("div"),_=u("span"),_.textContent=d,v=k(),h=u("span"),m=P(g),E=P("%"),D=k(),A=u("div"),le=u("span"),le.textContent=C,I=k(),w=u("span"),N=P(L),Z=k(),B=u("div"),z=u("span"),z.textContent=se,M=k(),F=u("span"),R=P("$"),Y=P(W),ae=k(),oe=u("div"),y=u("span"),y.textContent=x,S=k(),V=u("span"),J=P("-$"),ee=P(ge),ue=k(),_e=u("div"),Ce=u("span"),Ce.textContent=U,ne=k(),ie=u("span"),we=P("-"),de=P(Ie),rt=P("%"),this.h()},l(H){e=i(H,"SECTION",{class:!0});var be=p(e);s=i(be,"H3",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-qmo8sh"&&(s.textContent=a),o=b(be),n=i(be,"DIV",{class:!0});var ke=p(n);c=i(ke,"DIV",{class:!0});var je=p(c);_=i(je,"SPAN",{class:!0,"data-svelte-h":!0}),O(_)!=="svelte-153e3ug"&&(_.textContent=d),v=b(je),h=i(je,"SPAN",{class:!0});var Qe=p(h);m=j(Qe,g),E=j(Qe,"%"),Qe.forEach(f),je.forEach(f),D=b(ke),A=i(ke,"DIV",{class:!0});var pe=p(A);le=i(pe,"SPAN",{class:!0,"data-svelte-h":!0}),O(le)!=="svelte-hrndgd"&&(le.textContent=C),I=b(pe),w=i(pe,"SPAN",{class:!0});var re=p(w);N=j(re,L),re.forEach(f),pe.forEach(f),Z=b(ke),B=i(ke,"DIV",{class:!0});var ve=p(B);z=i(ve,"SPAN",{class:!0,"data-svelte-h":!0}),O(z)!=="svelte-w95dc6"&&(z.textContent=se),M=b(ve),F=i(ve,"SPAN",{class:!0});var Te=p(F);R=j(Te,"$"),Y=j(Te,W),Te.forEach(f),ve.forEach(f),ae=b(ke),oe=i(ke,"DIV",{class:!0});var ze=p(oe);y=i(ze,"SPAN",{class:!0,"data-svelte-h":!0}),O(y)!=="svelte-1jthz61"&&(y.textContent=x),S=b(ze),V=i(ze,"SPAN",{class:!0});var Ke=p(V);J=j(Ke,"-$"),ee=j(Ke,ge),Ke.forEach(f),ze.forEach(f),ue=b(ke),_e=i(ke,"DIV",{class:!0});var Pe=p(_e);Ce=i(Pe,"SPAN",{class:!0,"data-svelte-h":!0}),O(Ce)!=="svelte-1rpoars"&&(Ce.textContent=U),ne=b(Pe),ie=i(Pe,"SPAN",{class:!0});var xe=p(ie);we=j(xe,"-"),de=j(xe,Ie),rt=j(xe,"%"),xe.forEach(f),Pe.forEach(f),ke.forEach(f),be.forEach(f),this.h()},h(){r(s,"class","svelte-nnom24"),r(_,"class","metric-label svelte-nnom24"),r(h,"class","metric-value svelte-nnom24"),Et(h,"positive",l[0].backtest_results.win_rate>=50),r(c,"class","metric svelte-nnom24"),r(le,"class","metric-label svelte-nnom24"),r(w,"class","metric-value svelte-nnom24"),Et(w,"positive",l[0].backtest_results.profit_factor>=1.5),r(A,"class","metric svelte-nnom24"),r(z,"class","metric-label svelte-nnom24"),r(F,"class","metric-value positive svelte-nnom24"),r(B,"class","metric svelte-nnom24"),r(y,"class","metric-label svelte-nnom24"),r(V,"class","metric-value negative svelte-nnom24"),r(oe,"class","metric svelte-nnom24"),r(Ce,"class","metric-label svelte-nnom24"),r(ie,"class","metric-value negative svelte-nnom24"),r(_e,"class","metric svelte-nnom24"),r(n,"class","backtest-results svelte-nnom24"),r(e,"class","detail-section svelte-nnom24")},m(H,be){he(H,e,be),t(e,s),t(e,o),t(e,n),t(n,c),t(c,_),t(c,v),t(c,h),t(h,m),t(h,E),t(n,D),t(n,A),t(A,le),t(A,I),t(A,w),t(w,N),t(n,Z),t(n,B),t(B,z),t(B,M),t(B,F),t(F,R),t(F,Y),t(n,ae),t(n,oe),t(oe,y),t(oe,S),t(oe,V),t(V,J),t(V,ee),t(n,ue),t(n,_e),t(_e,Ce),t(_e,ne),t(_e,ie),t(ie,we),t(ie,de),t(ie,rt)},p(H,be){be&1&&g!==(g=H[0].backtest_results.win_rate+"")&&fe(m,g),be&1&&Et(h,"positive",H[0].backtest_results.win_rate>=50),be&1&&L!==(L=H[0].backtest_results.profit_factor+"")&&fe(N,L),be&1&&Et(w,"positive",H[0].backtest_results.profit_factor>=1.5),be&1&&W!==(W=H[0].backtest_results.avg_win+"")&&fe(Y,W),be&1&&ge!==(ge=H[0].backtest_results.avg_loss+"")&&fe(ee,ge),be&1&&Ie!==(Ie=H[0].backtest_results.max_drawdown+"")&&fe(de,Ie)},d(H){H&&f(e)}}}function bs(l){let e,s,a="Notes",o,n,c=l[0].notes+"",_;return{c(){e=u("section"),s=u("h3"),s.textContent=a,o=k(),n=u("p"),_=P(c),this.h()},l(d){e=i(d,"SECTION",{class:!0});var v=p(e);s=i(v,"H3",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-2havtt"&&(s.textContent=a),o=b(v),n=i(v,"P",{class:!0});var h=p(n);_=j(h,c),h.forEach(f),v.forEach(f),this.h()},h(){r(s,"class","svelte-nnom24"),r(n,"class","notes svelte-nnom24"),r(e,"class","detail-section svelte-nnom24")},m(d,v){he(d,e,v),t(e,s),t(e,o),t(e,n),t(n,_)},p(d,v){v&1&&c!==(c=d[0].notes+"")&&fe(_,c)},d(d){d&&f(e)}}}function ks(l){let e,s,a="Tags",o,n,c=Ue(l[0].tags),_=[];for(let d=0;d<c.length;d+=1)_[d]=ys(cs(l,c,d));return{c(){e=u("section"),s=u("h3"),s.textContent=a,o=k(),n=u("div");for(let d=0;d<_.length;d+=1)_[d].c();this.h()},l(d){e=i(d,"SECTION",{class:!0});var v=p(e);s=i(v,"H3",{class:!0,"data-svelte-h":!0}),O(s)!=="svelte-1nl40cx"&&(s.textContent=a),o=b(v),n=i(v,"DIV",{class:!0});var h=p(n);for(let g=0;g<_.length;g+=1)_[g].l(h);h.forEach(f),v.forEach(f),this.h()},h(){r(s,"class","svelte-nnom24"),r(n,"class","tags svelte-nnom24"),r(e,"class","detail-section svelte-nnom24")},m(d,v){he(d,e,v),t(e,s),t(e,o),t(e,n);for(let h=0;h<_.length;h+=1)_[h]&&_[h].m(n,null)},p(d,v){if(v&1){c=Ue(d[0].tags);let h;for(h=0;h<c.length;h+=1){const g=cs(d,c,h);_[h]?_[h].p(g,v):(_[h]=ys(g),_[h].c(),_[h].m(n,null))}for(;h<_.length;h+=1)_[h].d(1);_.length=c.length}},d(d){d&&f(e),Lt(_,d)}}}function ys(l){let e,s=l[5]+"",a;return{c(){e=u("span"),a=P(s),this.h()},l(o){e=i(o,"SPAN",{class:!0});var n=p(e);a=j(n,s),n.forEach(f),this.h()},h(){r(e,"class","tag svelte-nnom24")},m(o,n){he(o,e,n),t(e,a)},p(o,n){n&1&&s!==(s=o[5]+"")&&fe(a,s)},d(o){o&&f(e)}}}function tn(l){let e,s,a,o,n=l[0].title+"",c,_,d,v,h=l[0].strategy_type+"",g,m,E,D=l[0].timeframe+"",A,le,C,I=l[0].is_active?"Active":"Inactive",w,L,N,Z,B,z,se,M,F,R,W,Y,ae,oe,y="Market Conditions",x,S,V=l[0].market_conditions+"",J,ge,ee,ue,_e,Ce,U,ne,ie,we,Ie,de,rt,H,be,ke,je,Qe,pe="Risk Management",re,ve,Te,ze,Ke="Risk Rules",Pe,xe,Ct=l[0].risk_management+"",wt,It,Ae,Re,ot="Position Sizing",$t,Oe,Je=l[0].position_sizing+"",Xt,Gt,it,ut,Kt,Rt,He,vt,lt,ht,Ht=xl(l[0].created_at)+"",qt,Ze,Nt,st,ct=xl(l[0].updated_at)+"",Qt,Me,pt,ft;B=new Os({props:{size:18}}),M=new Ls({props:{size:18}}),W=new Bs({props:{size:18}}),_e=new Gs({props:{size:18}});let jt=Ue(l[0].entry_rules),ye=[];for(let $=0;$<jt.length;$+=1)ye[$]=vs(_s(l,jt,$));de=new Ks({props:{size:18}});let Bt=Ue(l[0].exit_rules),Ve=[];for(let $=0;$<Bt.length;$+=1)Ve[$]=hs(ds(l,Bt,$));let Le=l[0].indicators.length>0&&ps(l),Ee=l[0].backtest_results&&gs(l),De=l[0].notes&&bs(l),Se=l[0].tags.length>0&&ks(l);return{c(){e=u("div"),s=u("div"),a=u("div"),o=u("h2"),c=P(n),_=k(),d=u("div"),v=u("span"),g=P(h),m=k(),E=u("span"),A=P(D),le=k(),C=u("span"),w=P(I),L=k(),N=u("div"),Z=u("button"),Ge(B.$$.fragment),z=k(),se=u("button"),Ge(M.$$.fragment),F=k(),R=u("button"),Ge(W.$$.fragment),Y=k(),ae=u("section"),oe=u("h3"),oe.textContent=y,x=k(),S=u("p"),J=P(V),ge=k(),ee=u("section"),ue=u("h3"),Ge(_e.$$.fragment),Ce=P(" Entry Rules"),U=k(),ne=u("ol");for(let $=0;$<ye.length;$+=1)ye[$].c();ie=k(),we=u("section"),Ie=u("h3"),Ge(de.$$.fragment),rt=P(" Exit Rules"),H=k(),be=u("ol");for(let $=0;$<Ve.length;$+=1)Ve[$].c();ke=k(),je=u("section"),Qe=u("h3"),Qe.textContent=pe,re=k(),ve=u("div"),Te=u("div"),ze=u("h4"),ze.textContent=Ke,Pe=k(),xe=u("p"),wt=P(Ct),It=k(),Ae=u("div"),Re=u("h4"),Re.textContent=ot,$t=k(),Oe=u("p"),Xt=P(Je),Gt=k(),Le&&Le.c(),it=k(),Ee&&Ee.c(),ut=k(),De&&De.c(),Kt=k(),Se&&Se.c(),Rt=k(),He=u("div"),vt=u("div"),lt=u("span"),ht=P("Created: "),qt=P(Ht),Ze=k(),Nt=u("span"),st=P("Updated: "),Qt=P(ct),this.h()},l($){e=i($,"DIV",{class:!0});var X=p(e);s=i(X,"DIV",{class:!0});var G=p(s);a=i(G,"DIV",{});var qe=p(a);o=i(qe,"H2",{class:!0});var Pt=p(o);c=j(Pt,n),Pt.forEach(f),_=b(qe),d=i(qe,"DIV",{class:!0});var Ut=p(d);v=i(Ut,"SPAN",{class:!0});var rl=p(v);g=j(rl,h),rl.forEach(f),m=b(Ut),E=i(Ut,"SPAN",{});var zt=p(E);A=j(zt,D),zt.forEach(f),le=b(Ut),C=i(Ut,"SPAN",{class:!0});var dt=p(C);w=j(dt,I),dt.forEach(f),Ut.forEach(f),qe.forEach(f),L=b(G),N=i(G,"DIV",{class:!0});var At=p(N);Z=i(At,"BUTTON",{class:!0,title:!0});var at=p(Z);Xe(B.$$.fragment,at),at.forEach(f),z=b(At),se=i(At,"BUTTON",{class:!0,title:!0});var xt=p(se);Xe(M.$$.fragment,xt),xt.forEach(f),F=b(At),R=i(At,"BUTTON",{class:!0,title:!0});var bl=p(R);Xe(W.$$.fragment,bl),bl.forEach(f),At.forEach(f),G.forEach(f),Y=b(X),ae=i(X,"SECTION",{class:!0});var Mt=p(ae);oe=i(Mt,"H3",{class:!0,"data-svelte-h":!0}),O(oe)!=="svelte-1ht5w2s"&&(oe.textContent=y),x=b(Mt),S=i(Mt,"P",{class:!0});var Tt=p(S);J=j(Tt,V),Tt.forEach(f),Mt.forEach(f),ge=b(X),ee=i(X,"SECTION",{class:!0});var nt=p(ee);ue=i(nt,"H3",{class:!0});var Jt=p(ue);Xe(_e.$$.fragment,Jt),Ce=j(Jt," Entry Rules"),Jt.forEach(f),U=b(nt),ne=i(nt,"OL",{class:!0});var mt=p(ne);for(let _t=0;_t<ye.length;_t+=1)ye[_t].l(mt);mt.forEach(f),nt.forEach(f),ie=b(X),we=i(X,"SECTION",{class:!0});var Zt=p(we);Ie=i(Zt,"H3",{class:!0});var Yt=p(Ie);Xe(de.$$.fragment,Yt),rt=j(Yt," Exit Rules"),Yt.forEach(f),H=b(Zt),be=i(Zt,"OL",{class:!0});var ol=p(be);for(let _t=0;_t<Ve.length;_t+=1)Ve[_t].l(ol);ol.forEach(f),Zt.forEach(f),ke=b(X),je=i(X,"SECTION",{class:!0});var Dt=p(je);Qe=i(Dt,"H3",{class:!0,"data-svelte-h":!0}),O(Qe)!=="svelte-w1gcdw"&&(Qe.textContent=pe),re=b(Dt),ve=i(Dt,"DIV",{class:!0});var gt=p(ve);Te=i(gt,"DIV",{class:!0});var bt=p(Te);ze=i(bt,"H4",{class:!0,"data-svelte-h":!0}),O(ze)!=="svelte-zc8vxa"&&(ze.textContent=Ke),Pe=b(bt),xe=i(bt,"P",{class:!0});var il=p(xe);wt=j(il,Ct),il.forEach(f),bt.forEach(f),It=b(gt),Ae=i(gt,"DIV",{class:!0});var Ft=p(Ae);Re=i(Ft,"H4",{class:!0,"data-svelte-h":!0}),O(Re)!=="svelte-qvu9t3"&&(Re.textContent=ot),$t=b(Ft),Oe=i(Ft,"P",{class:!0});var St=p(Oe);Xt=j(St,Je),St.forEach(f),Ft.forEach(f),gt.forEach(f),Dt.forEach(f),Gt=b(X),Le&&Le.l(X),it=b(X),Ee&&Ee.l(X),ut=b(X),De&&De.l(X),Kt=b(X),Se&&Se.l(X),Rt=b(X),He=i(X,"DIV",{class:!0});var kt=p(He);vt=i(kt,"DIV",{class:!0});var el=p(vt);lt=i(el,"SPAN",{});var tl=p(lt);ht=j(tl,"Created: "),qt=j(tl,Ht),tl.forEach(f),Ze=b(el),Nt=i(el,"SPAN",{});var yt=p(Nt);st=j(yt,"Updated: "),Qt=j(yt,ct),yt.forEach(f),el.forEach(f),kt.forEach(f),X.forEach(f),this.h()},h(){r(o,"class","svelte-nnom24"),r(v,"class","strategy-type svelte-nnom24"),r(C,"class","status svelte-nnom24"),Et(C,"active",l[0].is_active),r(d,"class","detail-meta svelte-nnom24"),r(Z,"class","icon-button svelte-nnom24"),r(Z,"title","Edit"),r(se,"class","icon-button svelte-nnom24"),r(se,"title","Clone"),r(R,"class","icon-button danger svelte-nnom24"),r(R,"title","Delete"),r(N,"class","detail-actions svelte-nnom24"),r(s,"class","detail-header svelte-nnom24"),r(oe,"class","svelte-nnom24"),r(S,"class","svelte-nnom24"),r(ae,"class","detail-section svelte-nnom24"),r(ue,"class","svelte-nnom24"),r(ne,"class","rules-list svelte-nnom24"),r(ee,"class","detail-section svelte-nnom24"),r(Ie,"class","svelte-nnom24"),r(be,"class","rules-list svelte-nnom24"),r(we,"class","detail-section svelte-nnom24"),r(Qe,"class","svelte-nnom24"),r(ze,"class","svelte-nnom24"),r(xe,"class","svelte-nnom24"),r(Te,"class","risk-item svelte-nnom24"),r(Re,"class","svelte-nnom24"),r(Oe,"class","svelte-nnom24"),r(Ae,"class","risk-item svelte-nnom24"),r(ve,"class","risk-grid svelte-nnom24"),r(je,"class","detail-section svelte-nnom24"),r(vt,"class","footer-meta svelte-nnom24"),r(He,"class","detail-footer svelte-nnom24"),r(e,"class","playbook-detail card svelte-nnom24")},m($,X){he($,e,X),t(e,s),t(s,a),t(a,o),t(o,c),t(a,_),t(a,d),t(d,v),t(v,g),t(d,m),t(d,E),t(E,A),t(d,le),t(d,C),t(C,w),t(s,L),t(s,N),t(N,Z),We(B,Z,null),t(N,z),t(N,se),We(M,se,null),t(N,F),t(N,R),We(W,R,null),t(e,Y),t(e,ae),t(ae,oe),t(ae,x),t(ae,S),t(S,J),t(e,ge),t(e,ee),t(ee,ue),We(_e,ue,null),t(ue,Ce),t(ee,U),t(ee,ne);for(let G=0;G<ye.length;G+=1)ye[G]&&ye[G].m(ne,null);t(e,ie),t(e,we),t(we,Ie),We(de,Ie,null),t(Ie,rt),t(we,H),t(we,be);for(let G=0;G<Ve.length;G+=1)Ve[G]&&Ve[G].m(be,null);t(e,ke),t(e,je),t(je,Qe),t(je,re),t(je,ve),t(ve,Te),t(Te,ze),t(Te,Pe),t(Te,xe),t(xe,wt),t(ve,It),t(ve,Ae),t(Ae,Re),t(Ae,$t),t(Ae,Oe),t(Oe,Xt),t(e,Gt),Le&&Le.m(e,null),t(e,it),Ee&&Ee.m(e,null),t(e,ut),De&&De.m(e,null),t(e,Kt),Se&&Se.m(e,null),t(e,Rt),t(e,He),t(He,vt),t(vt,lt),t(lt,ht),t(lt,qt),t(vt,Ze),t(vt,Nt),t(Nt,st),t(Nt,Qt),Me=!0,pt||(ft=[K(Z,"click",l[1]),K(se,"click",l[2]),K(R,"click",l[3])],pt=!0)},p($,[X]){if((!Me||X&1)&&n!==(n=$[0].title+"")&&fe(c,n),(!Me||X&1)&&h!==(h=$[0].strategy_type+"")&&fe(g,h),(!Me||X&1)&&D!==(D=$[0].timeframe+"")&&fe(A,D),(!Me||X&1)&&I!==(I=$[0].is_active?"Active":"Inactive")&&fe(w,I),(!Me||X&1)&&Et(C,"active",$[0].is_active),(!Me||X&1)&&V!==(V=$[0].market_conditions+"")&&fe(J,V),X&1){jt=Ue($[0].entry_rules);let G;for(G=0;G<jt.length;G+=1){const qe=_s($,jt,G);ye[G]?ye[G].p(qe,X):(ye[G]=vs(qe),ye[G].c(),ye[G].m(ne,null))}for(;G<ye.length;G+=1)ye[G].d(1);ye.length=jt.length}if(X&1){Bt=Ue($[0].exit_rules);let G;for(G=0;G<Bt.length;G+=1){const qe=ds($,Bt,G);Ve[G]?Ve[G].p(qe,X):(Ve[G]=hs(qe),Ve[G].c(),Ve[G].m(be,null))}for(;G<Ve.length;G+=1)Ve[G].d(1);Ve.length=Bt.length}(!Me||X&1)&&Ct!==(Ct=$[0].risk_management+"")&&fe(wt,Ct),(!Me||X&1)&&Je!==(Je=$[0].position_sizing+"")&&fe(Xt,Je),$[0].indicators.length>0?Le?Le.p($,X):(Le=ps($),Le.c(),Le.m(e,it)):Le&&(Le.d(1),Le=null),$[0].backtest_results?Ee?Ee.p($,X):(Ee=gs($),Ee.c(),Ee.m(e,ut)):Ee&&(Ee.d(1),Ee=null),$[0].notes?De?De.p($,X):(De=bs($),De.c(),De.m(e,Kt)):De&&(De.d(1),De=null),$[0].tags.length>0?Se?Se.p($,X):(Se=ks($),Se.c(),Se.m(e,Rt)):Se&&(Se.d(1),Se=null),(!Me||X&1)&&Ht!==(Ht=xl($[0].created_at)+"")&&fe(qt,Ht),(!Me||X&1)&&ct!==(ct=xl($[0].updated_at)+"")&&fe(Qt,ct)},i($){Me||(ce(B.$$.fragment,$),ce(M.$$.fragment,$),ce(W.$$.fragment,$),ce(_e.$$.fragment,$),ce(de.$$.fragment,$),Me=!0)},o($){me(B.$$.fragment,$),me(M.$$.fragment,$),me(W.$$.fragment,$),me(_e.$$.fragment,$),me(de.$$.fragment,$),Me=!1},d($){$&&f(e),Fe(B),Fe(M),Fe(W),Fe(_e),Lt(ye,$),Fe(de),Lt(Ve,$),Le&&Le.d(),Ee&&Ee.d(),De&&De.d(),Se&&Se.d(),pt=!1,al(ft)}}}function xl(l){return new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}function ln(l,e,s){let{playbook:a}=e;const o=As();function n(){o("edit")}function c(){o("clone")}function _(){o("delete")}return l.$$set=d=>{"playbook"in d&&s(0,a=d.playbook)},[a,n,c,_]}class sn extends Fl{constructor(e){super(),Wl(this,e,ln,tn,Xl,{playbook:0})}}function Es(l,e,s){const a=l.slice();return a[30]=e[s],a}function Cs(l,e,s){const a=l.slice();return a[33]=e[s],a}function nn(l){let e,s,a,o,n,c,_,d,v,h="All Strategies",g,m="Scalping",E,D="Day Trading",A,le="Swing Trading",C,I="Position Trading",w,L="Other",N,Z,B,z,se,M,F,R,W,Y,ae;a=new Qs({props:{size:20,class:"search-icon"}});const oe=[cn,un],y=[];function x(S,V){return S[5].length===0?0:1}return M=x(l),F=y[M]=oe[M](l),{c(){e=u("div"),s=u("div"),Ge(a.$$.fragment),o=k(),n=u("input"),c=k(),_=u("div"),d=u("select"),v=u("option"),v.textContent=h,g=u("option"),g.textContent=m,E=u("option"),E.textContent=D,A=u("option"),A.textContent=le,C=u("option"),C.textContent=I,w=u("option"),w.textContent=L,N=k(),Z=u("label"),B=u("input"),z=P(`
					Active Only`),se=k(),F.c(),R=Zl(),this.h()},l(S){e=i(S,"DIV",{class:!0});var V=p(e);s=i(V,"DIV",{class:!0});var J=p(s);Xe(a.$$.fragment,J),o=b(J),n=i(J,"INPUT",{type:!0,placeholder:!0,class:!0}),J.forEach(f),c=b(V),_=i(V,"DIV",{class:!0});var ge=p(_);d=i(ge,"SELECT",{class:!0});var ee=p(d);v=i(ee,"OPTION",{"data-svelte-h":!0}),O(v)!=="svelte-9jvqpy"&&(v.textContent=h),g=i(ee,"OPTION",{"data-svelte-h":!0}),O(g)!=="svelte-7lc21u"&&(g.textContent=m),E=i(ee,"OPTION",{"data-svelte-h":!0}),O(E)!=="svelte-alar7q"&&(E.textContent=D),A=i(ee,"OPTION",{"data-svelte-h":!0}),O(A)!=="svelte-14er361"&&(A.textContent=le),C=i(ee,"OPTION",{"data-svelte-h":!0}),O(C)!=="svelte-2p3u2t"&&(C.textContent=I),w=i(ee,"OPTION",{"data-svelte-h":!0}),O(w)!=="svelte-902jce"&&(w.textContent=L),ee.forEach(f),N=b(ge),Z=i(ge,"LABEL",{class:!0});var ue=p(Z);B=i(ue,"INPUT",{type:!0}),z=j(ue,`
					Active Only`),ue.forEach(f),ge.forEach(f),V.forEach(f),se=b(S),F.l(S),R=Zl(),this.h()},h(){r(n,"type","text"),r(n,"placeholder","Search strategies..."),r(n,"class","search-input svelte-10ktefy"),r(s,"class","search-container svelte-10ktefy"),v.__value="",Q(v,v.__value),g.__value="scalping",Q(g,g.__value),E.__value="daytrading",Q(E,E.__value),A.__value="swing",Q(A,A.__value),C.__value="position",Q(C,C.__value),w.__value="other",Q(w,w.__value),r(d,"class","filter-select svelte-10ktefy"),l[1]===void 0&&Ps(()=>l[17].call(d)),r(B,"type","checkbox"),r(Z,"class","checkbox-label svelte-10ktefy"),r(_,"class","filter-buttons svelte-10ktefy"),r(e,"class","filters-section svelte-10ktefy")},m(S,V){he(S,e,V),t(e,s),We(a,s,null),t(s,o),t(s,n),Q(n,l[0]),t(e,c),t(e,_),t(_,d),t(d,v),t(d,g),t(d,E),t(d,A),t(d,C),t(d,w),Vl(d,l[1],!0),t(_,N),t(_,Z),t(Z,B),B.checked=l[2],t(Z,z),he(S,se,V),y[M].m(S,V),he(S,R,V),W=!0,Y||(ae=[K(n,"input",l[16]),K(d,"change",l[17]),K(B,"change",l[18])],Y=!0)},p(S,V){V[0]&1&&n.value!==S[0]&&Q(n,S[0]),V[0]&2&&Vl(d,S[1]),V[0]&4&&(B.checked=S[2]);let J=M;M=x(S),M===J?y[M].p(S,V):(ml(),me(y[J],1,1,()=>{y[J]=null}),gl(),F=y[M],F?F.p(S,V):(F=y[M]=oe[M](S),F.c()),ce(F,1),F.m(R.parentNode,R))},i(S){W||(ce(a.$$.fragment,S),ce(F),W=!0)},o(S){me(a.$$.fragment,S),me(F),W=!1},d(S){S&&(f(e),f(se),f(R)),Fe(a),y[M].d(S),Y=!1,al(ae)}}}function an(l){let e,s;return e=new en({props:{playbook:l[8]}}),e.$on("save",l[13]),e.$on("cancel",l[15]),{c(){Ge(e.$$.fragment)},l(a){Xe(e.$$.fragment,a)},m(a,o){We(e,a,o),s=!0},p(a,o){const n={};o[0]&256&&(n.playbook=a[8]),e.$set(n)},i(a){s||(ce(e.$$.fragment,a),s=!0)},o(a){me(e.$$.fragment,a),s=!1},d(a){Fe(e,a)}}}function rn(l){let e,s;return{c(){e=u("div"),s=P(l[4]),this.h()},l(a){e=i(a,"DIV",{class:!0});var o=p(e);s=j(o,l[4]),o.forEach(f),this.h()},h(){r(e,"class","error svelte-10ktefy")},m(a,o){he(a,e,o),t(e,s)},p(a,o){o[0]&16&&fe(s,a[4])},i:pl,o:pl,d(a){a&&f(e)}}}function on(l){let e,s="Loading playbook...";return{c(){e=u("div"),e.textContent=s,this.h()},l(a){e=i(a,"DIV",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1ycb61c"&&(e.textContent=s),this.h()},h(){r(e,"class","loading svelte-10ktefy")},m(a,o){he(a,e,o)},p:pl,i:pl,o:pl,d(a){a&&f(e)}}}function un(l){let e,s,a,o,n=Ue(l[5]),c=[];for(let v=0;v<n.length;v+=1)c[v]=Ds(Es(l,n,v));const _=v=>me(c[v],1,1,()=>{c[v]=null});let d=l[6]&&Ss(l);return{c(){e=u("div"),s=u("div");for(let v=0;v<c.length;v+=1)c[v].c();a=k(),d&&d.c(),this.h()},l(v){e=i(v,"DIV",{class:!0});var h=p(e);s=i(h,"DIV",{class:!0});var g=p(s);for(let m=0;m<c.length;m+=1)c[m].l(g);g.forEach(f),a=b(h),d&&d.l(h),h.forEach(f),this.h()},h(){r(s,"class","playbook-list svelte-10ktefy"),r(e,"class","playbook-layout svelte-10ktefy")},m(v,h){he(v,e,h),t(e,s);for(let g=0;g<c.length;g+=1)c[g]&&c[g].m(s,null);t(e,a),d&&d.m(e,null),o=!0},p(v,h){if(h[0]&23648){n=Ue(v[5]);let g;for(g=0;g<n.length;g+=1){const m=Es(v,n,g);c[g]?(c[g].p(m,h),ce(c[g],1)):(c[g]=Ds(m),c[g].c(),ce(c[g],1),c[g].m(s,null))}for(ml(),g=n.length;g<c.length;g+=1)_(g);gl()}v[6]?d?(d.p(v,h),h[0]&64&&ce(d,1)):(d=Ss(v),d.c(),ce(d,1),d.m(e,null)):d&&(ml(),me(d,1,1,()=>{d=null}),gl())},i(v){if(!o){for(let h=0;h<n.length;h+=1)ce(c[h]);ce(d),o=!0}},o(v){c=c.filter(Boolean);for(let h=0;h<c.length;h+=1)me(c[h]);me(d),o=!1},d(v){v&&f(e),Lt(c,v),d&&d.d()}}}function cn(l){let e,s,a,o,n="No strategies found",c,_,d=l[0]||l[1]||l[2]?"Try adjusting your filters":"Create your first trading strategy",v,h,g;s=new Js({props:{size:48}});let m=!l[0]&&!l[1]&&!l[2]&&$s(l);return{c(){e=u("div"),Ge(s.$$.fragment),a=k(),o=u("h2"),o.textContent=n,c=k(),_=u("p"),v=P(d),h=k(),m&&m.c(),this.h()},l(E){e=i(E,"DIV",{class:!0});var D=p(e);Xe(s.$$.fragment,D),a=b(D),o=i(D,"H2",{class:!0,"data-svelte-h":!0}),O(o)!=="svelte-15envre"&&(o.textContent=n),c=b(D),_=i(D,"P",{class:!0});var A=p(_);v=j(A,d),A.forEach(f),h=b(D),m&&m.l(D),D.forEach(f),this.h()},h(){r(o,"class","svelte-10ktefy"),r(_,"class","svelte-10ktefy"),r(e,"class","empty-state svelte-10ktefy")},m(E,D){he(E,e,D),We(s,e,null),t(e,a),t(e,o),t(e,c),t(e,_),t(_,v),t(e,h),m&&m.m(e,null),g=!0},p(E,D){(!g||D[0]&7)&&d!==(d=E[0]||E[1]||E[2]?"Try adjusting your filters":"Create your first trading strategy")&&fe(v,d),!E[0]&&!E[1]&&!E[2]?m?m.p(E,D):(m=$s(E),m.c(),m.m(e,null)):m&&(m.d(1),m=null)},i(E){g||(ce(s.$$.fragment,E),g=!0)},o(E){me(s.$$.fragment,E),g=!1},d(E){E&&f(e),Fe(s),m&&m.d()}}}function ws(l){let e,s,a=l[30].backtest_results.win_rate+"",o,n;return{c(){e=u("span"),s=P("WR: "),o=P(a),n=P("%"),this.h()},l(c){e=i(c,"SPAN",{class:!0});var _=p(e);s=j(_,"WR: "),o=j(_,a),n=j(_,"%"),_.forEach(f),this.h()},h(){r(e,"class","win-rate svelte-10ktefy")},m(c,_){he(c,e,_),t(e,s),t(e,o),t(e,n)},p(c,_){_[0]&32&&a!==(a=c[30].backtest_results.win_rate+"")&&fe(o,a)},d(c){c&&f(e)}}}function Is(l){let e,s=Ue(l[30].tags),a=[];for(let o=0;o<s.length;o+=1)a[o]=Ts(Cs(l,s,o));return{c(){e=u("div");for(let o=0;o<a.length;o+=1)a[o].c();this.h()},l(o){e=i(o,"DIV",{class:!0});var n=p(e);for(let c=0;c<a.length;c+=1)a[c].l(n);n.forEach(f),this.h()},h(){r(e,"class","tags svelte-10ktefy")},m(o,n){he(o,e,n);for(let c=0;c<a.length;c+=1)a[c]&&a[c].m(e,null)},p(o,n){if(n[0]&32){s=Ue(o[30].tags);let c;for(c=0;c<s.length;c+=1){const _=Cs(o,s,c);a[c]?a[c].p(_,n):(a[c]=Ts(_),a[c].c(),a[c].m(e,null))}for(;c<a.length;c+=1)a[c].d(1);a.length=s.length}},d(o){o&&f(e),Lt(a,o)}}}function Ts(l){let e,s=l[33]+"",a;return{c(){e=u("span"),a=P(s),this.h()},l(o){e=i(o,"SPAN",{class:!0});var n=p(e);a=j(n,s),n.forEach(f),this.h()},h(){r(e,"class","tag svelte-10ktefy")},m(o,n){he(o,e,n),t(e,a)},p(o,n){n[0]&32&&s!==(s=o[33]+"")&&fe(a,s)},d(o){o&&f(e)}}}function Ds(l){let e,s,a,o,n=l[30].title+"",c,_,d,v,h=l[30].strategy_type+"",g,m,E,D=l[30].timeframe+"",A,le,C,I,w,L=l[30].is_active?"✓":"○",N,Z,B,z,se=l[30].market_conditions+"",M,F,R,W,Y,ae,oe=js(l[30].updated_at)+"",y,x,S,V,J,ge,ee,ue,_e,Ce,U,ne,ie,we,Ie,de=l[30].backtest_results&&ws(l);function rt(){return l[19](l[30])}let H=l[30].tags.length>0&&Is(l);J=new Os({props:{size:16}});function be(){return l[20](l[30])}ue=new Ls({props:{size:16}});function ke(){return l[21](l[30])}U=new Bs({props:{size:16}});function je(){return l[22](l[30])}function Qe(){return l[23](l[30])}return{c(){e=u("button"),s=u("div"),a=u("div"),o=u("h3"),c=P(n),_=k(),d=u("div"),v=u("span"),g=P(h),m=k(),E=u("span"),A=P(D),le=k(),de&&de.c(),C=k(),I=u("div"),w=u("button"),N=P(L),B=k(),z=u("p"),M=P(se),F=k(),H&&H.c(),R=k(),W=u("div"),Y=u("span"),ae=P("Updated "),y=P(oe),x=k(),S=u("div"),V=u("button"),Ge(J.$$.fragment),ge=k(),ee=u("button"),Ge(ue.$$.fragment),_e=k(),Ce=u("button"),Ge(U.$$.fragment),ne=k(),this.h()},l(pe){e=i(pe,"BUTTON",{class:!0,type:!0});var re=p(e);s=i(re,"DIV",{class:!0});var ve=p(s);a=i(ve,"DIV",{});var Te=p(a);o=i(Te,"H3",{class:!0});var ze=p(o);c=j(ze,n),ze.forEach(f),_=b(Te),d=i(Te,"DIV",{class:!0});var Ke=p(d);v=i(Ke,"SPAN",{class:!0});var Pe=p(v);g=j(Pe,h),Pe.forEach(f),m=b(Ke),E=i(Ke,"SPAN",{class:!0});var xe=p(E);A=j(xe,D),xe.forEach(f),le=b(Ke),de&&de.l(Ke),Ke.forEach(f),Te.forEach(f),C=b(ve),I=i(ve,"DIV",{class:!0});var Ct=p(I);w=i(Ct,"BUTTON",{class:!0,title:!0});var wt=p(w);N=j(wt,L),wt.forEach(f),Ct.forEach(f),ve.forEach(f),B=b(re),z=i(re,"P",{class:!0});var It=p(z);M=j(It,se),It.forEach(f),F=b(re),H&&H.l(re),R=b(re),W=i(re,"DIV",{class:!0});var Ae=p(W);Y=i(Ae,"SPAN",{class:!0});var Re=p(Y);ae=j(Re,"Updated "),y=j(Re,oe),Re.forEach(f),x=b(Ae),S=i(Ae,"DIV",{class:!0});var ot=p(S);V=i(ot,"BUTTON",{class:!0,title:!0});var $t=p(V);Xe(J.$$.fragment,$t),$t.forEach(f),ge=b(ot),ee=i(ot,"BUTTON",{class:!0,title:!0});var Oe=p(ee);Xe(ue.$$.fragment,Oe),Oe.forEach(f),_e=b(ot),Ce=i(ot,"BUTTON",{class:!0,title:!0});var Je=p(Ce);Xe(U.$$.fragment,Je),Je.forEach(f),ot.forEach(f),Ae.forEach(f),ne=b(re),re.forEach(f),this.h()},h(){var pe;r(o,"class","svelte-10ktefy"),r(v,"class","strategy-type svelte-10ktefy"),r(E,"class","timeframe svelte-10ktefy"),r(d,"class","playbook-meta svelte-10ktefy"),r(w,"class","status-toggle svelte-10ktefy"),r(w,"title",Z=l[30].is_active?"Active":"Inactive"),Et(w,"active",l[30].is_active),r(I,"class","playbook-status svelte-10ktefy"),r(s,"class","playbook-header svelte-10ktefy"),r(z,"class","playbook-conditions svelte-10ktefy"),r(Y,"class","date svelte-10ktefy"),r(V,"class","icon-button svelte-10ktefy"),r(V,"title","Edit"),r(ee,"class","icon-button svelte-10ktefy"),r(ee,"title","Clone"),r(Ce,"class","icon-button danger svelte-10ktefy"),r(Ce,"title","Delete"),r(S,"class","playbook-actions svelte-10ktefy"),r(W,"class","playbook-footer svelte-10ktefy"),r(e,"class","playbook-card card svelte-10ktefy"),r(e,"type","button"),Et(e,"selected",((pe=l[6])==null?void 0:pe.id)===l[30].id),Et(e,"inactive",!l[30].is_active)},m(pe,re){he(pe,e,re),t(e,s),t(s,a),t(a,o),t(o,c),t(a,_),t(a,d),t(d,v),t(v,g),t(d,m),t(d,E),t(E,A),t(d,le),de&&de.m(d,null),t(s,C),t(s,I),t(I,w),t(w,N),t(e,B),t(e,z),t(z,M),t(e,F),H&&H.m(e,null),t(e,R),t(e,W),t(W,Y),t(Y,ae),t(Y,y),t(W,x),t(W,S),t(S,V),We(J,V,null),t(S,ge),t(S,ee),We(ue,ee,null),t(S,_e),t(S,Ce),We(U,Ce,null),t(e,ne),ie=!0,we||(Ie=[K(w,"click",Al(rt)),K(V,"click",Al(be)),K(ee,"click",Al(ke)),K(Ce,"click",Al(je)),K(e,"click",Qe)],we=!0)},p(pe,re){var ve;l=pe,(!ie||re[0]&32)&&n!==(n=l[30].title+"")&&fe(c,n),(!ie||re[0]&32)&&h!==(h=l[30].strategy_type+"")&&fe(g,h),(!ie||re[0]&32)&&D!==(D=l[30].timeframe+"")&&fe(A,D),l[30].backtest_results?de?de.p(l,re):(de=ws(l),de.c(),de.m(d,null)):de&&(de.d(1),de=null),(!ie||re[0]&32)&&L!==(L=l[30].is_active?"✓":"○")&&fe(N,L),(!ie||re[0]&32&&Z!==(Z=l[30].is_active?"Active":"Inactive"))&&r(w,"title",Z),(!ie||re[0]&32)&&Et(w,"active",l[30].is_active),(!ie||re[0]&32)&&se!==(se=l[30].market_conditions+"")&&fe(M,se),l[30].tags.length>0?H?H.p(l,re):(H=Is(l),H.c(),H.m(e,R)):H&&(H.d(1),H=null),(!ie||re[0]&32)&&oe!==(oe=js(l[30].updated_at)+"")&&fe(y,oe),(!ie||re[0]&96)&&Et(e,"selected",((ve=l[6])==null?void 0:ve.id)===l[30].id),(!ie||re[0]&32)&&Et(e,"inactive",!l[30].is_active)},i(pe){ie||(ce(J.$$.fragment,pe),ce(ue.$$.fragment,pe),ce(U.$$.fragment,pe),ie=!0)},o(pe){me(J.$$.fragment,pe),me(ue.$$.fragment,pe),me(U.$$.fragment,pe),ie=!1},d(pe){pe&&f(e),de&&de.d(),H&&H.d(),Fe(J),Fe(ue),Fe(U),we=!1,al(Ie)}}}function Ss(l){let e,s;return e=new sn({props:{playbook:l[6]}}),e.$on("edit",l[24]),e.$on("clone",l[25]),e.$on("delete",l[26]),{c(){Ge(e.$$.fragment)},l(a){Xe(e.$$.fragment,a)},m(a,o){We(e,a,o),s=!0},p(a,o){const n={};o[0]&64&&(n.playbook=a[6]),e.$set(n)},i(a){s||(ce(e.$$.fragment,a),s=!0)},o(a){me(e.$$.fragment,a),s=!1},d(a){Fe(e,a)}}}function $s(l){let e,s="Create Strategy",a,o;return{c(){e=u("button"),e.textContent=s,this.h()},l(n){e=i(n,"BUTTON",{class:!0,"data-svelte-h":!0}),O(e)!=="svelte-1ga5gpz"&&(e.textContent=s),this.h()},h(){r(e,"class","primary-button svelte-10ktefy")},m(n,c){he(n,e,c),a||(o=K(e,"click",l[9]),a=!0)},p:pl,d(n){n&&f(e),a=!1,o()}}}function fn(l){let e,s,a,o,n='<h1 class="svelte-10ktefy">Trading Playbook</h1> <p class="svelte-10ktefy">Document and refine your trading strategies</p>',c,_,d,v,h,g,m,E,D,A;d=new Ml({props:{size:18}});const le=[on,rn,an,nn],C=[];function I(w,L){return w[3]?0:w[4]?1:w[7]?2:3}return g=I(l),m=C[g]=le[g](l),{c(){e=k(),s=u("div"),a=u("header"),o=u("div"),o.innerHTML=n,c=k(),_=u("button"),Ge(d.$$.fragment),v=P(`
			New Strategy`),h=k(),m.c(),this.h()},l(w){Hs("svelte-14el7c8",document.head).forEach(f),e=b(w),s=i(w,"DIV",{class:!0});var N=p(s);a=i(N,"HEADER",{class:!0});var Z=p(a);o=i(Z,"DIV",{"data-svelte-h":!0}),O(o)!=="svelte-6raluc"&&(o.innerHTML=n),c=b(Z),_=i(Z,"BUTTON",{class:!0});var B=p(_);Xe(d.$$.fragment,B),v=j(B,`
			New Strategy`),B.forEach(f),Z.forEach(f),h=b(N),m.l(N),N.forEach(f),this.h()},h(){document.title="Playbook - TradeSense",r(_,"class","new-button svelte-10ktefy"),r(a,"class","page-header svelte-10ktefy"),r(s,"class","playbook-page svelte-10ktefy")},m(w,L){he(w,e,L),he(w,s,L),t(s,a),t(a,o),t(a,c),t(a,_),We(d,_,null),t(_,v),t(s,h),C[g].m(s,null),E=!0,D||(A=K(_,"click",l[9]),D=!0)},p(w,L){let N=g;g=I(w),g===N?C[g].p(w,L):(ml(),me(C[N],1,1,()=>{C[N]=null}),gl(),m=C[g],m?m.p(w,L):(m=C[g]=le[g](w),m.c()),ce(m,1),m.m(s,null))},i(w){E||(ce(d.$$.fragment,w),ce(m),E=!0)},o(w){me(d.$$.fragment,w),me(m),E=!1},d(w){w&&(f(e),f(s)),Fe(d),C[g].d(),D=!1,A()}}}function Ns(){return[{id:1,title:"Morning Gap Strategy",strategy_type:"daytrading",timeframe:"5min, 15min",market_conditions:"High volatility, strong pre-market activity, gap > 2%",entry_rules:["Wait for first 15 minutes to establish range","Enter on break of opening range with volume","Confirm with VWAP direction","RSI should be > 60 for longs, < 40 for shorts"],exit_rules:["Initial stop: Previous candle low/high","Target 1: 1.5x risk at 50% position","Target 2: 2.5x risk at 30% position","Trail stop on remaining 20%"],risk_management:"1% account risk per trade, max 3 concurrent positions",position_sizing:"Risk / (Entry - Stop Loss) = Share size",indicators:["VWAP","RSI","Volume","ATR"],notes:"Best performance on large-cap stocks with news catalysts. Avoid on Fed days.",backtest_results:{win_rate:68.5,profit_factor:2.3,avg_win:285,avg_loss:124,max_drawdown:8.5},tags:["gaps","momentum","morning"],created_at:new Date(Date.now()-30*24*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-2*24*60*60*1e3).toISOString(),is_active:!0},{id:2,title:"Mean Reversion Swing Trade",strategy_type:"swing",timeframe:"Daily, 4H",market_conditions:"Ranging market, low volatility, established support/resistance",entry_rules:["Price at key support/resistance level","RSI oversold (<30) or overbought (>70)","Bullish/bearish divergence on indicators","Volume spike on reversal candle"],exit_rules:["Stop loss: Beyond support/resistance level","Target: Previous swing high/low","Time stop: Exit after 5 days if no movement","Exit on momentum exhaustion"],risk_management:"2% account risk per trade, max 5 swing positions",position_sizing:"Kelly Criterion with 25% reduction for safety",indicators:["RSI","MACD","Bollinger Bands","Support/Resistance"],notes:"Works best in established ranges. Avoid in trending markets.",backtest_results:{win_rate:72.3,profit_factor:1.8,avg_win:425,avg_loss:236,max_drawdown:12.3},tags:["mean-reversion","swing","range-bound"],created_at:new Date(Date.now()-60*24*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-7*24*60*60*1e3).toISOString(),is_active:!0},{id:3,title:"Scalping the Open",strategy_type:"scalping",timeframe:"1min, 3min",market_conditions:"First 30 minutes of market open, high liquidity stocks",entry_rules:["Trade only liquid stocks (>5M volume)","Enter on momentum with tape reading","Use Level 2 for entry timing","Quick in and out, no holding"],exit_rules:["Fixed stop: $0.10 or 10 cents","Target: $0.15-0.20 or 15-20 cents","Time stop: Exit after 5 minutes","Exit on momentum shift"],risk_management:"0.5% account risk per trade, max 2 positions at once",position_sizing:"Fixed 1000 shares for consistency",indicators:["Level 2","Time & Sales","VWAP"],notes:"Requires fast execution and low commissions. Mental discipline crucial.",tags:["scalping","open","high-frequency"],created_at:new Date(Date.now()-90*24*60*60*1e3).toISOString(),updated_at:new Date(Date.now()-45*24*60*60*1e3).toISOString(),is_active:!1}]}function js(l){return new Date(l).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"})}function dn(l,e,s){let a=!0,o="",n=[],c=[],_=null,d=!1,v=null,h="",g="",m=!1;async function E(){try{if(s(3,a=!0),s(4,o=""),!Ms(Ws)){Fs("/login");return}n=Ns(),D()}catch{s(4,o="Failed to load playbooks."),n=Ns(),D()}finally{s(3,a=!1)}}function D(){s(5,c=n.filter(y=>{if(h){const x=h.toLowerCase();if(!(y.title.toLowerCase().includes(x)||y.notes.toLowerCase().includes(x)||y.tags.some(V=>V.toLowerCase().includes(x))||y.indicators.some(V=>V.toLowerCase().includes(x))))return!1}return!(g&&y.strategy_type!==g||m&&!y.is_active)})),c.sort((y,x)=>new Date(x.updated_at).getTime()-new Date(y.updated_at).getTime())}function A(){s(7,d=!0),s(8,v=null)}function le(y){s(8,v=y),s(7,d=!0)}function C(y){n=[{...y,id:Date.now(),title:`${y.title} (Copy)`,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},...n],D()}function I(y){confirm("Are you sure you want to delete this playbook?")&&(n=n.filter(x=>x.id!==y),D(),(_==null?void 0:_.id)===y&&s(6,_=null))}function w(y){const{playbook:x}=y.detail;v?n=n.map(S=>S.id===v.id?{...x,id:v.id}:S):n=[{...x,id:Date.now(),created_at:new Date().toISOString(),updated_at:new Date().toISOString()},...n],D(),s(7,d=!1),s(8,v=null)}function L(y){n=n.map(x=>x.id===y.id?{...x,is_active:!x.is_active}:x),D()}qs(()=>{E()});const N=()=>{s(7,d=!1),s(8,v=null)};function Z(){h=this.value,s(0,h)}function B(){g=xs(this),s(1,g)}function z(){m=this.checked,s(2,m)}const se=y=>L(y),M=y=>le(y),F=y=>C(y),R=y=>I(y.id),W=y=>s(6,_=y),Y=()=>le(_),ae=()=>C(_),oe=()=>I(_.id);return l.$$.update=()=>{l.$$.dirty[0]&7&&(h!==void 0||g!==void 0||m!==void 0)&&D()},[h,g,m,a,o,c,_,d,v,A,le,C,I,w,L,N,Z,B,z,se,M,F,R,W,Y,ae,oe]}class Sn extends Fl{constructor(e){super(),Wl(this,e,dn,fn,Xl,{},null,[-1,-1])}}export{Sn as component};
