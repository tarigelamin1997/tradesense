import{S as oe,i as ue,s as ce,d as a,t as H,a as L,c as fe,b as m,e as g,f as d,I as pe,u as V,g as _,h as D,y as w,j as h,k as de,P as me,A as ne,l as U,o as Y,q as j,v as q,x as A,p as W,r as ve,B as te,L as se,Y as _e,w as le,z as re,n as he}from"../chunks/BizRtQrO.js";import"../chunks/IHki7fMi.js";import{p as be}from"../chunks/C4tCgbJx.js";import{g as Ce}from"../chunks/CMDLyNOv.js";import{a as ie}from"../chunks/CNsmtZI0.js";import{L as ye}from"../chunks/DRNeJX9W.js";import{C as ke}from"../chunks/LY3CT-Vd.js";import{C as xe}from"../chunks/BC5gv1j_.js";import{M as ge}from"../chunks/CvT6G94N.js";function Ee(C){let l,t,n,s,f="Verification Failed",u,i,p,v,e,r,E="Need a new verification link?",y,I,M="Enter your email address and we'll send you a new verification link.",c,b,P,N,G,$,J,T,R=C[4]?"Sending...":"Resend Verification",B,K,S,Q,X;t=new xe({props:{size:64}}),N=new ge({props:{size:20}});let x=C[5]&&ae();return{c(){l=h("div"),A(t.$$.fragment),n=w(),s=h("h1"),s.textContent=f,u=w(),i=h("p"),p=re(C[2]),v=w(),e=h("div"),r=h("h2"),r.textContent=E,y=w(),I=h("p"),I.textContent=M,c=w(),b=h("form"),P=h("div"),A(N.$$.fragment),G=w(),$=h("input"),J=w(),T=h("button"),B=re(R),K=w(),x&&x.c(),this.h()},l(o){l=_(o,"DIV",{class:!0});var k=D(l);j(t.$$.fragment,k),k.forEach(a),n=V(o),s=_(o,"H1",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-14rcri2"&&(s.textContent=f),u=V(o),i=_(o,"P",{class:!0});var Z=D(i);p=le(Z,C[2]),Z.forEach(a),v=V(o),e=_(o,"DIV",{class:!0});var z=D(e);r=_(z,"H2",{class:!0,"data-svelte-h":!0}),q(r)!=="svelte-1xxd70x"&&(r.textContent=E),y=V(z),I=_(z,"P",{class:!0,"data-svelte-h":!0}),q(I)!=="svelte-lad488"&&(I.textContent=M),c=V(z),b=_(z,"FORM",{class:!0});var F=D(b);P=_(F,"DIV",{class:!0});var O=D(P);j(N.$$.fragment,O),G=V(O),$=_(O,"INPUT",{type:!0,placeholder:!0,class:!0}),O.forEach(a),J=V(F),T=_(F,"BUTTON",{type:!0,class:!0});var ee=D(T);B=le(ee,R),ee.forEach(a),F.forEach(a),K=V(z),x&&x.l(z),z.forEach(a),this.h()},h(){d(l,"class","status-icon error svelte-p5u1e1"),d(s,"class","svelte-p5u1e1"),d(i,"class","error-message svelte-p5u1e1"),d(r,"class","svelte-p5u1e1"),d(I,"class","svelte-p5u1e1"),d($,"type","email"),d($,"placeholder","Enter your email"),$.required=!0,$.disabled=C[4],d($,"class","svelte-p5u1e1"),d(P,"class","form-group svelte-p5u1e1"),d(T,"type","submit"),T.disabled=C[4],d(T,"class","primary-button svelte-p5u1e1"),d(b,"class","resend-form svelte-p5u1e1"),d(e,"class","resend-section svelte-p5u1e1")},m(o,k){m(o,l,k),Y(t,l,null),m(o,n,k),m(o,s,k),m(o,u,k),m(o,i,k),g(i,p),m(o,v,k),m(o,e,k),g(e,r),g(e,y),g(e,I),g(e,c),g(e,b),g(b,P),Y(N,P,null),g(P,G),g(P,$),se($,C[3]),g(b,J),g(b,T),g(T,B),g(e,K),x&&x.m(e,null),S=!0,Q||(X=[W($,"input",C[8]),W(b,"submit",_e(C[6]))],Q=!0)},p(o,k){(!S||k&4)&&te(p,o[2]),(!S||k&16)&&($.disabled=o[4]),k&8&&$.value!==o[3]&&se($,o[3]),(!S||k&16)&&R!==(R=o[4]?"Sending...":"Resend Verification")&&te(B,R),(!S||k&16)&&(T.disabled=o[4]),o[5]?x||(x=ae(),x.c(),x.m(e,null)):x&&(x.d(1),x=null)},i(o){S||(L(t.$$.fragment,o),L(N.$$.fragment,o),S=!0)},o(o){H(t.$$.fragment,o),H(N.$$.fragment,o),S=!1},d(o){o&&(a(l),a(n),a(s),a(u),a(i),a(v),a(e)),U(t),U(N),x&&x.d(),Q=!1,ve(X)}}}function Ve(C){let l,t,n,s,f="Email Verified!",u,i,p="Your email has been successfully verified. You can now access all features.",v,e,r,E="Go to Login",y,I,M;return t=new ke({props:{size:64}}),{c(){l=h("div"),A(t.$$.fragment),n=w(),s=h("h1"),s.textContent=f,u=w(),i=h("p"),i.textContent=p,v=w(),e=h("div"),r=h("button"),r.textContent=E,this.h()},l(c){l=_(c,"DIV",{class:!0});var b=D(l);j(t.$$.fragment,b),b.forEach(a),n=V(c),s=_(c,"H1",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-1dkb0jr"&&(s.textContent=f),u=V(c),i=_(c,"P",{class:!0,"data-svelte-h":!0}),q(i)!=="svelte-1sgrxqn"&&(i.textContent=p),v=V(c),e=_(c,"DIV",{class:!0});var P=D(e);r=_(P,"BUTTON",{class:!0,"data-svelte-h":!0}),q(r)!=="svelte-1yvi359"&&(r.textContent=E),P.forEach(a),this.h()},h(){d(l,"class","status-icon success svelte-p5u1e1"),d(s,"class","svelte-p5u1e1"),d(i,"class","svelte-p5u1e1"),d(r,"class","primary-button svelte-p5u1e1"),d(e,"class","actions svelte-p5u1e1")},m(c,b){m(c,l,b),Y(t,l,null),m(c,n,b),m(c,s,b),m(c,u,b),m(c,i,b),m(c,v,b),m(c,e,b),g(e,r),y=!0,I||(M=W(r,"click",C[7]),I=!0)},p:ne,i(c){y||(L(t.$$.fragment,c),y=!0)},o(c){H(t.$$.fragment,c),y=!1},d(c){c&&(a(l),a(n),a(s),a(u),a(i),a(v),a(e)),U(t),I=!1,M()}}}function we(C){let l,t,n,s,f="Verifying your email...",u,i,p="Please wait while we confirm your email address.",v;return t=new ye({props:{size:64,class:"animate-spin"}}),{c(){l=h("div"),A(t.$$.fragment),n=w(),s=h("h1"),s.textContent=f,u=w(),i=h("p"),i.textContent=p,this.h()},l(e){l=_(e,"DIV",{class:!0});var r=D(l);j(t.$$.fragment,r),r.forEach(a),n=V(e),s=_(e,"H1",{class:!0,"data-svelte-h":!0}),q(s)!=="svelte-1xas3dy"&&(s.textContent=f),u=V(e),i=_(e,"P",{class:!0,"data-svelte-h":!0}),q(i)!=="svelte-1ibkrrr"&&(i.textContent=p),this.h()},h(){d(l,"class","status-icon svelte-p5u1e1"),d(s,"class","svelte-p5u1e1"),d(i,"class","svelte-p5u1e1")},m(e,r){m(e,l,r),Y(t,l,null),m(e,n,r),m(e,s,r),m(e,u,r),m(e,i,r),v=!0},p:ne,i(e){v||(L(t.$$.fragment,e),v=!0)},o(e){H(t.$$.fragment,e),v=!1},d(e){e&&(a(l),a(n),a(s),a(u),a(i)),U(t)}}}function ae(C){let l,t="Verification email sent! Please check your inbox.";return{c(){l=h("div"),l.textContent=t,this.h()},l(n){l=_(n,"DIV",{class:!0,"data-svelte-h":!0}),q(l)!=="svelte-kl9q1c"&&(l.textContent=t),this.h()},h(){d(l,"class","success-message svelte-p5u1e1")},m(n,s){m(n,l,s)},d(n){n&&a(l)}}}function Ie(C){let l,t,n,s,f,u;const i=[we,Ve,Ee],p=[];function v(e,r){return e[0]?0:e[1]?1:2}return s=v(C),f=p[s]=i[s](C),{c(){l=w(),t=h("div"),n=h("div"),f.c(),this.h()},l(e){pe("svelte-9yc3qs",document.head).forEach(a),l=V(e),t=_(e,"DIV",{class:!0});var E=D(t);n=_(E,"DIV",{class:!0});var y=D(n);f.l(y),y.forEach(a),E.forEach(a),this.h()},h(){document.title="Email Verification - TradeSense",d(n,"class","verification-card svelte-p5u1e1"),d(t,"class","verification-container svelte-p5u1e1")},m(e,r){m(e,l,r),m(e,t,r),g(t,n),p[s].m(n,null),u=!0},p(e,[r]){let E=s;s=v(e),s===E?p[s].p(e,r):(he(),H(p[E],1,1,()=>{p[E]=null}),fe(),f=p[s],f?f.p(e,r):(f=p[s]=i[s](e),f.c()),L(f,1),f.m(n,null))},i(e){u||(L(f),u=!0)},o(e){H(f),u=!1},d(e){e&&(a(l),a(t)),p[s].d()}}}function $e(C,l,t){let n;de(C,be,y=>t(9,n=y));let s=!0,f=!1,u="",i="",p=!1,v=!1;me(async()=>{const y=n.url.searchParams.get("token");if(!y){t(2,u="No verification token provided"),t(0,s=!1);return}try{await ie.verifyEmail(y),t(1,f=!0)}catch(I){t(2,u=I.message||"Verification failed. The link may be expired or invalid.")}finally{t(0,s=!1)}});async function e(){if(!(!i||p))try{t(4,p=!0),t(2,u=""),t(5,v=!1),await ie.resendVerification(i),t(5,v=!0)}catch(y){t(2,u=y.message||"Failed to resend verification email")}finally{t(4,p=!1)}}const r=()=>Ce("/login");function E(){i=this.value,t(3,i)}return[s,f,u,i,p,v,e,r,E]}class Me extends oe{constructor(l){super(),ue(this,l,$e,Ie,ce,{})}}export{Me as component};
