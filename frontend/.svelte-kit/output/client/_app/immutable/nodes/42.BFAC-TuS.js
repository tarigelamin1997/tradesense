import{S as Zt,i as Jt,s as Wt,n as zt,d as c,f as we,M as Xt,a7 as xt,N as $t,e as qe,O as b,P as Gt,R as je,Z as _e,h as t,G as q,X as es,D as e,U as ts,k as r,l as _,p as me,o as v,m as E,q as n,v as he,r as p,Y as ss,V as ls,y as as,t as rs,a as ns,z as is,E as os,A as us,B as ds,w as fs,K as cs}from"../chunks/Lbc7qOuA.js";import"../chunks/IHki7fMi.js";import{g as Et}from"../chunks/C_yqYPEv.js";import{i as vs}from"../chunks/yvsfElaz.js";import{t as Kt}from"../chunks/DIOJ9bNX.js";function Qt(l){var Ot,Ft;let u,s,o,m,d=(Ot=l[0])!=null&&Ot.id?"Edit Trade":"New Trade",y,N,a,O="Ã—",w,Ce,z,h,F,M,Ae="Symbol",Ee,k,ze,H,R,Le="Side",P,g,G,Tt="Long",K,It="Short",Je,Z,J,Dt="Entry Price",We,T,xe,W,x,qt="Exit Price",$e,I,et,$,ee,wt="Quantity",tt,D,st,te,se,At="Strategy",lt,A,at,le,ae,Lt="Entry Date",rt,V,nt,re,ne,Nt="Exit Date",it,S,ot,ie,oe,Pt="Notes",ut,L,dt,ue,ge,Vt="P&L Preview",ft,de,fe,be,St="Amount:",ct,B,vt,Te=l[3].toFixed(2)+"",Ne,pt,ce,ye,Bt="Percentage:",_t,U,Ie=l[6].toFixed(2)+"",Pe,mt,ht,ve,X,gt,bt,Q,De=l[4]?"Saving...":(Ft=l[0])!=null&&Ft.id?"Update Trade":"Create Trade",Ve,yt,Ut,C=l[5]&&Yt(l);return{c(){u=n("div"),s=n("div"),o=n("div"),m=n("h2"),y=he(d),N=p(),a=n("button"),a.textContent=O,w=p(),C&&C.c(),Ce=p(),z=n("form"),h=n("div"),F=n("div"),M=n("label"),M.textContent=Ae,Ee=p(),k=n("input"),ze=p(),H=n("div"),R=n("label"),R.textContent=Le,P=p(),g=n("select"),G=n("option"),G.textContent=Tt,K=n("option"),K.textContent=It,Je=p(),Z=n("div"),J=n("label"),J.textContent=Dt,We=p(),T=n("input"),xe=p(),W=n("div"),x=n("label"),x.textContent=qt,$e=p(),I=n("input"),et=p(),$=n("div"),ee=n("label"),ee.textContent=wt,tt=p(),D=n("input"),st=p(),te=n("div"),se=n("label"),se.textContent=At,lt=p(),A=n("input"),at=p(),le=n("div"),ae=n("label"),ae.textContent=Lt,rt=p(),V=n("input"),nt=p(),re=n("div"),ne=n("label"),ne.textContent=Nt,it=p(),S=n("input"),ot=p(),ie=n("div"),oe=n("label"),oe.textContent=Pt,ut=p(),L=n("textarea"),dt=p(),ue=n("div"),ge=n("h3"),ge.textContent=Vt,ft=p(),de=n("div"),fe=n("div"),be=n("span"),be.textContent=St,ct=p(),B=n("span"),vt=he("$"),Ne=he(Te),pt=p(),ce=n("div"),ye=n("span"),ye.textContent=Bt,_t=p(),U=n("span"),Pe=he(Ie),mt=he("%"),ht=p(),ve=n("div"),X=n("button"),gt=he("Cancel"),bt=p(),Q=n("button"),Ve=he(De),this.h()},l(i){u=r(i,"DIV",{class:!0});var f=_(u);s=r(f,"DIV",{class:!0});var Y=_(s);o=r(Y,"DIV",{class:!0});var ke=_(o);m=r(ke,"H2",{class:!0});var Mt=_(m);y=me(Mt,d),Mt.forEach(c),N=v(ke),a=r(ke,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),E(a)!=="svelte-39g3rs"&&(a.textContent=O),ke.forEach(c),w=v(Y),C&&C.l(Y),Ce=v(Y),z=r(Y,"FORM",{});var pe=_(z);h=r(pe,"DIV",{class:!0});var j=_(h);F=r(j,"DIV",{class:!0});var Se=_(F);M=r(Se,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(M)!=="svelte-7yir0i"&&(M.textContent=Ae),Ee=v(Se),k=r(Se,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Se.forEach(c),ze=v(j),H=r(j,"DIV",{class:!0});var Be=_(H);R=r(Be,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(R)!=="svelte-1wbajoe"&&(R.textContent=Le),P=v(Be),g=r(Be,"SELECT",{id:!0,class:!0});var kt=_(g);G=r(kt,"OPTION",{"data-svelte-h":!0}),E(G)!=="svelte-1hun0tq"&&(G.textContent=Tt),K=r(kt,"OPTION",{"data-svelte-h":!0}),E(K)!=="svelte-16o2ctq"&&(K.textContent=It),kt.forEach(c),Be.forEach(c),Je=v(j),Z=r(j,"DIV",{class:!0});var Ue=_(Z);J=r(Ue,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(J)!=="svelte-1k01jwx"&&(J.textContent=Dt),We=v(Ue),T=r(Ue,"INPUT",{id:!0,type:!0,step:!0,placeholder:!0,class:!0}),Ue.forEach(c),xe=v(j),W=r(j,"DIV",{class:!0});var Oe=_(W);x=r(Oe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(x)!=="svelte-24szo9"&&(x.textContent=qt),$e=v(Oe),I=r(Oe,"INPUT",{id:!0,type:!0,step:!0,placeholder:!0,class:!0}),Oe.forEach(c),et=v(j),$=r(j,"DIV",{class:!0});var Fe=_($);ee=r(Fe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(ee)!=="svelte-1ognb32"&&(ee.textContent=wt),tt=v(Fe),D=r(Fe,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Fe.forEach(c),st=v(j),te=r(j,"DIV",{class:!0});var Me=_(te);se=r(Me,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(se)!=="svelte-15fzmo2"&&(se.textContent=At),lt=v(Me),A=r(Me,"INPUT",{id:!0,type:!0,placeholder:!0,class:!0}),Me.forEach(c),at=v(j),le=r(j,"DIV",{class:!0});var He=_(le);ae=r(He,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(ae)!=="svelte-mqxc8z"&&(ae.textContent=Lt),rt=v(He),V=r(He,"INPUT",{id:!0,type:!0,class:!0}),He.forEach(c),nt=v(j),re=r(j,"DIV",{class:!0});var Re=_(re);ne=r(Re,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(ne)!=="svelte-1ws85sl"&&(ne.textContent=Nt),it=v(Re),S=r(Re,"INPUT",{id:!0,type:!0,class:!0}),Re.forEach(c),j.forEach(c),ot=v(pe),ie=r(pe,"DIV",{class:!0});var Xe=_(ie);oe=r(Xe,"LABEL",{for:!0,class:!0,"data-svelte-h":!0}),E(oe)!=="svelte-j2fx5w"&&(oe.textContent=Pt),ut=v(Xe),L=r(Xe,"TEXTAREA",{id:!0,rows:!0,placeholder:!0,class:!0}),_(L).forEach(c),Xe.forEach(c),dt=v(pe),ue=r(pe,"DIV",{class:!0});var Ge=_(ue);ge=r(Ge,"H3",{class:!0,"data-svelte-h":!0}),E(ge)!=="svelte-546h54"&&(ge.textContent=Vt),ft=v(Ge),de=r(Ge,"DIV",{class:!0});var Ke=_(de);fe=r(Ke,"DIV",{class:!0});var Qe=_(fe);be=r(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),E(be)!=="svelte-ksgs7g"&&(be.textContent=St),ct=v(Qe),B=r(Qe,"SPAN",{class:!0});var Ct=_(B);vt=me(Ct,"$"),Ne=me(Ct,Te),Ct.forEach(c),Qe.forEach(c),pt=v(Ke),ce=r(Ke,"DIV",{class:!0});var Ye=_(ce);ye=r(Ye,"SPAN",{class:!0,"data-svelte-h":!0}),E(ye)!=="svelte-1erd2sg"&&(ye.textContent=Bt),_t=v(Ye),U=r(Ye,"SPAN",{class:!0});var jt=_(U);Pe=me(jt,Ie),mt=me(jt,"%"),jt.forEach(c),Ye.forEach(c),Ke.forEach(c),Ge.forEach(c),ht=v(pe),ve=r(pe,"DIV",{class:!0});var Ze=_(ve);X=r(Ze,"BUTTON",{type:!0,class:!0});var Ht=_(X);gt=me(Ht,"Cancel"),Ht.forEach(c),bt=v(Ze),Q=r(Ze,"BUTTON",{type:!0,class:!0});var Rt=_(Q);Ve=me(Rt,De),Rt.forEach(c),Ze.forEach(c),pe.forEach(c),Y.forEach(c),f.forEach(c),this.h()},h(){e(m,"class","svelte-kmjgfz"),e(a,"type","button"),e(a,"class","close-button svelte-kmjgfz"),e(o,"class","modal-header svelte-kmjgfz"),e(M,"for","symbol"),e(M,"class","svelte-kmjgfz"),e(k,"id","symbol"),e(k,"type","text"),k.required=!0,e(k,"placeholder","e.g., AAPL"),k.disabled=l[4],e(k,"class","svelte-kmjgfz"),e(F,"class","form-group svelte-kmjgfz"),e(R,"for","side"),e(R,"class","svelte-kmjgfz"),G.__value="long",b(G,G.__value),K.__value="short",b(K,K.__value),e(g,"id","side"),g.disabled=l[4],e(g,"class","svelte-kmjgfz"),l[2].side===void 0&&ts(()=>l[11].call(g)),e(H,"class","form-group svelte-kmjgfz"),e(J,"for","entry_price"),e(J,"class","svelte-kmjgfz"),e(T,"id","entry_price"),e(T,"type","number"),e(T,"step","0.01"),T.required=!0,e(T,"placeholder","0.00"),T.disabled=l[4],e(T,"class","svelte-kmjgfz"),e(Z,"class","form-group svelte-kmjgfz"),e(x,"for","exit_price"),e(x,"class","svelte-kmjgfz"),e(I,"id","exit_price"),e(I,"type","number"),e(I,"step","0.01"),I.required=!0,e(I,"placeholder","0.00"),I.disabled=l[4],e(I,"class","svelte-kmjgfz"),e(W,"class","form-group svelte-kmjgfz"),e(ee,"for","quantity"),e(ee,"class","svelte-kmjgfz"),e(D,"id","quantity"),e(D,"type","number"),D.required=!0,e(D,"placeholder","0"),D.disabled=l[4],e(D,"class","svelte-kmjgfz"),e($,"class","form-group svelte-kmjgfz"),e(se,"for","strategy"),e(se,"class","svelte-kmjgfz"),e(A,"id","strategy"),e(A,"type","text"),e(A,"placeholder","e.g., Momentum"),A.disabled=l[4],e(A,"class","svelte-kmjgfz"),e(te,"class","form-group svelte-kmjgfz"),e(ae,"for","entry_date"),e(ae,"class","svelte-kmjgfz"),e(V,"id","entry_date"),e(V,"type","datetime-local"),V.required=!0,V.disabled=l[4],e(V,"class","svelte-kmjgfz"),e(le,"class","form-group svelte-kmjgfz"),e(ne,"for","exit_date"),e(ne,"class","svelte-kmjgfz"),e(S,"id","exit_date"),e(S,"type","datetime-local"),S.required=!0,S.disabled=l[4],e(S,"class","svelte-kmjgfz"),e(re,"class","form-group svelte-kmjgfz"),e(h,"class","form-grid svelte-kmjgfz"),e(oe,"for","notes"),e(oe,"class","svelte-kmjgfz"),e(L,"id","notes"),e(L,"rows","3"),e(L,"placeholder","Trade notes..."),L.disabled=l[4],e(L,"class","svelte-kmjgfz"),e(ie,"class","form-group full-width svelte-kmjgfz"),e(ge,"class","svelte-kmjgfz"),e(be,"class","svelte-kmjgfz"),e(B,"class","svelte-kmjgfz"),_e(B,"profit",l[3]>0),_e(B,"loss",l[3]<0),e(fe,"class","pnl-item svelte-kmjgfz"),e(ye,"class","svelte-kmjgfz"),e(U,"class","svelte-kmjgfz"),_e(U,"profit",l[3]>0),_e(U,"loss",l[3]<0),e(ce,"class","pnl-item svelte-kmjgfz"),e(de,"class","pnl-values svelte-kmjgfz"),e(ue,"class","pnl-preview svelte-kmjgfz"),e(X,"type","button"),e(X,"class","cancel-button svelte-kmjgfz"),X.disabled=l[4],e(Q,"type","submit"),e(Q,"class","submit-button svelte-kmjgfz"),Q.disabled=l[4],e(ve,"class","form-actions svelte-kmjgfz"),e(s,"class","modal svelte-kmjgfz"),e(u,"class","modal-backdrop svelte-kmjgfz")},m(i,f){we(i,u,f),t(u,s),t(s,o),t(o,m),t(m,y),t(o,N),t(o,a),t(s,w),C&&C.m(s,null),t(s,Ce),t(s,z),t(z,h),t(h,F),t(F,M),t(F,Ee),t(F,k),b(k,l[2].symbol),t(h,ze),t(h,H),t(H,R),t(H,P),t(H,g),t(g,G),t(g,K),Gt(g,l[2].side,!0),t(h,Je),t(h,Z),t(Z,J),t(Z,We),t(Z,T),b(T,l[2].entry_price),t(h,xe),t(h,W),t(W,x),t(W,$e),t(W,I),b(I,l[2].exit_price),t(h,et),t(h,$),t($,ee),t($,tt),t($,D),b(D,l[2].quantity),t(h,st),t(h,te),t(te,se),t(te,lt),t(te,A),b(A,l[2].strategy),t(h,at),t(h,le),t(le,ae),t(le,rt),t(le,V),b(V,l[2].entry_date),t(h,nt),t(h,re),t(re,ne),t(re,it),t(re,S),b(S,l[2].exit_date),t(z,ot),t(z,ie),t(ie,oe),t(ie,ut),t(ie,L),b(L,l[2].notes),t(z,dt),t(z,ue),t(ue,ge),t(ue,ft),t(ue,de),t(de,fe),t(fe,be),t(fe,ct),t(fe,B),t(B,vt),t(B,Ne),t(de,pt),t(de,ce),t(ce,ye),t(ce,_t),t(ce,U),t(U,Pe),t(U,mt),t(z,ht),t(z,ve),t(ve,X),t(X,gt),t(ve,bt),t(ve,Q),t(Q,Ve),yt||(Ut=[q(a,"click",l[8]),q(k,"input",l[10]),q(g,"change",l[11]),q(T,"input",l[12]),q(I,"input",l[13]),q(D,"input",l[14]),q(A,"input",l[15]),q(V,"input",l[16]),q(S,"input",l[17]),q(L,"input",l[18]),q(X,"click",l[8]),q(z,"submit",l[7]),q(s,"click",es(l[9])),q(u,"click",l[8])],yt=!0)},p(i,f){var Y,ke;f&1&&d!==(d=(Y=i[0])!=null&&Y.id?"Edit Trade":"New Trade")&&qe(y,d),i[5]?C?C.p(i,f):(C=Yt(i),C.c(),C.m(s,Ce)):C&&(C.d(1),C=null),f&16&&(k.disabled=i[4]),f&4&&k.value!==i[2].symbol&&b(k,i[2].symbol),f&16&&(g.disabled=i[4]),f&4&&Gt(g,i[2].side),f&16&&(T.disabled=i[4]),f&4&&je(T.value)!==i[2].entry_price&&b(T,i[2].entry_price),f&16&&(I.disabled=i[4]),f&4&&je(I.value)!==i[2].exit_price&&b(I,i[2].exit_price),f&16&&(D.disabled=i[4]),f&4&&je(D.value)!==i[2].quantity&&b(D,i[2].quantity),f&16&&(A.disabled=i[4]),f&4&&A.value!==i[2].strategy&&b(A,i[2].strategy),f&16&&(V.disabled=i[4]),f&4&&b(V,i[2].entry_date),f&16&&(S.disabled=i[4]),f&4&&b(S,i[2].exit_date),f&16&&(L.disabled=i[4]),f&4&&b(L,i[2].notes),f&8&&Te!==(Te=i[3].toFixed(2)+"")&&qe(Ne,Te),f&8&&_e(B,"profit",i[3]>0),f&8&&_e(B,"loss",i[3]<0),f&64&&Ie!==(Ie=i[6].toFixed(2)+"")&&qe(Pe,Ie),f&8&&_e(U,"profit",i[3]>0),f&8&&_e(U,"loss",i[3]<0),f&16&&(X.disabled=i[4]),f&17&&De!==(De=i[4]?"Saving...":(ke=i[0])!=null&&ke.id?"Update Trade":"Create Trade")&&qe(Ve,De),f&16&&(Q.disabled=i[4])},d(i){i&&c(u),C&&C.d(),yt=!1,$t(Ut)}}}function Yt(l){let u,s;return{c(){u=n("div"),s=he(l[5]),this.h()},l(o){u=r(o,"DIV",{class:!0});var m=_(u);s=me(m,l[5]),m.forEach(c),this.h()},h(){e(u,"class","error-message svelte-kmjgfz")},m(o,m){we(o,u,m),t(u,s)},p(o,m){m&32&&qe(s,o[5])},d(o){o&&c(u)}}}function ps(l){let u,s=l[1]&&Qt(l);return{c(){s&&s.c(),u=Xt()},l(o){s&&s.l(o),u=Xt()},m(o,m){s&&s.m(o,m),we(o,u,m)},p(o,[m]){o[1]?s?s.p(o,m):(s=Qt(o),s.c(),s.m(u.parentNode,u)):s&&(s.d(1),s=null)},i:zt,o:zt,d(o){o&&c(u),s&&s.d(o)}}}function _s(l,u,s){let o,m,{trade:d=null}=u,{show:y=!1}=u;const N=xt();let a={symbol:"",side:"long",entry_price:0,exit_price:0,quantity:0,entry_date:"",exit_date:"",strategy:"",notes:""},O=!1,w="";async function Ce(P){P.preventDefault(),s(4,O=!0),s(5,w="");try{if(d!=null&&d.id)await Kt.updateTrade(d.id,a),N("save",{type:"update",trade:{...d,...a}});else{const g=await Kt.createTrade(a);N("save",{type:"create",trade:g})}z()}catch(g){s(5,w=g.message||"Failed to save trade")}finally{s(4,O=!1)}}function z(){N("close"),s(2,a={symbol:"",side:"long",entry_price:0,exit_price:0,quantity:0,entry_date:"",exit_date:"",strategy:"",notes:""}),s(5,w="")}function h(P){ss.call(this,l,P)}function F(){a.symbol=this.value,s(2,a),s(0,d)}function M(){a.side=ls(this),s(2,a),s(0,d)}function Ae(){a.entry_price=je(this.value),s(2,a),s(0,d)}function Ee(){a.exit_price=je(this.value),s(2,a),s(0,d)}function k(){a.quantity=je(this.value),s(2,a),s(0,d)}function ze(){a.strategy=this.value,s(2,a),s(0,d)}function H(){a.entry_date=this.value,s(2,a),s(0,d)}function R(){a.exit_date=this.value,s(2,a),s(0,d)}function Le(){a.notes=this.value,s(2,a),s(0,d)}return l.$$set=P=>{"trade"in P&&s(0,d=P.trade),"show"in P&&s(1,y=P.show)},l.$$.update=()=>{l.$$.dirty&1&&d&&s(2,a={symbol:d.symbol||"",side:d.side||"long",entry_price:d.entry_price||0,exit_price:d.exit_price||0,quantity:d.quantity||0,entry_date:d.entry_date||"",exit_date:d.exit_date||"",strategy:d.strategy||"",notes:d.notes||""}),l.$$.dirty&4&&s(3,o=a.side==="long"?(a.exit_price-a.entry_price)*a.quantity:(a.entry_price-a.exit_price)*a.quantity),l.$$.dirty&12&&s(6,m=a.entry_price>0?o/(a.entry_price*a.quantity)*100:0)},[d,y,a,o,O,w,m,Ce,z,h,F,M,Ae,Ee,k,ze,H,R,Le]}class ms extends Zt{constructor(u){super(),Jt(this,u,_s,ps,Wt,{trade:0,show:1})}}function hs(l){let u,s,o,m='<h1 class="svelte-13j6aer">Add New Trade</h1> <p class="svelte-13j6aer">Record your trading activity</p>',d,y,N;return y=new ms({props:{show:gs}}),y.$on("save",l[0]),y.$on("close",l[1]),{c(){u=p(),s=n("div"),o=n("header"),o.innerHTML=m,d=p(),ds(y.$$.fragment),this.h()},l(a){os("svelte-1hqzp5s",document.head).forEach(c),u=v(a),s=r(a,"DIV",{class:!0});var w=_(s);o=r(w,"HEADER",{class:!0,"data-svelte-h":!0}),E(o)!=="svelte-wbq9y2"&&(o.innerHTML=m),d=v(w),us(y.$$.fragment,w),w.forEach(c),this.h()},h(){document.title="Add New Trade - TradeSense",e(o,"class","page-header svelte-13j6aer"),e(s,"class","trade-entry-page svelte-13j6aer")},m(a,O){we(a,u,O),we(a,s,O),t(s,o),t(s,d),is(y,s,null),N=!0},p:zt,i(a){N||(ns(y.$$.fragment,a),N=!0)},o(a){rs(y.$$.fragment,a),N=!1},d(a){a&&(c(u),c(s)),as(y)}}}let gs=!0;function bs(l){fs(()=>{cs(vs)||Et("/login")});function u(o){Et("/tradelog")}function s(){Et("/tradelog")}return[u,s]}class zs extends Zt{constructor(u){super(),Jt(this,u,bs,hs,Wt,{})}}export{zs as component};
