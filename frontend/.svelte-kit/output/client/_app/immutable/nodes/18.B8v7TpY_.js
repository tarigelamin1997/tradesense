import{S as be,i as ke,s as $e,x as ne,y as W,t as q,a as N,z as G,A as Z,B as K,C as _e,c as Se,u as Pe,g as Ve,b as Re,d as g,D as $l,E as b,e as Q,T as ae,R as ie,f as j,h as c,H as pe,k as E,l as y,o as V,m as te,p as L,q as C,r as R,v as F,$ as wl,K as Ee,W as lt,O as Ne,j as bt,n as Be,Y as kt,I as El,a3 as Cl,N as ft,P as ct,F as Dl,G as Oe,w as Ml,J as yl}from"../chunks/M0oPezYK.js";import"../chunks/IHki7fMi.js";import{w as Nl,g as Sl}from"../chunks/D2lGS4wI.js";import{i as Pl}from"../chunks/UAPnr0-D.js";import{a as xe}from"../chunks/Bav7U_R_.js";import{e as oe}from"../chunks/DSTCGpCL.js";import{I as Te,g as qe,a as Ae}from"../chunks/Ck4FRYpq.js";import{F as $t}from"../chunks/Cqm7eHgy.js";import{C as st}from"../chunks/RLz4a98-.js";import{X as Vl}from"../chunks/sSn3OGFc.js";import{C as nt}from"../chunks/DwzRa6LX.js";import{I as Il,D as Rl}from"../chunks/zhUnpIM1.js";function Tl(r){let e;const l=r[2].default,t=Se(l,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Pe(t,l,s,s[3],e?Re(l,s[3],n,null):Ve(s[3]),null)},i(s){e||(N(t,s),e=!0)},o(s){q(t,s),e=!1},d(s){t&&t.d(s)}}}function ql(r){let e,l;const t=[{name:"circle-x"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[Tl]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=ne(s,t[n]);return e=new Te({props:s}),{c(){K(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),l=!0},p(n,[a]){const i=a&3?qe(t,[t[0],a&2&&Ae(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){l||(N(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){W(e,n)}}}function Al(r,e,l){let{$$slots:t={},$$scope:s}=e;const n=[["circle",{cx:"12",cy:"12",r:"10"}],["path",{d:"m15 9-6 6"}],["path",{d:"m9 9 6 6"}]];return r.$$set=a=>{l(1,e=ne(ne({},e),_e(a))),"$$scope"in a&&l(3,s=a.$$scope)},e=_e(e),[n,e,t,s]}class rt extends be{constructor(e){super(),ke(this,e,Al,ql,$e,{})}}function zl(r){let e;const l=r[2].default,t=Se(l,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Pe(t,l,s,s[3],e?Re(l,s[3],n,null):Ve(s[3]),null)},i(s){e||(N(t,s),e=!0)},o(s){q(t,s),e=!1},d(s){t&&t.d(s)}}}function Ll(r){let e,l;const t=[{name:"eye-off"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[zl]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=ne(s,t[n]);return e=new Te({props:s}),{c(){K(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),l=!0},p(n,[a]){const i=a&3?qe(t,[t[0],a&2&&Ae(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){l||(N(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){W(e,n)}}}function Fl(r,e,l){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143"}],["path",{d:"m2 2 20 20"}]];return r.$$set=a=>{l(1,e=ne(ne({},e),_e(a))),"$$scope"in a&&l(3,s=a.$$scope)},e=_e(e),[n,e,t,s]}class Ol extends be{constructor(e){super(),ke(this,e,Fl,Ll,$e,{})}}function Ul(r){let e;const l=r[2].default,t=Se(l,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Pe(t,l,s,s[3],e?Re(l,s[3],n,null):Ve(s[3]),null)},i(s){e||(N(t,s),e=!0)},o(s){q(t,s),e=!1},d(s){t&&t.d(s)}}}function jl(r){let e,l;const t=[{name:"eye"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[Ul]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=ne(s,t[n]);return e=new Te({props:s}),{c(){K(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),l=!0},p(n,[a]){const i=a&3?qe(t,[t[0],a&2&&Ae(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){l||(N(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){W(e,n)}}}function Hl(r,e,l){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0"}],["circle",{cx:"12",cy:"12",r:"3"}]];return r.$$set=a=>{l(1,e=ne(ne({},e),_e(a))),"$$scope"in a&&l(3,s=a.$$scope)},e=_e(e),[n,e,t,s]}class Bl extends be{constructor(e){super(),ke(this,e,Hl,jl,$e,{})}}function Jl(r){let e;const l=r[2].default,t=Se(l,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Pe(t,l,s,s[3],e?Re(l,s[3],n,null):Ve(s[3]),null)},i(s){e||(N(t,s),e=!0)},o(s){q(t,s),e=!1},d(s){t&&t.d(s)}}}function Yl(r){let e,l;const t=[{name:"file-json"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[Jl]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=ne(s,t[n]);return e=new Te({props:s}),{c(){K(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),l=!0},p(n,[a]){const i=a&3?qe(t,[t[0],a&2&&Ae(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){l||(N(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){W(e,n)}}}function Ql(r,e,l){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1"}]];return r.$$set=a=>{l(1,e=ne(ne({},e),_e(a))),"$$scope"in a&&l(3,s=a.$$scope)},e=_e(e),[n,e,t,s]}class Wl extends be{constructor(e){super(),ke(this,e,Ql,Yl,$e,{})}}function Gl(r){let e;const l=r[2].default,t=Se(l,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Pe(t,l,s,s[3],e?Re(l,s[3],n,null):Ve(s[3]),null)},i(s){e||(N(t,s),e=!0)},o(s){q(t,s),e=!1},d(s){t&&t.d(s)}}}function Kl(r){let e,l;const t=[{name:"file-spreadsheet"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[Gl]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=ne(s,t[n]);return e=new Te({props:s}),{c(){K(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),l=!0},p(n,[a]){const i=a&3?qe(t,[t[0],a&2&&Ae(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){l||(N(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){W(e,n)}}}function Zl(r,e,l){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4"}],["path",{d:"M8 13h2"}],["path",{d:"M14 13h2"}],["path",{d:"M8 17h2"}],["path",{d:"M14 17h2"}]];return r.$$set=a=>{l(1,e=ne(ne({},e),_e(a))),"$$scope"in a&&l(3,s=a.$$scope)},e=_e(e),[n,e,t,s]}class wt extends be{constructor(e){super(),ke(this,e,Zl,Kl,$e,{})}}function Xl(r){let e;const l=r[2].default,t=Se(l,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Pe(t,l,s,s[3],e?Re(l,s[3],n,null):Ve(s[3]),null)},i(s){e||(N(t,s),e=!0)},o(s){q(t,s),e=!1},d(s){t&&t.d(s)}}}function xl(r){let e,l;const t=[{name:"loader"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[Xl]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=ne(s,t[n]);return e=new Te({props:s}),{c(){K(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),l=!0},p(n,[a]){const i=a&3?qe(t,[t[0],a&2&&Ae(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){l||(N(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){W(e,n)}}}function es(r,e,l){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"M12 2v4"}],["path",{d:"m16.2 7.8 2.9-2.9"}],["path",{d:"M18 12h4"}],["path",{d:"m16.2 16.2 2.9 2.9"}],["path",{d:"M12 18v4"}],["path",{d:"m4.9 19.1 2.9-2.9"}],["path",{d:"M2 12h4"}],["path",{d:"m4.9 4.9 2.9 2.9"}]];return r.$$set=a=>{l(1,e=ne(ne({},e),_e(a))),"$$scope"in a&&l(3,s=a.$$scope)},e=_e(e),[n,e,t,s]}class et extends be{constructor(e){super(),ke(this,e,es,xl,$e,{})}}function ts(r){let e;const l=r[2].default,t=Se(l,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Pe(t,l,s,s[3],e?Re(l,s[3],n,null):Ve(s[3]),null)},i(s){e||(N(t,s),e=!0)},o(s){q(t,s),e=!1},d(s){t&&t.d(s)}}}function ls(r){let e,l;const t=[{name:"refresh-cw"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[ts]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=ne(s,t[n]);return e=new Te({props:s}),{c(){K(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),l=!0},p(n,[a]){const i=a&3?qe(t,[t[0],a&2&&Ae(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){l||(N(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){W(e,n)}}}function ss(r,e,l){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8"}],["path",{d:"M21 3v5h-5"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16"}],["path",{d:"M8 16H3v5"}]];return r.$$set=a=>{l(1,e=ne(ne({},e),_e(a))),"$$scope"in a&&l(3,s=a.$$scope)},e=_e(e),[n,e,t,s]}class ns extends be{constructor(e){super(),ke(this,e,ss,ls,$e,{})}}function rs(r){let e;const l=r[2].default,t=Se(l,r,r[3],null);return{c(){t&&t.c()},l(s){t&&t.l(s)},m(s,n){t&&t.m(s,n),e=!0},p(s,n){t&&t.p&&(!e||n&8)&&Pe(t,l,s,s[3],e?Re(l,s[3],n,null):Ve(s[3]),null)},i(s){e||(N(t,s),e=!0)},o(s){q(t,s),e=!1},d(s){t&&t.d(s)}}}function as(r){let e,l;const t=[{name:"upload"},r[1],{iconNode:r[0]}];let s={$$slots:{default:[rs]},$$scope:{ctx:r}};for(let n=0;n<t.length;n+=1)s=ne(s,t[n]);return e=new Te({props:s}),{c(){K(e.$$.fragment)},l(n){Z(e.$$.fragment,n)},m(n,a){G(e,n,a),l=!0},p(n,[a]){const i=a&3?qe(t,[t[0],a&2&&Ae(n[1]),a&1&&{iconNode:n[0]}]):{};a&8&&(i.$$scope={dirty:a,ctx:n}),e.$set(i)},i(n){l||(N(e.$$.fragment,n),l=!0)},o(n){q(e.$$.fragment,n),l=!1},d(n){W(e,n)}}}function is(r,e,l){let{$$slots:t={},$$scope:s}=e;const n=[["path",{d:"M12 3v12"}],["path",{d:"m17 8-5-5-5 5"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}]];return r.$$set=a=>{l(1,e=ne(ne({},e),_e(a))),"$$scope"in a&&l(3,s=a.$$scope)},e=_e(e),[n,e,t,s]}class os extends be{constructor(e){super(),ke(this,e,is,as,$e,{})}}const tt={async uploadFile(r){const e=new FormData;return e.append("file",r),xe.post("/api/v1/uploads",e,{headers:{"Content-Type":"multipart/form-data"}})},async validateData(r,e){return xe.post(`/api/v1/uploads/${r}/validate`,{column_mapping:e})},async importTrades(r,e){return xe.post(`/api/v1/uploads/${r}/import`,{column_mapping:e})},async getUploadStatus(r){return xe.get(`/api/v1/uploads/${r}/status`)},async getSuggestedMappings(r){const e={},l={symbol:["symbol","ticker","stock","instrument"],side:["side","direction","type","position"],entry_price:["entry_price","entry","buy_price","open_price","price_in"],exit_price:["exit_price","exit","sell_price","close_price","price_out"],quantity:["quantity","qty","shares","size","volume"],entry_date:["entry_date","entry_time","open_date","buy_date","date_in"],exit_date:["exit_date","exit_time","close_date","sell_date","date_out"],pnl:["pnl","profit","profit_loss","gain_loss","p&l"],strategy:["strategy","setup","system","method"],notes:["notes","comments","remarks","description"]};for(const t of r){const s=t.toLowerCase().replace(/[^a-z0-9]/g,"_");for(const[n,a]of Object.entries(l))if(a.some(i=>s.includes(i))){e[t]=n;break}}return e}};function fs(){const{subscribe:r,set:e,update:l}=Nl({stage:"idle",progress:0,message:"",file:null,uploadResponse:null,validationResult:null,columnMapping:{},importResult:null,error:null});return{subscribe:r,reset:()=>e({stage:"idle",progress:0,message:"",file:null,uploadResponse:null,validationResult:null,columnMapping:{},importResult:null,error:null}),setStage:t=>l(s=>({...s,stage:t})),setProgress:t=>l(s=>({...s,progress:t})),setMessage:t=>l(s=>({...s,message:t})),setFile:t=>l(s=>({...s,file:t})),setUploadResponse:t=>l(s=>({...s,uploadResponse:t})),setValidationResult:t=>l(s=>({...s,validationResult:t})),setColumnMapping:t=>l(s=>({...s,columnMapping:t})),setImportResult:t=>l(s=>({...s,importResult:t})),setError:t=>l(s=>({...s,error:t,stage:"error"}))}}const x=fs();function Et(r,e,l){const t=r.slice();t[16]=e[l],t[19]=l;const s=t[11](t[16].name);return t[17]=s,t}function Ct(r,e,l){const t=r.slice();return t[20]=e[l],t}function It(r){let e,l,t=oe(r[5]),s=[];for(let a=0;a<t.length;a+=1)s[a]=Dt(Ct(r,t,a));const n=a=>q(s[a],1,1,()=>{s[a]=null});return{c(){e=C("div");for(let a=0;a<s.length;a+=1)s[a].c();this.h()},l(a){e=E(a,"DIV",{class:!0});var i=y(e);for(let o=0;o<s.length;o+=1)s[o].l(i);i.forEach(g),this.h()},h(){b(e,"class","errors svelte-8nrkyq")},m(a,i){j(a,e,i);for(let o=0;o<s.length;o+=1)s[o]&&s[o].m(e,null);l=!0},p(a,i){if(i&32){t=oe(a[5]);let o;for(o=0;o<t.length;o+=1){const f=Ct(a,t,o);s[o]?(s[o].p(f,i),N(s[o],1)):(s[o]=Dt(f),s[o].c(),N(s[o],1),s[o].m(e,null))}for(ae(),o=t.length;o<s.length;o+=1)n(o);ie()}},i(a){if(!l){for(let i=0;i<t.length;i+=1)N(s[i]);l=!0}},o(a){s=s.filter(Boolean);for(let i=0;i<s.length;i+=1)q(s[i]);l=!1},d(a){a&&g(e),Ee(s,a)}}}function Dt(r){let e,l,t,s,n=r[20]+"",a,i,o;return l=new st({props:{size:16}}),{c(){e=C("div"),K(l.$$.fragment),t=R(),s=C("span"),a=F(n),i=R(),this.h()},l(f){e=E(f,"DIV",{class:!0});var d=y(e);Z(l.$$.fragment,d),t=V(d),s=E(d,"SPAN",{});var u=y(s);a=L(u,n),u.forEach(g),i=V(d),d.forEach(g),this.h()},h(){b(e,"class","error svelte-8nrkyq")},m(f,d){j(f,e,d),G(l,e,null),c(e,t),c(e,s),c(s,a),c(e,i),o=!0},p(f,d){(!o||d&32)&&n!==(n=f[20]+"")&&Q(a,n)},i(f){o||(N(l.$$.fragment,f),o=!0)},o(f){q(l.$$.fragment,f),o=!1},d(f){f&&g(e),W(l)}}}function Mt(r){let e,l,t="Selected Files",s,n,a=oe(r[4]),i=[];for(let f=0;f<a.length;f+=1)i[f]=yt(Et(r,a,f));const o=f=>q(i[f],1,1,()=>{i[f]=null});return{c(){e=C("div"),l=C("h4"),l.textContent=t,s=R();for(let f=0;f<i.length;f+=1)i[f].c();this.h()},l(f){e=E(f,"DIV",{class:!0});var d=y(e);l=E(d,"H4",{class:!0,"data-svelte-h":!0}),te(l)!=="svelte-6nsbgs"&&(l.textContent=t),s=V(d);for(let u=0;u<i.length;u+=1)i[u].l(d);d.forEach(g),this.h()},h(){b(l,"class","svelte-8nrkyq"),b(e,"class","file-list svelte-8nrkyq")},m(f,d){j(f,e,d),c(e,l),c(e,s);for(let u=0;u<i.length;u+=1)i[u]&&i[u].m(e,null);n=!0},p(f,d){if(d&3088){a=oe(f[4]);let u;for(u=0;u<a.length;u+=1){const p=Et(f,a,u);i[u]?(i[u].p(p,d),N(i[u],1)):(i[u]=yt(p),i[u].c(),N(i[u],1),i[u].m(e,null))}for(ae(),u=a.length;u<i.length;u+=1)o(u);ie()}},i(f){if(!n){for(let d=0;d<a.length;d+=1)N(i[d]);n=!0}},o(f){i=i.filter(Boolean);for(let d=0;d<i.length;d+=1)q(i[d]);n=!1},d(f){f&&g(e),Ee(i,f)}}}function yt(r){let e,l,t,s,n,a=r[16].name+"",i,o,f,d=He(r[16].size)+"",u,p,_,h,m,$,v,S;var k=r[17].icon;function w(I,M){return{props:{size:20,class:I[17].color}}}k&&(t=lt(k,w(r))),h=new Vl({props:{size:16}});function D(){return r[12](r[19])}return{c(){e=C("div"),l=C("div"),t&&K(t.$$.fragment),s=R(),n=C("span"),i=F(a),o=R(),f=C("span"),u=F(d),p=R(),_=C("button"),K(h.$$.fragment),m=R(),this.h()},l(I){e=E(I,"DIV",{class:!0});var M=y(e);l=E(M,"DIV",{class:!0});var T=y(l);t&&Z(t.$$.fragment,T),s=V(T),n=E(T,"SPAN",{class:!0});var z=y(n);i=L(z,a),z.forEach(g),o=V(T),f=E(T,"SPAN",{class:!0});var O=y(f);u=L(O,d),O.forEach(g),T.forEach(g),p=V(M),_=E(M,"BUTTON",{type:!0,class:!0,"aria-label":!0});var P=y(_);Z(h.$$.fragment,P),P.forEach(g),m=V(M),M.forEach(g),this.h()},h(){b(n,"class","file-name svelte-8nrkyq"),b(f,"class","file-size svelte-8nrkyq"),b(l,"class","file-info svelte-8nrkyq"),b(_,"type","button"),b(_,"class","remove-btn svelte-8nrkyq"),b(_,"aria-label","Remove file"),b(e,"class","file-item svelte-8nrkyq")},m(I,M){j(I,e,M),c(e,l),t&&G(t,l,null),c(l,s),c(l,n),c(n,i),c(l,o),c(l,f),c(f,u),c(e,p),c(e,_),G(h,_,null),c(e,m),$=!0,v||(S=pe(_,"click",D),v=!0)},p(I,M){if(r=I,M&16&&k!==(k=r[17].icon)){if(t){ae();const T=t;q(T.$$.fragment,1,0,()=>{W(T,1)}),ie()}k?(t=lt(k,w(r)),K(t.$$.fragment),N(t.$$.fragment,1),G(t,l,s)):t=null}else if(k){const T={};M&16&&(T.class=r[17].color),t.$set(T)}(!$||M&16)&&a!==(a=r[16].name+"")&&Q(i,a),(!$||M&16)&&d!==(d=He(r[16].size)+"")&&Q(u,d)},i(I){$||(t&&N(t.$$.fragment,I),N(h.$$.fragment,I),$=!0)},o(I){t&&q(t.$$.fragment,I),q(h.$$.fragment,I),$=!1},d(I){I&&g(e),t&&W(t),W(h),v=!1,S()}}}function cs(r){let e,l,t,s,n,a,i,o,f="Drag & drop files here",d,u,p="or click to browse",_,h,m,$="Accepted formats: CSV, Excel, JSON",v,S,k,w=He(r[1])+"",D,I,M,T,z,O,P;a=new os({props:{size:48,class:"upload-icon"}});let U=r[5].length>0&&It(r),A=r[4].length>0&&Mt(r);return{c(){e=C("div"),l=C("div"),t=C("input"),s=R(),n=C("label"),K(a.$$.fragment),i=R(),o=C("h3"),o.textContent=f,d=R(),u=C("p"),u.textContent=p,_=R(),h=C("div"),m=C("span"),m.textContent=$,v=R(),S=C("span"),k=F("Maximum size: "),D=F(w),M=R(),U&&U.c(),T=R(),A&&A.c(),this.h()},l(H){e=E(H,"DIV",{class:!0});var Y=y(e);l=E(Y,"DIV",{class:!0});var ve=y(l);t=E(ve,"INPUT",{type:!0,id:!0,accept:!0,class:!0}),s=V(ve),n=E(ve,"LABEL",{for:!0,class:!0});var J=y(n);Z(a.$$.fragment,J),i=V(J),o=E(J,"H3",{class:!0,"data-svelte-h":!0}),te(o)!=="svelte-ghq3dk"&&(o.textContent=f),d=V(J),u=E(J,"P",{class:!0,"data-svelte-h":!0}),te(u)!=="svelte-9qv2v8"&&(u.textContent=p),_=V(J),h=E(J,"DIV",{class:!0});var le=y(h);m=E(le,"SPAN",{class:!0,"data-svelte-h":!0}),te(m)!=="svelte-1v7yak"&&(m.textContent=$),v=V(le),S=E(le,"SPAN",{class:!0});var fe=y(S);k=L(fe,"Maximum size: "),D=L(fe,w),fe.forEach(g),le.forEach(g),J.forEach(g),ve.forEach(g),M=V(Y),U&&U.l(Y),T=V(Y),A&&A.l(Y),Y.forEach(g),this.h()},h(){b(t,"type","file"),b(t,"id","file-input"),b(t,"accept",r[0]),t.multiple=r[2],b(t,"class","hidden svelte-8nrkyq"),b(o,"class","svelte-8nrkyq"),b(u,"class","svelte-8nrkyq"),b(m,"class","svelte-8nrkyq"),b(S,"class","svelte-8nrkyq"),b(h,"class","formats svelte-8nrkyq"),b(n,"for","file-input"),b(n,"class","upload-label svelte-8nrkyq"),b(l,"class",I="drop-zone "+(r[3]?"active":"")+" svelte-8nrkyq"),b(e,"class","file-upload svelte-8nrkyq")},m(H,Y){j(H,e,Y),c(e,l),c(l,t),c(l,s),c(l,n),G(a,n,null),c(n,i),c(n,o),c(n,d),c(n,u),c(n,_),c(n,h),c(h,m),c(h,v),c(h,S),c(S,k),c(S,D),c(e,M),U&&U.m(e,null),c(e,T),A&&A.m(e,null),z=!0,O||(P=[pe(t,"change",r[9]),pe(l,"dragenter",r[6]),pe(l,"dragleave",r[7]),pe(l,"dragover",us),pe(l,"drop",r[8])],O=!0)},p(H,[Y]){(!z||Y&1)&&b(t,"accept",H[0]),(!z||Y&4)&&(t.multiple=H[2]),(!z||Y&2)&&w!==(w=He(H[1])+"")&&Q(D,w),(!z||Y&8&&I!==(I="drop-zone "+(H[3]?"active":"")+" svelte-8nrkyq"))&&b(l,"class",I),H[5].length>0?U?(U.p(H,Y),Y&32&&N(U,1)):(U=It(H),U.c(),N(U,1),U.m(e,T)):U&&(ae(),q(U,1,1,()=>{U=null}),ie()),H[4].length>0?A?(A.p(H,Y),Y&16&&N(A,1)):(A=Mt(H),A.c(),N(A,1),A.m(e,null)):A&&(ae(),q(A,1,1,()=>{A=null}),ie())},i(H){z||(N(a.$$.fragment,H),N(U),N(A),z=!0)},o(H){q(a.$$.fragment,H),q(U),q(A),z=!1},d(H){H&&g(e),W(a),U&&U.d(),A&&A.d(),O=!1,$l(P)}}}function us(r){r.preventDefault(),r.stopPropagation()}function He(r){if(r===0)return"0 Bytes";const e=1024,l=["Bytes","KB","MB","GB"],t=Math.floor(Math.log(r)/Math.log(e));return parseFloat((r/Math.pow(e,t)).toFixed(2))+" "+l[t]}function ds(r,e,l){const t=wl();let{accept:s=".csv,.xlsx,.xls,.json"}=e,{maxSize:n=10*1024*1024}=e,{multiple:a=!1}=e,i=!1,o=[],f=[];const d={".csv":{icon:$t,color:"text-green-600"},".xlsx":{icon:wt,color:"text-blue-600"},".xls":{icon:wt,color:"text-blue-600"},".json":{icon:Wl,color:"text-orange-600"}};function u(k){k.preventDefault(),k.stopPropagation(),l(3,i=!0)}function p(k){k.preventDefault(),k.stopPropagation(),l(3,i=!1)}function _(k){var D;k.preventDefault(),k.stopPropagation(),l(3,i=!1);const w=Array.from(((D=k.dataTransfer)==null?void 0:D.files)||[]);m(w)}function h(k){const w=k.target,D=Array.from(w.files||[]);m(D)}function m(k){var D;l(5,f=[]);const w=[];for(const I of k){const M="."+((D=I.name.split(".").pop())==null?void 0:D.toLowerCase());if(!s.includes(M)){f.push(`${I.name}: Invalid file type. Accepted formats: ${s}`);continue}if(I.size>n){f.push(`${I.name}: File too large. Maximum size: ${He(n)}`);continue}w.push(I)}a?l(4,o=[...o,...w]):l(4,o=w.slice(0,1)),w.length>0&&t("upload",{files:w})}function $(k){l(4,o=o.filter((w,D)=>D!==k)),t("remove",{index:k})}function v(k){var D;const w="."+((D=k.split(".").pop())==null?void 0:D.toLowerCase());return d[w]||{icon:$t,color:"text-gray-600"}}const S=k=>$(k);return r.$$set=k=>{"accept"in k&&l(0,s=k.accept),"maxSize"in k&&l(1,n=k.maxSize),"multiple"in k&&l(2,a=k.multiple)},[s,n,a,i,o,f,u,p,_,h,$,v,S]}class hs extends be{constructor(e){super(),ke(this,e,ds,cs,$e,{accept:0,maxSize:1,multiple:2})}}function Nt(r,e,l){const t=r.slice();return t[11]=e[l],t}function St(r,e,l){const t=r.slice();return t[14]=e[l],t}function Pt(r){let e,l,t,s,n,a=r[8].label+"",i,o,f,d,u,p,_,h,m,$,v,S,k=r[8].icon&&Vt(r),w=r[2]&&Rt(r),D=r[1]&&Tt(r),I=r[4]>0&&(r[0]==="validating"||r[0]==="importing")&&qt(r),M=r[5].length>0&&At(r),T=r[6].length>0&&Ft(r);return{c(){e=C("div"),l=C("div"),t=C("div"),k&&k.c(),s=R(),n=C("span"),i=F(a),f=R(),w&&w.c(),d=R(),u=C("div"),p=C("div"),_=R(),h=C("div"),D&&D.c(),m=R(),I&&I.c(),$=R(),M&&M.c(),v=R(),T&&T.c(),this.h()},l(z){e=E(z,"DIV",{class:!0});var O=y(e);l=E(O,"DIV",{class:!0});var P=y(l);t=E(P,"DIV",{class:!0});var U=y(t);k&&k.l(U),s=V(U),n=E(U,"SPAN",{class:!0});var A=y(n);i=L(A,a),A.forEach(g),U.forEach(g),f=V(P),w&&w.l(P),P.forEach(g),d=V(O),u=E(O,"DIV",{class:!0});var H=y(u);p=E(H,"DIV",{class:!0,style:!0}),y(p).forEach(g),H.forEach(g),_=V(O),h=E(O,"DIV",{class:!0});var Y=y(h);D&&D.l(Y),m=V(Y),I&&I.l(Y),Y.forEach(g),$=V(O),M&&M.l(O),v=V(O),T&&T.l(O),O.forEach(g),this.h()},h(){b(n,"class",o="stage-label "+r[8].color+" svelte-hlxry"),b(t,"class","stage-info svelte-hlxry"),b(l,"class","progress-header svelte-hlxry"),b(p,"class","progress-bar svelte-hlxry"),bt(p,"width",r[7]+"%"),b(u,"class","progress-bar-container svelte-hlxry"),b(h,"class","progress-details svelte-hlxry"),b(e,"class","upload-progress svelte-hlxry")},m(z,O){j(z,e,O),c(e,l),c(l,t),k&&k.m(t,null),c(t,s),c(t,n),c(n,i),c(l,f),w&&w.m(l,null),c(e,d),c(e,u),c(u,p),c(e,_),c(e,h),D&&D.m(h,null),c(h,m),I&&I.m(h,null),c(e,$),M&&M.m(e,null),c(e,v),T&&T.m(e,null),S=!0},p(z,O){z[8].icon?k?(k.p(z,O),O&256&&N(k,1)):(k=Vt(z),k.c(),N(k,1),k.m(t,s)):k&&(ae(),q(k,1,1,()=>{k=null}),ie()),(!S||O&256)&&a!==(a=z[8].label+"")&&Q(i,a),(!S||O&256&&o!==(o="stage-label "+z[8].color+" svelte-hlxry"))&&b(n,"class",o),z[2]?w?w.p(z,O):(w=Rt(z),w.c(),w.m(l,null)):w&&(w.d(1),w=null),(!S||O&128)&&bt(p,"width",z[7]+"%"),z[1]?D?D.p(z,O):(D=Tt(z),D.c(),D.m(h,m)):D&&(D.d(1),D=null),z[4]>0&&(z[0]==="validating"||z[0]==="importing")?I?I.p(z,O):(I=qt(z),I.c(),I.m(h,null)):I&&(I.d(1),I=null),z[5].length>0?M?(M.p(z,O),O&32&&N(M,1)):(M=At(z),M.c(),N(M,1),M.m(e,v)):M&&(ae(),q(M,1,1,()=>{M=null}),ie()),z[6].length>0?T?(T.p(z,O),O&64&&N(T,1)):(T=Ft(z),T.c(),N(T,1),T.m(e,null)):T&&(ae(),q(T,1,1,()=>{T=null}),ie())},i(z){S||(N(k),N(M),N(T),S=!0)},o(z){q(k),q(M),q(T),S=!1},d(z){z&&g(e),k&&k.d(),w&&w.d(),D&&D.d(),I&&I.d(),M&&M.d(),T&&T.d()}}}function Vt(r){let e,l,t;var s=r[8].icon;function n(a,i){return{props:{size:20,class:a[8].color+" "+(a[0]==="uploading"||a[0]==="validating"||a[0]==="mapping"||a[0]==="importing"?"animate-spin":"")}}}return s&&(e=lt(s,n(r))),{c(){e&&K(e.$$.fragment),l=Ne()},l(a){e&&Z(e.$$.fragment,a),l=Ne()},m(a,i){e&&G(e,a,i),j(a,l,i),t=!0},p(a,i){if(i&256&&s!==(s=a[8].icon)){if(e){ae();const o=e;q(o.$$.fragment,1,0,()=>{W(o,1)}),ie()}s?(e=lt(s,n(a)),K(e.$$.fragment),N(e.$$.fragment,1),G(e,l.parentNode,l)):e=null}else if(s){const o={};i&257&&(o.class=a[8].color+" "+(a[0]==="uploading"||a[0]==="validating"||a[0]==="mapping"||a[0]==="importing"?"animate-spin":"")),e.$set(o)}},i(a){t||(e&&N(e.$$.fragment,a),t=!0)},o(a){e&&q(e.$$.fragment,a),t=!1},d(a){a&&g(l),e&&W(e,a)}}}function Rt(r){let e,l;return{c(){e=C("span"),l=F(r[2]),this.h()},l(t){e=E(t,"SPAN",{class:!0});var s=y(e);l=L(s,r[2]),s.forEach(g),this.h()},h(){b(e,"class","file-name svelte-hlxry")},m(t,s){j(t,e,s),c(e,l)},p(t,s){s&4&&Q(l,t[2])},d(t){t&&g(e)}}}function Tt(r){let e,l;return{c(){e=C("p"),l=F(r[1]),this.h()},l(t){e=E(t,"P",{class:!0});var s=y(e);l=L(s,r[1]),s.forEach(g),this.h()},h(){b(e,"class","message svelte-hlxry")},m(t,s){j(t,e,s),c(e,l)},p(t,s){s&2&&Q(l,t[1])},d(t){t&&g(e)}}}function qt(r){let e,l,t,s,n,a;return{c(){e=C("p"),l=F("Processing: "),t=F(r[3]),s=F(" / "),n=F(r[4]),a=F(" rows"),this.h()},l(i){e=E(i,"P",{class:!0});var o=y(e);l=L(o,"Processing: "),t=L(o,r[3]),s=L(o," / "),n=L(o,r[4]),a=L(o," rows"),o.forEach(g),this.h()},h(){b(e,"class","row-count svelte-hlxry")},m(i,o){j(i,e,o),c(e,l),c(e,t),c(e,s),c(e,n),c(e,a)},p(i,o){o&8&&Q(t,i[3]),o&16&&Q(n,i[4])},d(i){i&&g(e)}}}function At(r){let e,l,t,s,n=r[5].length+"",a,i,o,f,d,u;t=new rt({props:{size:16}});let p=oe(r[5].slice(0,5)),_=[];for(let m=0;m<p.length;m+=1)_[m]=zt(St(r,p,m));let h=r[5].length>5&&Lt(r);return{c(){e=C("div"),l=C("h4"),K(t.$$.fragment),s=F(" Errors ("),a=F(n),i=F(")"),o=R(),f=C("ul");for(let m=0;m<_.length;m+=1)_[m].c();d=R(),h&&h.c(),this.h()},l(m){e=E(m,"DIV",{class:!0});var $=y(e);l=E($,"H4",{class:!0});var v=y(l);Z(t.$$.fragment,v),s=L(v," Errors ("),a=L(v,n),i=L(v,")"),v.forEach(g),o=V($),f=E($,"UL",{class:!0});var S=y(f);for(let k=0;k<_.length;k+=1)_[k].l(S);d=V(S),h&&h.l(S),S.forEach(g),$.forEach(g),this.h()},h(){b(l,"class","svelte-hlxry"),b(f,"class","svelte-hlxry"),b(e,"class","error-list svelte-hlxry")},m(m,$){j(m,e,$),c(e,l),G(t,l,null),c(l,s),c(l,a),c(l,i),c(e,o),c(e,f);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(f,null);c(f,d),h&&h.m(f,null),u=!0},p(m,$){if((!u||$&32)&&n!==(n=m[5].length+"")&&Q(a,n),$&32){p=oe(m[5].slice(0,5));let v;for(v=0;v<p.length;v+=1){const S=St(m,p,v);_[v]?_[v].p(S,$):(_[v]=zt(S),_[v].c(),_[v].m(f,d))}for(;v<_.length;v+=1)_[v].d(1);_.length=p.length}m[5].length>5?h?h.p(m,$):(h=Lt(m),h.c(),h.m(f,null)):h&&(h.d(1),h=null)},i(m){u||(N(t.$$.fragment,m),u=!0)},o(m){q(t.$$.fragment,m),u=!1},d(m){m&&g(e),W(t),Ee(_,m),h&&h.d()}}}function zt(r){let e,l=r[14]+"",t;return{c(){e=C("li"),t=F(l),this.h()},l(s){e=E(s,"LI",{class:!0});var n=y(e);t=L(n,l),n.forEach(g),this.h()},h(){b(e,"class","svelte-hlxry")},m(s,n){j(s,e,n),c(e,t)},p(s,n){n&32&&l!==(l=s[14]+"")&&Q(t,l)},d(s){s&&g(e)}}}function Lt(r){let e,l,t=r[5].length-5+"",s,n;return{c(){e=C("li"),l=F("... and "),s=F(t),n=F(" more errors"),this.h()},l(a){e=E(a,"LI",{class:!0});var i=y(e);l=L(i,"... and "),s=L(i,t),n=L(i," more errors"),i.forEach(g),this.h()},h(){b(e,"class","more svelte-hlxry")},m(a,i){j(a,e,i),c(e,l),c(e,s),c(e,n)},p(a,i){i&32&&t!==(t=a[5].length-5+"")&&Q(s,t)},d(a){a&&g(e)}}}function Ft(r){let e,l,t,s,n=r[6].length+"",a,i,o,f,d,u;t=new st({props:{size:16}});let p=oe(r[6].slice(0,3)),_=[];for(let m=0;m<p.length;m+=1)_[m]=Ot(Nt(r,p,m));let h=r[6].length>3&&Ut(r);return{c(){e=C("div"),l=C("h4"),K(t.$$.fragment),s=F(" Warnings ("),a=F(n),i=F(")"),o=R(),f=C("ul");for(let m=0;m<_.length;m+=1)_[m].c();d=R(),h&&h.c(),this.h()},l(m){e=E(m,"DIV",{class:!0});var $=y(e);l=E($,"H4",{class:!0});var v=y(l);Z(t.$$.fragment,v),s=L(v," Warnings ("),a=L(v,n),i=L(v,")"),v.forEach(g),o=V($),f=E($,"UL",{class:!0});var S=y(f);for(let k=0;k<_.length;k+=1)_[k].l(S);d=V(S),h&&h.l(S),S.forEach(g),$.forEach(g),this.h()},h(){b(l,"class","svelte-hlxry"),b(f,"class","svelte-hlxry"),b(e,"class","warning-list svelte-hlxry")},m(m,$){j(m,e,$),c(e,l),G(t,l,null),c(l,s),c(l,a),c(l,i),c(e,o),c(e,f);for(let v=0;v<_.length;v+=1)_[v]&&_[v].m(f,null);c(f,d),h&&h.m(f,null),u=!0},p(m,$){if((!u||$&64)&&n!==(n=m[6].length+"")&&Q(a,n),$&64){p=oe(m[6].slice(0,3));let v;for(v=0;v<p.length;v+=1){const S=Nt(m,p,v);_[v]?_[v].p(S,$):(_[v]=Ot(S),_[v].c(),_[v].m(f,d))}for(;v<_.length;v+=1)_[v].d(1);_.length=p.length}m[6].length>3?h?h.p(m,$):(h=Ut(m),h.c(),h.m(f,null)):h&&(h.d(1),h=null)},i(m){u||(N(t.$$.fragment,m),u=!0)},o(m){q(t.$$.fragment,m),u=!1},d(m){m&&g(e),W(t),Ee(_,m),h&&h.d()}}}function Ot(r){let e,l=r[11]+"",t;return{c(){e=C("li"),t=F(l),this.h()},l(s){e=E(s,"LI",{class:!0});var n=y(e);t=L(n,l),n.forEach(g),this.h()},h(){b(e,"class","svelte-hlxry")},m(s,n){j(s,e,n),c(e,t)},p(s,n){n&64&&l!==(l=s[11]+"")&&Q(t,l)},d(s){s&&g(e)}}}function Ut(r){let e,l,t=r[6].length-3+"",s,n;return{c(){e=C("li"),l=F("... and "),s=F(t),n=F(" more warnings"),this.h()},l(a){e=E(a,"LI",{class:!0});var i=y(e);l=L(i,"... and "),s=L(i,t),n=L(i," more warnings"),i.forEach(g),this.h()},h(){b(e,"class","more svelte-hlxry")},m(a,i){j(a,e,i),c(e,l),c(e,s),c(e,n)},p(a,i){i&64&&t!==(t=a[6].length-3+"")&&Q(s,t)},d(a){a&&g(e)}}}function ms(r){let e,l,t=r[0]!=="idle"&&Pt(r);return{c(){t&&t.c(),e=Ne()},l(s){t&&t.l(s),e=Ne()},m(s,n){t&&t.m(s,n),j(s,e,n),l=!0},p(s,[n]){s[0]!=="idle"?t?(t.p(s,n),n&1&&N(t,1)):(t=Pt(s),t.c(),N(t,1),t.m(e.parentNode,e)):t&&(ae(),q(t,1,1,()=>{t=null}),ie())},i(s){l||(N(t),l=!0)},o(s){q(t),l=!1},d(s){s&&g(e),t&&t.d(s)}}}function ps(r,e,l){let t,s,{stage:n="idle"}=e,{progress:a=0}=e,{message:i=""}=e,{fileName:o=""}=e,{rowsProcessed:f=0}=e,{totalRows:d=0}=e,{errors:u=[]}=e,{warnings:p=[]}=e;const _={idle:{label:"Ready",icon:null,color:"text-gray-500"},uploading:{label:"Uploading",icon:et,color:"text-blue-600"},validating:{label:"Validating",icon:et,color:"text-orange-600"},mapping:{label:"Mapping Columns",icon:et,color:"text-purple-600"},importing:{label:"Importing",icon:et,color:"text-green-600"},complete:{label:"Complete",icon:nt,color:"text-green-600"},error:{label:"Error",icon:rt,color:"text-red-600"}};return r.$$set=h=>{"stage"in h&&l(0,n=h.stage),"progress"in h&&l(9,a=h.progress),"message"in h&&l(1,i=h.message),"fileName"in h&&l(2,o=h.fileName),"rowsProcessed"in h&&l(3,f=h.rowsProcessed),"totalRows"in h&&l(4,d=h.totalRows),"errors"in h&&l(5,u=h.errors),"warnings"in h&&l(6,p=h.warnings)},r.$$.update=()=>{r.$$.dirty&1&&l(8,t=_[n]),r.$$.dirty&512&&l(7,s=Math.min(100,Math.max(0,a)))},[n,i,o,f,d,u,p,s,t,a]}class _s extends be{constructor(e){super(),ke(this,e,ps,ms,$e,{stage:0,progress:9,message:1,fileName:2,rowsProcessed:3,totalRows:4,errors:5,warnings:6})}}function jt(r,e,l){const t=r.slice();return t[17]=e[l],t}function Ht(r,e,l){const t=r.slice();return t[20]=e[l],t}function ut(r){const e=r.slice(),l=e[5].find(function(...s){return r[15](e[17],...s)});return e[23]=l,e}function Bt(r,e,l){const t=r.slice();return t[23]=e[l],t}function Jt(r){let e,l="Apply Suggestions",t,s;return{c(){e=C("button"),e.textContent=l,this.h()},l(n){e=E(n,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),te(e)!=="svelte-1gjnqhk"&&(e.textContent=l),this.h()},h(){b(e,"type","button"),b(e,"class","btn-secondary svelte-89fr8f")},m(n,a){j(n,e,a),t||(s=pe(e,"click",r[8]),t=!0)},p:Be,d(n){n&&g(e),t=!1,s()}}}function vs(r){let e,l,t,s,n="All required fields are mapped!",a;return l=new nt({props:{size:20}}),{c(){e=C("div"),K(l.$$.fragment),t=R(),s=C("span"),s.textContent=n,this.h()},l(i){e=E(i,"DIV",{class:!0});var o=y(e);Z(l.$$.fragment,o),t=V(o),s=E(o,"SPAN",{"data-svelte-h":!0}),te(s)!=="svelte-102sxa9"&&(s.textContent=n),o.forEach(g),this.h()},h(){b(e,"class","success-banner svelte-89fr8f")},m(i,o){j(i,e,o),G(l,e,null),c(e,t),c(e,s),a=!0},p:Be,i(i){a||(N(l.$$.fragment,i),a=!0)},o(i){q(l.$$.fragment,i),a=!1},d(i){i&&g(e),W(l)}}}function gs(r){let e,l,t,s,n,a=r[3].filter(r[13]).map(xt).join(", ")+"",i,o;return l=new st({props:{size:20}}),{c(){e=C("div"),K(l.$$.fragment),t=R(),s=C("span"),n=F(`Please map all required fields: 
				`),i=F(a),this.h()},l(f){e=E(f,"DIV",{class:!0});var d=y(e);Z(l.$$.fragment,d),t=V(d),s=E(d,"SPAN",{});var u=y(s);n=L(u,`Please map all required fields: 
				`),i=L(u,a),u.forEach(g),d.forEach(g),this.h()},h(){b(e,"class","warning-banner svelte-89fr8f")},m(f,d){j(f,e,d),G(l,e,null),c(e,t),c(e,s),c(s,n),c(s,i),o=!0},p(f,d){(!o||d&12)&&a!==(a=f[3].filter(f[13]).map(xt).join(", ")+"")&&Q(i,a)},i(f){o||(N(l.$$.fragment,f),o=!0)},o(f){q(l.$$.fragment,f),o=!1},d(f){f&&g(e),W(l)}}}function Yt(r){let e,l,t,s=r[1][r[17]]+"",n,a;return l=new Il({props:{size:14}}),{c(){e=C("span"),K(l.$$.fragment),t=F(`
							Suggested: `),n=F(s),this.h()},l(i){e=E(i,"SPAN",{class:!0});var o=y(e);Z(l.$$.fragment,o),t=L(o,`
							Suggested: `),n=L(o,s),o.forEach(g),this.h()},h(){b(e,"class","suggestion svelte-89fr8f")},m(i,o){j(i,e,o),G(l,e,null),c(e,t),c(e,n),a=!0},p(i,o){(!a||o&3)&&s!==(s=i[1][i[17]]+"")&&Q(n,s)},i(i){a||(N(l.$$.fragment,i),a=!0)},o(i){q(l.$$.fragment,i),a=!1},d(i){i&&g(e),W(l)}}}function bs(r){let e;return{c(){e=F("*")},l(l){e=L(l,"*")},m(l,t){j(l,e,t)},d(l){l&&g(e)}}}function Qt(r){let e;return{c(){e=F("(already mapped)")},l(l){e=L(l,"(already mapped)")},m(l,t){j(l,e,t)},d(l){l&&g(e)}}}function Wt(r){let e,l=r[23].label+"",t,s,n,a=r[23].value!==""&&r[23].value!==r[2][r[17]]&&Object.values(r[2]).includes(r[23].value),i,o,f=r[23].required&&bs(),d=a&&Qt();return{c(){e=C("option"),t=F(l),s=R(),f&&f.c(),n=R(),d&&d.c(),i=R(),this.h()},l(u){e=E(u,"OPTION",{});var p=y(e);t=L(p,l),s=V(p),f&&f.l(p),n=V(p),d&&d.l(p),i=V(p),p.forEach(g),this.h()},h(){e.__value=r[23].value,El(e,e.__value),e.disabled=o=r[23].value!==""&&r[23].value!==r[2][r[17]]&&Object.values(r[2]).includes(r[23].value)},m(u,p){j(u,e,p),c(e,t),c(e,s),f&&f.m(e,null),c(e,n),d&&d.m(e,null),c(e,i)},p(u,p){p&5&&(a=u[23].value!==""&&u[23].value!==u[2][u[17]]&&Object.values(u[2]).includes(u[23].value)),a?d||(d=Qt(),d.c(),d.m(e,i)):d&&(d.d(1),d=null),p&37&&o!==(o=u[23].value!==""&&u[23].value!==u[2][u[17]]&&Object.values(u[2]).includes(u[23].value))&&(e.disabled=o)},d(u){u&&g(e),f&&f.d(),d&&d.d()}}}function Gt(r){var t;let e,l=((t=r[23])==null?void 0:t.description)&&Kt(r);return{c(){l&&l.c(),e=Ne()},l(s){l&&l.l(s),e=Ne()},m(s,n){l&&l.m(s,n),j(s,e,n)},p(s,n){var a;(a=s[23])!=null&&a.description?l?l.p(s,n):(l=Kt(s),l.c(),l.m(e.parentNode,e)):l&&(l.d(1),l=null)},d(s){s&&g(e),l&&l.d(s)}}}function Kt(r){let e,l=r[23].description+"",t;return{c(){e=C("p"),t=F(l),this.h()},l(s){e=E(s,"P",{class:!0});var n=y(e);t=L(n,l),n.forEach(g),this.h()},h(){b(e,"class","field-description svelte-89fr8f")},m(s,n){j(s,e,n),c(e,t)},p(s,n){n&5&&l!==(l=s[23].description+"")&&Q(t,l)},d(s){s&&g(e)}}}function Zt(r){let e,l=r[20]+"",t;return{c(){e=C("span"),t=F(l),this.h()},l(s){e=E(s,"SPAN",{class:!0});var n=y(e);t=L(n,l),n.forEach(g),this.h()},h(){b(e,"class","sample svelte-89fr8f")},m(s,n){j(s,e,n),c(e,t)},p(s,n){n&1&&l!==(l=s[20]+"")&&Q(t,l)},d(s){s&&g(e)}}}function Xt(r){let e,l,t,s=r[17]+"",n,a,i,o,f,d,u="Select field...",p,_,h,m,$,v,S,k,w=r[1][r[17]]&&!r[2][r[17]]&&Yt(r),D=oe(r[5]),I=[];for(let P=0;P<D.length;P+=1)I[P]=Wt(Bt(r,D,P));function M(...P){return r[14](r[17],...P)}let T=r[2][r[17]]&&Gt(ut(r)),z=oe(r[6](r[17])),O=[];for(let P=0;P<z.length;P+=1)O[P]=Zt(Ht(r,z,P));return{c(){e=C("div"),l=C("div"),t=C("span"),n=F(s),a=R(),w&&w.c(),i=R(),o=C("div"),f=C("select"),d=C("option"),d.textContent=u;for(let P=0;P<I.length;P+=1)I[P].c();_=R(),T&&T.c(),h=R(),m=C("div");for(let P=0;P<O.length;P+=1)O[P].c();$=R(),this.h()},l(P){e=E(P,"DIV",{class:!0});var U=y(e);l=E(U,"DIV",{class:!0});var A=y(l);t=E(A,"SPAN",{class:!0});var H=y(t);n=L(H,s),H.forEach(g),a=V(A),w&&w.l(A),A.forEach(g),i=V(U),o=E(U,"DIV",{class:!0});var Y=y(o);f=E(Y,"SELECT",{class:!0});var ve=y(f);d=E(ve,"OPTION",{"data-svelte-h":!0}),te(d)!=="svelte-rwo5t2"&&(d.textContent=u);for(let le=0;le<I.length;le+=1)I[le].l(ve);ve.forEach(g),_=V(Y),T&&T.l(Y),Y.forEach(g),h=V(U),m=E(U,"DIV",{class:!0});var J=y(m);for(let le=0;le<O.length;le+=1)O[le].l(J);J.forEach(g),$=V(U),U.forEach(g),this.h()},h(){b(t,"class","name svelte-89fr8f"),b(l,"class","column-name svelte-89fr8f"),d.__value="",El(d,d.__value),b(f,"class","svelte-89fr8f"),b(o,"class","mapping-select svelte-89fr8f"),b(m,"class","sample-values svelte-89fr8f"),b(e,"class","mapping-row svelte-89fr8f")},m(P,U){j(P,e,U),c(e,l),c(l,t),c(t,n),c(l,a),w&&w.m(l,null),c(e,i),c(e,o),c(o,f),c(f,d);for(let A=0;A<I.length;A+=1)I[A]&&I[A].m(f,null);kt(f,r[2][r[17]]||""),c(o,_),T&&T.m(o,null),c(e,h),c(e,m);for(let A=0;A<O.length;A+=1)O[A]&&O[A].m(m,null);c(e,$),v=!0,S||(k=pe(f,"change",M),S=!0)},p(P,U){if(r=P,(!v||U&1)&&s!==(s=r[17]+"")&&Q(n,s),r[1][r[17]]&&!r[2][r[17]]?w?(w.p(r,U),U&7&&N(w,1)):(w=Yt(r),w.c(),N(w,1),w.m(l,null)):w&&(ae(),q(w,1,1,()=>{w=null}),ie()),U&37){D=oe(r[5]);let A;for(A=0;A<D.length;A+=1){const H=Bt(r,D,A);I[A]?I[A].p(H,U):(I[A]=Wt(H),I[A].c(),I[A].m(f,null))}for(;A<I.length;A+=1)I[A].d(1);I.length=D.length}if((!v||U&37&&p!==(p=r[2][r[17]]||""))&&kt(f,r[2][r[17]]||""),r[2][r[17]]?T?T.p(ut(r),U):(T=Gt(ut(r)),T.c(),T.m(o,null)):T&&(T.d(1),T=null),U&65){z=oe(r[6](r[17]));let A;for(A=0;A<z.length;A+=1){const H=Ht(r,z,A);O[A]?O[A].p(H,U):(O[A]=Zt(H),O[A].c(),O[A].m(m,null))}for(;A<O.length;A+=1)O[A].d(1);O.length=z.length}},i(P){v||(N(w),v=!0)},o(P){q(w),v=!1},d(P){P&&g(e),w&&w.d(),Ee(I,P),T&&T.d(),Ee(O,P),S=!1,k()}}}function ks(r){let e,l,t,s="Map Your Columns",n,a,i="Match your file columns to the system fields",o,f,d=Object.keys(r[1]).length>0,u,p,_="Clear All",h,m,$,v,S,k,w='<div class="svelte-89fr8f">Your Column</div> <div class="svelte-89fr8f">Maps To</div> <div class="svelte-89fr8f">Sample Values</div>',D,I,M,T,z='<span class="required svelte-89fr8f">*</span> Required fields',O,P,U,A,H,Y,ve,J=d&&Jt(r);const le=[gs,vs],fe=[];function we(B,X){return B[4]?1:0}m=we(r),$=fe[m]=le[m](r);let re=oe(r[0]),ee=[];for(let B=0;B<re.length;B+=1)ee[B]=Xt(jt(r,re,B));const je=B=>q(ee[B],1,1,()=>{ee[B]=null});return U=new Il({props:{size:14}}),{c(){e=C("div"),l=C("div"),t=C("h3"),t.textContent=s,n=R(),a=C("p"),a.textContent=i,o=R(),f=C("div"),J&&J.c(),u=R(),p=C("button"),p.textContent=_,h=R(),$.c(),v=R(),S=C("div"),k=C("div"),k.innerHTML=w,D=R();for(let B=0;B<ee.length;B+=1)ee[B].c();I=R(),M=C("div"),T=C("p"),T.innerHTML=z,O=R(),P=C("p"),K(U.$$.fragment),A=F(" Suggested mappings are based on column names"),this.h()},l(B){e=E(B,"DIV",{class:!0});var X=y(e);l=E(X,"DIV",{class:!0});var he=y(l);t=E(he,"H3",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-2c9sj6"&&(t.textContent=s),n=V(he),a=E(he,"P",{class:!0,"data-svelte-h":!0}),te(a)!=="svelte-oqa1lx"&&(a.textContent=i),o=V(he),f=E(he,"DIV",{class:!0});var se=y(f);J&&J.l(se),u=V(se),p=E(se,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),te(p)!=="svelte-3oqbvh"&&(p.textContent=_),se.forEach(g),he.forEach(g),h=V(X),$.l(X),v=V(X),S=E(X,"DIV",{class:!0});var ge=y(S);k=E(ge,"DIV",{class:!0,"data-svelte-h":!0}),te(k)!=="svelte-1w2eyrs"&&(k.innerHTML=w),D=V(ge);for(let Me=0;Me<ee.length;Me+=1)ee[Me].l(ge);ge.forEach(g),I=V(X),M=E(X,"DIV",{class:!0});var ze=y(M);T=E(ze,"P",{class:!0,"data-svelte-h":!0}),te(T)!=="svelte-n19w63"&&(T.innerHTML=z),O=V(ze),P=E(ze,"P",{class:!0});var Le=y(P);Z(U.$$.fragment,Le),A=L(Le," Suggested mappings are based on column names"),Le.forEach(g),ze.forEach(g),X.forEach(g),this.h()},h(){b(t,"class","svelte-89fr8f"),b(a,"class","svelte-89fr8f"),b(p,"type","button"),b(p,"class","btn-ghost svelte-89fr8f"),b(f,"class","actions svelte-89fr8f"),b(l,"class","mapper-header svelte-89fr8f"),b(k,"class","grid-header svelte-89fr8f"),b(S,"class","mapping-grid svelte-89fr8f"),b(T,"class","svelte-89fr8f"),b(P,"class","svelte-89fr8f"),b(M,"class","legend svelte-89fr8f"),b(e,"class","column-mapper svelte-89fr8f")},m(B,X){j(B,e,X),c(e,l),c(l,t),c(l,n),c(l,a),c(l,o),c(l,f),J&&J.m(f,null),c(f,u),c(f,p),c(e,h),fe[m].m(e,null),c(e,v),c(e,S),c(S,k),c(S,D);for(let he=0;he<ee.length;he+=1)ee[he]&&ee[he].m(S,null);c(e,I),c(e,M),c(M,T),c(M,O),c(M,P),G(U,P,null),c(P,A),H=!0,Y||(ve=pe(p,"click",r[9]),Y=!0)},p(B,[X]){X&2&&(d=Object.keys(B[1]).length>0),d?J?J.p(B,X):(J=Jt(B),J.c(),J.m(f,u)):J&&(J.d(1),J=null);let he=m;if(m=we(B),m===he?fe[m].p(B,X):(ae(),q(fe[he],1,1,()=>{fe[he]=null}),ie(),$=fe[m],$?$.p(B,X):($=fe[m]=le[m](B),$.c()),N($,1),$.m(e,v)),X&231){re=oe(B[0]);let se;for(se=0;se<re.length;se+=1){const ge=jt(B,re,se);ee[se]?(ee[se].p(ge,X),N(ee[se],1)):(ee[se]=Xt(ge),ee[se].c(),N(ee[se],1),ee[se].m(S,null))}for(ae(),se=re.length;se<ee.length;se+=1)je(se);ie()}},i(B){if(!H){N($);for(let X=0;X<re.length;X+=1)N(ee[X]);N(U.$$.fragment,B),H=!0}},o(B){q($),ee=ee.filter(Boolean);for(let X=0;X<ee.length;X+=1)q(ee[X]);q(U.$$.fragment,B),H=!1},d(B){B&&g(e),J&&J.d(),fe[m].d(),Ee(ee,B),W(U),Y=!1,ve()}}}const xt=r=>r.label;function $s(r,e,l){let t,s,n;const a=wl();let{fileColumns:i=[]}=e,{dataPreview:o=[]}=e,{suggestedMapping:f={}}=e,{currentMapping:d={}}=e;const u=[{value:"symbol",label:"Symbol",required:!0,description:"Trading symbol (e.g., AAPL, TSLA)"},{value:"side",label:"Side",required:!0,description:"Trade direction (long/short)"},{value:"entry_price",label:"Entry Price",required:!0,description:"Price at entry"},{value:"exit_price",label:"Exit Price",required:!0,description:"Price at exit"},{value:"quantity",label:"Quantity",required:!0,description:"Number of shares/contracts"},{value:"entry_date",label:"Entry Date",required:!0,description:"Date/time of entry"},{value:"exit_date",label:"Exit Date",required:!0,description:"Date/time of exit"},{value:"pnl",label:"P&L",required:!1,description:"Profit/Loss (will be calculated if not provided)"},{value:"strategy",label:"Strategy",required:!1,description:"Trading strategy used"},{value:"notes",label:"Notes",required:!1,description:"Additional notes or comments"},{value:"",label:"Skip this column",required:!1,description:"Do not import this column"}];let p={...f,...d};function _(w){const D=o.map(I=>I[w]).filter(I=>I!=null&&I!=="").slice(0,3);return[...new Set(D)]}function h(w,D){if(D===""){const I={...p};delete I[w],l(2,p=I)}else{const I=Object.entries(p).find(([M,T])=>T===D&&M!==w);if(I){const M={...p};delete M[I[0]],M[w]=D,l(2,p=M)}else l(2,p={...p,[w]:D})}a("change",{mapping:p})}function m(){l(2,p={...f}),a("change",{mapping:p})}function $(){l(2,p={}),a("change",{mapping:p})}const v=w=>!Object.values(p).includes(w.value),S=(w,D)=>h(w,D.currentTarget.value),k=(w,D)=>D.value===p[w];return r.$$set=w=>{"fileColumns"in w&&l(0,i=w.fileColumns),"dataPreview"in w&&l(10,o=w.dataPreview),"suggestedMapping"in w&&l(1,f=w.suggestedMapping),"currentMapping"in w&&l(11,d=w.currentMapping)},r.$$.update=()=>{r.$$.dirty&12&&l(12,s=t.filter(w=>Object.values(p).includes(w.value))),r.$$.dirty&4104&&l(4,n=s.length===t.length)},l(3,t=u.filter(w=>w.required)),[i,f,p,t,n,u,_,h,m,$,o,d,s,v,S,k]}class ws extends be{constructor(e){super(),ke(this,e,$s,ks,$e,{fileColumns:0,dataPreview:10,suggestedMapping:1,currentMapping:11})}}function el(r,e,l){const t=r.slice();return t[8]=e[l],t[10]=l,t}function tl(r,e,l){const t=r.slice();return t[11]=e[l],t}function ll(r,e,l){const t=r.slice();return t[11]=e[l],t}function sl(r){let e,l,t,s,n,a;const i=[Cs,Es],o=[];function f(d,u){return d[4]?0:1}return l=f(r),t=o[l]=i[l](r),{c(){e=C("button"),t.c(),this.h()},l(d){e=E(d,"BUTTON",{type:!0,class:!0});var u=y(e);t.l(u),u.forEach(g),this.h()},h(){b(e,"type","button"),b(e,"class","toggle-btn svelte-1o68069")},m(d,u){j(d,e,u),o[l].m(e,null),s=!0,n||(a=pe(e,"click",r[7]),n=!0)},p(d,u){let p=l;l=f(d),l!==p&&(ae(),q(o[p],1,1,()=>{o[p]=null}),ie(),t=o[l],t||(t=o[l]=i[l](d),t.c()),N(t,1),t.m(e,null))},i(d){s||(N(t),s=!0)},o(d){q(t),s=!1},d(d){d&&g(e),o[l].d(),n=!1,a()}}}function Es(r){let e,l,t;return e=new Bl({props:{size:16}}),{c(){K(e.$$.fragment),l=F(`
					Show All`)},l(s){Z(e.$$.fragment,s),l=L(s,`
					Show All`)},m(s,n){G(e,s,n),j(s,l,n),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){s&&g(l),W(e,s)}}}function Cs(r){let e,l,t;return e=new Ol({props:{size:16}}),{c(){K(e.$$.fragment),l=F(`
					Show Less`)},l(s){Z(e.$$.fragment,s),l=L(s,`
					Show Less`)},m(s,n){G(e,s,n),j(s,l,n),t=!0},i(s){t||(N(e.$$.fragment,s),t=!0)},o(s){q(e.$$.fragment,s),t=!1},d(s){s&&g(l),W(e,s)}}}function Is(r){let e,l="No data to preview";return{c(){e=C("div"),e.textContent=l,this.h()},l(t){e=E(t,"DIV",{class:!0,"data-svelte-h":!0}),te(e)!=="svelte-9onrw2"&&(e.textContent=l),this.h()},h(){b(e,"class","no-data svelte-1o68069")},m(t,s){j(t,e,s)},p:Be,d(t){t&&g(e)}}}function Ds(r){let e,l,t,s,n,a="#",i,o,f,d,u,p=oe(r[1]),_=[];for(let v=0;v<p.length;v+=1)_[v]=nl(ll(r,p,v));let h=oe(r[6]),m=[];for(let v=0;v<h.length;v+=1)m[v]=al(el(r,h,v));let $=r[5]&&!r[4]&&il(r);return{c(){e=C("div"),l=C("table"),t=C("thead"),s=C("tr"),n=C("th"),n.textContent=a,i=R();for(let v=0;v<_.length;v+=1)_[v].c();o=R(),f=C("tbody");for(let v=0;v<m.length;v+=1)m[v].c();d=R(),$&&$.c(),u=Ne(),this.h()},l(v){e=E(v,"DIV",{class:!0});var S=y(e);l=E(S,"TABLE",{class:!0});var k=y(l);t=E(k,"THEAD",{class:!0});var w=y(t);s=E(w,"TR",{});var D=y(s);n=E(D,"TH",{class:!0,"data-svelte-h":!0}),te(n)!=="svelte-1kq6afa"&&(n.textContent=a),i=V(D);for(let M=0;M<_.length;M+=1)_[M].l(D);D.forEach(g),w.forEach(g),o=V(k),f=E(k,"TBODY",{class:!0});var I=y(f);for(let M=0;M<m.length;M+=1)m[M].l(I);I.forEach(g),k.forEach(g),S.forEach(g),d=V(v),$&&$.l(v),u=Ne(),this.h()},h(){b(n,"class","row-number svelte-1o68069"),b(t,"class","svelte-1o68069"),b(f,"class","svelte-1o68069"),b(l,"class","svelte-1o68069"),b(e,"class","table-container svelte-1o68069")},m(v,S){j(v,e,S),c(e,l),c(l,t),c(t,s),c(s,n),c(s,i);for(let k=0;k<_.length;k+=1)_[k]&&_[k].m(s,null);c(l,o),c(l,f);for(let k=0;k<m.length;k+=1)m[k]&&m[k].m(f,null);j(v,d,S),$&&$.m(v,S),j(v,u,S)},p(v,S){if(S&2){p=oe(v[1]);let k;for(k=0;k<p.length;k+=1){const w=ll(v,p,k);_[k]?_[k].p(w,S):(_[k]=nl(w),_[k].c(),_[k].m(s,null))}for(;k<_.length;k+=1)_[k].d(1);_.length=p.length}if(S&66){h=oe(v[6]);let k;for(k=0;k<h.length;k+=1){const w=el(v,h,k);m[k]?m[k].p(w,S):(m[k]=al(w),m[k].c(),m[k].m(f,null))}for(;k<m.length;k+=1)m[k].d(1);m.length=h.length}v[5]&&!v[4]?$?$.p(v,S):($=il(v),$.c(),$.m(u.parentNode,u)):$&&($.d(1),$=null)},d(v){v&&(g(e),g(d),g(u)),Ee(_,v),Ee(m,v),$&&$.d(v)}}}function nl(r){let e,l=r[11]+"",t;return{c(){e=C("th"),t=F(l),this.h()},l(s){e=E(s,"TH",{class:!0});var n=y(e);t=L(n,l),n.forEach(g),this.h()},h(){b(e,"class","svelte-1o68069")},m(s,n){j(s,e,n),c(e,t)},p(s,n){n&2&&l!==(l=s[11]+"")&&Q(t,l)},d(s){s&&g(e)}}}function Ms(r){let e,l="-";return{c(){e=C("span"),e.textContent=l,this.h()},l(t){e=E(t,"SPAN",{class:!0,"data-svelte-h":!0}),te(e)!=="svelte-c8aoy5"&&(e.textContent=l),this.h()},h(){b(e,"class","empty svelte-1o68069")},m(t,s){j(t,e,s)},p:Be,d(t){t&&g(e)}}}function ys(r){let e=r[8][r[11]]+"",l;return{c(){l=F(e)},l(t){l=L(t,e)},m(t,s){j(t,l,s)},p(t,s){s&66&&e!==(e=t[8][t[11]]+"")&&Q(l,e)},d(t){t&&g(l)}}}function rl(r){let e;function l(n,a){return n[8][n[11]]!==null&&n[8][n[11]]!==void 0?ys:Ms}let t=l(r),s=t(r);return{c(){e=C("td"),s.c(),this.h()},l(n){e=E(n,"TD",{class:!0});var a=y(e);s.l(a),a.forEach(g),this.h()},h(){b(e,"class","svelte-1o68069")},m(n,a){j(n,e,a),s.m(e,null)},p(n,a){t===(t=l(n))&&s?s.p(n,a):(s.d(1),s=t(n),s&&(s.c(),s.m(e,null)))},d(n){n&&g(e),s.d()}}}function al(r){let e,l,t=r[10]+1+"",s,n,a,i=oe(r[1]),o=[];for(let f=0;f<i.length;f+=1)o[f]=rl(tl(r,i,f));return{c(){e=C("tr"),l=C("td"),s=F(t),n=R();for(let f=0;f<o.length;f+=1)o[f].c();a=R(),this.h()},l(f){e=E(f,"TR",{class:!0});var d=y(e);l=E(d,"TD",{class:!0});var u=y(l);s=L(u,t),u.forEach(g),n=V(d);for(let p=0;p<o.length;p+=1)o[p].l(d);a=V(d),d.forEach(g),this.h()},h(){b(l,"class","row-number svelte-1o68069"),b(e,"class","svelte-1o68069")},m(f,d){j(f,e,d),c(e,l),c(l,s),c(e,n);for(let u=0;u<o.length;u+=1)o[u]&&o[u].m(e,null);c(e,a)},p(f,d){if(d&66){i=oe(f[1]);let u;for(u=0;u<i.length;u+=1){const p=tl(f,i,u);o[u]?o[u].p(p,d):(o[u]=rl(p),o[u].c(),o[u].m(e,a))}for(;u<o.length;u+=1)o[u].d(1);o.length=i.length}},d(f){f&&g(e),Ee(o,f)}}}function il(r){let e,l,t=r[0].length-r[3]+"",s,n;return{c(){e=C("div"),l=F("... and "),s=F(t),n=F(" more rows"),this.h()},l(a){e=E(a,"DIV",{class:!0});var i=y(e);l=L(i,"... and "),s=L(i,t),n=L(i," more rows"),i.forEach(g),this.h()},h(){b(e,"class","more-indicator svelte-1o68069")},m(a,i){j(a,e,i),c(e,l),c(e,s),c(e,n)},p(a,i){i&9&&t!==(t=a[0].length-a[3]+"")&&Q(s,t)},d(a){a&&g(e)}}}function Ns(r){let e,l,t,s,n,a,i,o=r[6].length+"",f,d,u=r[0].length+"",p,_,h,m,$,v=r[5]&&sl(r);function S(D,I){return D[0].length>0?Ds:Is}let k=S(r),w=k(r);return{c(){e=C("div"),l=C("div"),t=C("h3"),s=F(r[2]),n=R(),a=C("p"),i=F("Showing "),f=F(o),d=F(" of "),p=F(u),_=F(" rows"),h=R(),v&&v.c(),m=R(),w.c(),this.h()},l(D){e=E(D,"DIV",{class:!0});var I=y(e);l=E(I,"DIV",{class:!0});var M=y(l);t=E(M,"H3",{class:!0});var T=y(t);s=L(T,r[2]),T.forEach(g),n=V(M),a=E(M,"P",{class:!0});var z=y(a);i=L(z,"Showing "),f=L(z,o),d=L(z," of "),p=L(z,u),_=L(z," rows"),z.forEach(g),h=V(M),v&&v.l(M),M.forEach(g),m=V(I),w.l(I),I.forEach(g),this.h()},h(){b(t,"class","svelte-1o68069"),b(a,"class","svelte-1o68069"),b(l,"class","preview-header svelte-1o68069"),b(e,"class","data-preview svelte-1o68069")},m(D,I){j(D,e,I),c(e,l),c(l,t),c(t,s),c(l,n),c(l,a),c(a,i),c(a,f),c(a,d),c(a,p),c(a,_),c(l,h),v&&v.m(l,null),c(e,m),w.m(e,null),$=!0},p(D,[I]){(!$||I&4)&&Q(s,D[2]),(!$||I&64)&&o!==(o=D[6].length+"")&&Q(f,o),(!$||I&1)&&u!==(u=D[0].length+"")&&Q(p,u),D[5]?v?(v.p(D,I),I&32&&N(v,1)):(v=sl(D),v.c(),N(v,1),v.m(l,null)):v&&(ae(),q(v,1,1,()=>{v=null}),ie()),k===(k=S(D))&&w?w.p(D,I):(w.d(1),w=k(D),w&&(w.c(),w.m(e,null)))},i(D){$||(N(v),$=!0)},o(D){q(v),$=!1},d(D){D&&g(e),v&&v.d(),w.d()}}}function Ss(r,e,l){let t,s,{data:n=[]}=e,{columns:a=[]}=e,{title:i="Data Preview"}=e,{maxRows:o=10}=e,f=!1;const d=()=>l(4,f=!f);return r.$$set=u=>{"data"in u&&l(0,n=u.data),"columns"in u&&l(1,a=u.columns),"title"in u&&l(2,i=u.title),"maxRows"in u&&l(3,o=u.maxRows)},r.$$.update=()=>{r.$$.dirty&25&&l(6,t=f?n:n.slice(0,o)),r.$$.dirty&9&&l(5,s=n.length>o)},[n,a,i,o,f,s,t,d]}class Ps extends be{constructor(e){super(),ke(this,e,Ss,Ns,$e,{data:0,columns:1,title:2,maxRows:3})}}function ol(r,e,l){const t=r.slice();return t[5]=e[l],t}function Vs(r){let e,l,t,s="Import Failed",n;return e=new rt({props:{size:48,class:"icon-error"}}),{c(){K(e.$$.fragment),l=R(),t=C("h2"),t.textContent=s,this.h()},l(a){Z(e.$$.fragment,a),l=V(a),t=E(a,"H2",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-rjyhcg"&&(t.textContent=s),this.h()},h(){b(t,"class","svelte-3ka85i")},m(a,i){G(e,a,i),j(a,l,i),j(a,t,i),n=!0},i(a){n||(N(e.$$.fragment,a),n=!0)},o(a){q(e.$$.fragment,a),n=!1},d(a){a&&(g(l),g(t)),W(e,a)}}}function Rs(r){let e,l,t,s="Partial Import Complete",n;return e=new st({props:{size:48,class:"icon-warning"}}),{c(){K(e.$$.fragment),l=R(),t=C("h2"),t.textContent=s,this.h()},l(a){Z(e.$$.fragment,a),l=V(a),t=E(a,"H2",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-1rlykt1"&&(t.textContent=s),this.h()},h(){b(t,"class","svelte-3ka85i")},m(a,i){G(e,a,i),j(a,l,i),j(a,t,i),n=!0},i(a){n||(N(e.$$.fragment,a),n=!0)},o(a){q(e.$$.fragment,a),n=!1},d(a){a&&(g(l),g(t)),W(e,a)}}}function Ts(r){let e,l,t,s="Import Complete!",n;return e=new nt({props:{size:48,class:"icon-success"}}),{c(){K(e.$$.fragment),l=R(),t=C("h2"),t.textContent=s,this.h()},l(a){Z(e.$$.fragment,a),l=V(a),t=E(a,"H2",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-rsxmq9"&&(t.textContent=s),this.h()},h(){b(t,"class","svelte-3ka85i")},m(a,i){G(e,a,i),j(a,l,i),j(a,t,i),n=!0},i(a){n||(N(e.$$.fragment,a),n=!0)},o(a){q(e.$$.fragment,a),n=!1},d(a){a&&(g(l),g(t)),W(e,a)}}}function fl(r){let e,l,t,s,n=r[0].errors.length+"",a,i,o,f,d,u,p,_,h,m,$,v;d=new Rl({props:{size:16}});let S=oe(r[0].errors.slice(0,10)),k=[];for(let D=0;D<S.length;D+=1)k[D]=ul(ol(r,S,D));let w=r[0].errors.length>10&&dl(r);return{c(){e=C("div"),l=C("div"),t=C("h3"),s=F("Import Errors ("),a=F(n),i=F(")"),o=R(),f=C("button"),K(d.$$.fragment),u=F(`
					Download Error Report`),p=R(),_=C("div");for(let D=0;D<k.length;D+=1)k[D].c();h=R(),w&&w.c(),this.h()},l(D){e=E(D,"DIV",{class:!0});var I=y(e);l=E(I,"DIV",{class:!0});var M=y(l);t=E(M,"H3",{class:!0});var T=y(t);s=L(T,"Import Errors ("),a=L(T,n),i=L(T,")"),T.forEach(g),o=V(M),f=E(M,"BUTTON",{type:!0,class:!0});var z=y(f);Z(d.$$.fragment,z),u=L(z,`
					Download Error Report`),z.forEach(g),M.forEach(g),p=V(I),_=E(I,"DIV",{class:!0});var O=y(_);for(let P=0;P<k.length;P+=1)k[P].l(O);h=V(O),w&&w.l(O),O.forEach(g),I.forEach(g),this.h()},h(){b(t,"class","svelte-3ka85i"),b(f,"type","button"),b(f,"class","btn-ghost svelte-3ka85i"),b(l,"class","errors-header svelte-3ka85i"),b(_,"class","error-list svelte-3ka85i"),b(e,"class","errors-section svelte-3ka85i")},m(D,I){j(D,e,I),c(e,l),c(l,t),c(t,s),c(t,a),c(t,i),c(l,o),c(l,f),G(d,f,null),c(f,u),c(e,p),c(e,_);for(let M=0;M<k.length;M+=1)k[M]&&k[M].m(_,null);c(_,h),w&&w.m(_,null),m=!0,$||(v=pe(f,"click",r[4]),$=!0)},p(D,I){if((!m||I&1)&&n!==(n=D[0].errors.length+"")&&Q(a,n),I&1){S=oe(D[0].errors.slice(0,10));let M;for(M=0;M<S.length;M+=1){const T=ol(D,S,M);k[M]?k[M].p(T,I):(k[M]=ul(T),k[M].c(),k[M].m(_,h))}for(;M<k.length;M+=1)k[M].d(1);k.length=S.length}D[0].errors.length>10?w?w.p(D,I):(w=dl(D),w.c(),w.m(_,null)):w&&(w.d(1),w=null)},i(D){m||(N(d.$$.fragment,D),m=!0)},o(D){q(d.$$.fragment,D),m=!1},d(D){D&&g(e),W(d),Ee(k,D),w&&w.d(),$=!1,v()}}}function cl(r){let e,l,t="View data",s,n,a=JSON.stringify(r[5].data,null,2)+"",i;return{c(){e=C("details"),l=C("summary"),l.textContent=t,s=R(),n=C("pre"),i=F(a),this.h()},l(o){e=E(o,"DETAILS",{class:!0});var f=y(e);l=E(f,"SUMMARY",{class:!0,"data-svelte-h":!0}),te(l)!=="svelte-1undvm7"&&(l.textContent=t),s=V(f),n=E(f,"PRE",{class:!0});var d=y(n);i=L(d,a),d.forEach(g),f.forEach(g),this.h()},h(){b(l,"class","svelte-3ka85i"),b(n,"class","svelte-3ka85i"),b(e,"class","error-data svelte-3ka85i")},m(o,f){j(o,e,f),c(e,l),c(e,s),c(e,n),c(n,i)},p(o,f){f&1&&a!==(a=JSON.stringify(o[5].data,null,2)+"")&&Q(i,a)},d(o){o&&g(e)}}}function ul(r){let e,l,t,s=r[5].row+"",n,a,i,o=r[5].message+"",f,d,u=r[5].data&&cl(r);return{c(){e=C("div"),l=C("div"),t=F("Row "),n=F(s),a=R(),i=C("div"),f=F(o),d=R(),u&&u.c(),this.h()},l(p){e=E(p,"DIV",{class:!0});var _=y(e);l=E(_,"DIV",{class:!0});var h=y(l);t=L(h,"Row "),n=L(h,s),h.forEach(g),a=V(_),i=E(_,"DIV",{class:!0});var m=y(i);f=L(m,o),m.forEach(g),d=V(_),u&&u.l(_),_.forEach(g),this.h()},h(){b(l,"class","error-row svelte-3ka85i"),b(i,"class","error-message svelte-3ka85i"),b(e,"class","error-item svelte-3ka85i")},m(p,_){j(p,e,_),c(e,l),c(l,t),c(l,n),c(e,a),c(e,i),c(i,f),c(e,d),u&&u.m(e,null)},p(p,_){_&1&&s!==(s=p[5].row+"")&&Q(n,s),_&1&&o!==(o=p[5].message+"")&&Q(f,o),p[5].data?u?u.p(p,_):(u=cl(p),u.c(),u.m(e,null)):u&&(u.d(1),u=null)},d(p){p&&g(e),u&&u.d()}}}function dl(r){let e,l,t=r[0].errors.length-10+"",s,n;return{c(){e=C("div"),l=F("... and "),s=F(t),n=F(" more errors"),this.h()},l(a){e=E(a,"DIV",{class:!0});var i=y(e);l=L(i,"... and "),s=L(i,t),n=L(i," more errors"),i.forEach(g),this.h()},h(){b(e,"class","more-errors svelte-3ka85i")},m(a,i){j(a,e,i),c(e,l),c(e,s),c(e,n)},p(a,i){i&1&&t!==(t=a[0].errors.length-10+"")&&Q(s,t)},d(a){a&&g(e)}}}function hl(r){let e,l,t,s,n,a;return l=new ns({props:{size:16}}),{c(){e=C("button"),K(l.$$.fragment),t=F(`
				Retry Failed Imports`),this.h()},l(i){e=E(i,"BUTTON",{type:!0,class:!0});var o=y(e);Z(l.$$.fragment,o),t=L(o,`
				Retry Failed Imports`),o.forEach(g),this.h()},h(){b(e,"type","button"),b(e,"class","btn-secondary svelte-3ka85i")},m(i,o){j(i,e,o),G(l,e,null),c(e,t),s=!0,n||(a=pe(e,"click",function(){Cl(r[1])&&r[1].apply(this,arguments)}),n=!0)},p(i,o){r=i},i(i){s||(N(l.$$.fragment,i),s=!0)},o(i){q(l.$$.fragment,i),s=!1},d(i){i&&g(e),W(l),n=!1,a()}}}function qs(r){let e,l,t,s,n,a,i=r[0].message+"",o,f,d,u,p,_,h,m,$=r[0].imported+"",v,S,k,w="Trades Imported",D,I,M,T,z,O,P=r[0].failed+"",U,A,H,Y="Failed Imports",ve,J,le,fe,we,re,ee,je,B,X,he,se,ge,ze="Success Rate",Le,Me,Ce,Je,Ie,dt="New Import",De,at,ht;const mt=[Ts,Rs,Vs],Fe=[];function pt(me,ce){return me[0].success?0:me[0].imported>0?1:2}t=pt(r),s=Fe[t]=mt[t](r),p=new nt({props:{size:24}}),M=new rt({props:{size:24}});let ue=r[0].errors.length>0&&fl(r),de=r[0].failed>0&&hl(r);return{c(){e=C("div"),l=C("div"),s.c(),n=R(),a=C("p"),o=F(i),f=R(),d=C("div"),u=C("div"),K(p.$$.fragment),_=R(),h=C("div"),m=C("span"),v=F($),S=R(),k=C("span"),k.textContent=w,D=R(),I=C("div"),K(M.$$.fragment),T=R(),z=C("div"),O=C("span"),U=F(P),A=R(),H=C("span"),H.textContent=Y,ve=R(),J=C("div"),le=C("div"),fe=ct("svg"),we=ct("circle"),re=ct("circle"),je=R(),B=C("span"),X=F(r[3]),he=F("%"),se=R(),ge=C("span"),ge.textContent=ze,Le=R(),ue&&ue.c(),Me=R(),Ce=C("div"),de&&de.c(),Je=R(),Ie=C("button"),Ie.textContent=dt,this.h()},l(me){e=E(me,"DIV",{class:!0});var ce=y(e);l=E(ce,"DIV",{class:!0});var ye=y(l);s.l(ye),n=V(ye),a=E(ye,"P",{class:!0});var _t=y(a);o=L(_t,i),_t.forEach(g),ye.forEach(g),f=V(ce),d=E(ce,"DIV",{class:!0});var Ue=y(d);u=E(Ue,"DIV",{class:!0});var Ye=y(u);Z(p.$$.fragment,Ye),_=V(Ye),h=E(Ye,"DIV",{class:!0});var Qe=y(h);m=E(Qe,"SPAN",{class:!0});var vt=y(m);v=L(vt,$),vt.forEach(g),S=V(Qe),k=E(Qe,"SPAN",{class:!0,"data-svelte-h":!0}),te(k)!=="svelte-xwnhhj"&&(k.textContent=w),Qe.forEach(g),Ye.forEach(g),D=V(Ue),I=E(Ue,"DIV",{class:!0});var We=y(I);Z(M.$$.fragment,We),T=V(We),z=E(We,"DIV",{class:!0});var Ge=y(z);O=E(Ge,"SPAN",{class:!0});var gt=y(O);U=L(gt,P),gt.forEach(g),A=V(Ge),H=E(Ge,"SPAN",{class:!0,"data-svelte-h":!0}),te(H)!=="svelte-hg06v7"&&(H.textContent=Y),Ge.forEach(g),We.forEach(g),ve=V(Ue),J=E(Ue,"DIV",{class:!0});var Ke=y(J);le=E(Ke,"DIV",{class:!0});var Ze=y(le);fe=ft(Ze,"svg",{width:!0,height:!0});var it=y(fe);we=ft(it,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0}),y(we).forEach(g),re=ft(it,"circle",{cx:!0,cy:!0,r:!0,stroke:!0,"stroke-width":!0,fill:!0,"stroke-dasharray":!0,"stroke-dashoffset":!0,transform:!0,class:!0}),y(re).forEach(g),it.forEach(g),je=V(Ze),B=E(Ze,"SPAN",{class:!0});var ot=y(B);X=L(ot,r[3]),he=L(ot,"%"),ot.forEach(g),Ze.forEach(g),se=V(Ke),ge=E(Ke,"SPAN",{class:!0,"data-svelte-h":!0}),te(ge)!=="svelte-helmn3"&&(ge.textContent=ze),Ke.forEach(g),Ue.forEach(g),Le=V(ce),ue&&ue.l(ce),Me=V(ce),Ce=E(ce,"DIV",{class:!0});var Xe=y(Ce);de&&de.l(Xe),Je=V(Xe),Ie=E(Xe,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),te(Ie)!=="svelte-1mxq5cv"&&(Ie.textContent=dt),Xe.forEach(g),ce.forEach(g),this.h()},h(){b(a,"class","message svelte-3ka85i"),b(l,"class","results-header svelte-3ka85i"),b(m,"class","stat-value svelte-3ka85i"),b(k,"class","stat-label svelte-3ka85i"),b(h,"class","stat-content svelte-3ka85i"),b(u,"class","stat-card success svelte-3ka85i"),b(O,"class","stat-value svelte-3ka85i"),b(H,"class","stat-label svelte-3ka85i"),b(z,"class","stat-content svelte-3ka85i"),b(I,"class","stat-card error svelte-3ka85i"),b(we,"cx","30"),b(we,"cy","30"),b(we,"r","25"),b(we,"stroke","#e0e0e0"),b(we,"stroke-width","5"),b(we,"fill","none"),b(re,"cx","30"),b(re,"cy","30"),b(re,"r","25"),b(re,"stroke","#10b981"),b(re,"stroke-width","5"),b(re,"fill","none"),b(re,"stroke-dasharray",ee=`${r[3]*1.57} 157`),b(re,"stroke-dashoffset","0"),b(re,"transform","rotate(-90 30 30)"),b(re,"class","progress-circle svelte-3ka85i"),b(fe,"width","60"),b(fe,"height","60"),b(B,"class","progress-text svelte-3ka85i"),b(le,"class","progress-ring svelte-3ka85i"),b(ge,"class","stat-label svelte-3ka85i"),b(J,"class","stat-card neutral svelte-3ka85i"),b(d,"class","stats-grid svelte-3ka85i"),b(Ie,"type","button"),b(Ie,"class","btn-primary svelte-3ka85i"),b(Ce,"class","actions svelte-3ka85i"),b(e,"class","import-results svelte-3ka85i")},m(me,ce){j(me,e,ce),c(e,l),Fe[t].m(l,null),c(l,n),c(l,a),c(a,o),c(e,f),c(e,d),c(d,u),G(p,u,null),c(u,_),c(u,h),c(h,m),c(m,v),c(h,S),c(h,k),c(d,D),c(d,I),G(M,I,null),c(I,T),c(I,z),c(z,O),c(O,U),c(z,A),c(z,H),c(d,ve),c(d,J),c(J,le),c(le,fe),c(fe,we),c(fe,re),c(le,je),c(le,B),c(B,X),c(B,he),c(J,se),c(J,ge),c(e,Le),ue&&ue.m(e,null),c(e,Me),c(e,Ce),de&&de.m(Ce,null),c(Ce,Je),c(Ce,Ie),De=!0,at||(ht=pe(Ie,"click",function(){Cl(r[2])&&r[2].apply(this,arguments)}),at=!0)},p(me,[ce]){r=me;let ye=t;t=pt(r),t!==ye&&(ae(),q(Fe[ye],1,1,()=>{Fe[ye]=null}),ie(),s=Fe[t],s||(s=Fe[t]=mt[t](r),s.c()),N(s,1),s.m(l,n)),(!De||ce&1)&&i!==(i=r[0].message+"")&&Q(o,i),(!De||ce&1)&&$!==($=r[0].imported+"")&&Q(v,$),(!De||ce&1)&&P!==(P=r[0].failed+"")&&Q(U,P),(!De||ce&8&&ee!==(ee=`${r[3]*1.57} 157`))&&b(re,"stroke-dasharray",ee),(!De||ce&8)&&Q(X,r[3]),r[0].errors.length>0?ue?(ue.p(r,ce),ce&1&&N(ue,1)):(ue=fl(r),ue.c(),N(ue,1),ue.m(e,Me)):ue&&(ae(),q(ue,1,1,()=>{ue=null}),ie()),r[0].failed>0?de?(de.p(r,ce),ce&1&&N(de,1)):(de=hl(r),de.c(),N(de,1),de.m(Ce,Je)):de&&(ae(),q(de,1,1,()=>{de=null}),ie())},i(me){De||(N(s),N(p.$$.fragment,me),N(M.$$.fragment,me),N(ue),N(de),De=!0)},o(me){q(s),q(p.$$.fragment,me),q(M.$$.fragment,me),q(ue),q(de),De=!1},d(me){me&&g(e),Fe[t].d(),W(p),W(M),ue&&ue.d(),de&&de.d(),at=!1,ht()}}}function As(r,e,l){let t,{result:s}=e,{onRetry:n=()=>{}}=e,{onNewImport:a=()=>{}}=e;function i(){const o=s.errors.map(_=>({row:_.row,message:_.message,data:JSON.stringify(_.data||{})})),f=[["Row","Error Message","Data"],...o.map(_=>[_.row,_.message,_.data])].map(_=>_.join(",")).join(`
`),d=new Blob([f],{type:"text/csv"}),u=URL.createObjectURL(d),p=document.createElement("a");p.href=u,p.download="import-errors.csv",p.click(),URL.revokeObjectURL(u)}return r.$$set=o=>{"result"in o&&l(0,s=o.result),"onRetry"in o&&l(1,n=o.onRetry),"onNewImport"in o&&l(2,a=o.onNewImport)},r.$$.update=()=>{r.$$.dirty&1&&l(3,t=s.imported>0?Math.round(s.imported/(s.imported+s.failed)*100):0)},[s,n,a,t,i]}class zs extends be{constructor(e){super(),ke(this,e,As,qs,$e,{result:0,onRetry:1,onNewImport:2})}}function ml(r){let e,l,t,s=`<h3 class="svelte-16ur8w6">File Requirements</h3> <ul class="svelte-16ur8w6"><li>Supported formats: CSV (.csv), Excel (.xlsx, .xls), JSON (.json)</li> <li>Maximum file size: 10MB</li> <li>Required columns: Symbol, Side, Entry Price, Exit Price, Quantity, Entry Date, Exit Date</li> <li>Optional columns: P&amp;L, Strategy, Notes</li></ul> <h3 class="svelte-16ur8w6">Sample File Format</h3> <div class="sample-format svelte-16ur8w6"><code class="svelte-16ur8w6">Symbol,Side,Entry Price,Exit Price,Quantity,Entry Date,Exit Date<br/>
					AAPL,long,150.00,155.00,100,2024-01-01 09:30,2024-01-01 15:30<br/>
					TSLA,short,240.50,238.00,50,2024-01-02 10:00,2024-01-02 14:00</code></div>`,n;return e=new hs({props:{accept:".csv,.xlsx,.xls,.json",maxSize:10485760}}),e.$on("upload",r[17]),{c(){K(e.$$.fragment),l=R(),t=C("div"),t.innerHTML=s,this.h()},l(a){Z(e.$$.fragment,a),l=V(a),t=E(a,"DIV",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-wco3mt"&&(t.innerHTML=s),this.h()},h(){b(t,"class","instructions svelte-16ur8w6")},m(a,i){G(e,a,i),j(a,l,i),j(a,t,i),n=!0},p:Be,i(a){n||(N(e.$$.fragment,a),n=!0)},o(a){q(e.$$.fragment,a),n=!1},d(a){a&&(g(l),g(t)),W(e,a)}}}function pl(r){var t,s,n,a;let e,l;return e=new _s({props:{stage:r[3],progress:r[4],message:r[5],fileName:((t=r[0])==null?void 0:t.name)||"",totalRows:((s=r[6])==null?void 0:s.rows)||0,errors:((n=r[7])==null?void 0:n.errors.map(bl))||[],warnings:((a=r[7])==null?void 0:a.warnings.map(kl))||[]}}),{c(){K(e.$$.fragment)},l(i){Z(e.$$.fragment,i)},m(i,o){G(e,i,o),l=!0},p(i,o){var d,u,p,_;const f={};o&8&&(f.stage=i[3]),o&16&&(f.progress=i[4]),o&32&&(f.message=i[5]),o&1&&(f.fileName=((d=i[0])==null?void 0:d.name)||""),o&64&&(f.totalRows=((u=i[6])==null?void 0:u.rows)||0),o&128&&(f.errors=((p=i[7])==null?void 0:p.errors.map(bl))||[]),o&128&&(f.warnings=((_=i[7])==null?void 0:_.warnings.map(kl))||[]),e.$set(f)},i(i){l||(N(e.$$.fragment,i),l=!0)},o(i){q(e.$$.fragment,i),l=!1},d(i){W(e,i)}}}function _l(r){let e,l,t,s,n,a,i="Cancel",o,f,d="Validate & Import",u,p,_;return e=new ws({props:{fileColumns:r[6].columns,dataPreview:r[6].data_preview,suggestedMapping:r[1],currentMapping:r[2]}}),e.$on("change",r[18]),t=new Ps({props:{data:r[6].data_preview,columns:r[6].columns,title:"File Preview",maxRows:5}}),{c(){K(e.$$.fragment),l=R(),K(t.$$.fragment),s=R(),n=C("div"),a=C("button"),a.textContent=i,o=R(),f=C("button"),f.textContent=d,this.h()},l(h){Z(e.$$.fragment,h),l=V(h),Z(t.$$.fragment,h),s=V(h),n=E(h,"DIV",{class:!0});var m=y(n);a=E(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),te(a)!=="svelte-1dt5y2r"&&(a.textContent=i),o=V(m),f=E(m,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),te(f)!=="svelte-9cbq5z"&&(f.textContent=d),m.forEach(g),this.h()},h(){b(a,"type","button"),b(a,"class","btn-secondary svelte-16ur8w6"),b(f,"type","button"),b(f,"class","btn-primary svelte-16ur8w6"),b(n,"class","actions svelte-16ur8w6")},m(h,m){G(e,h,m),j(h,l,m),G(t,h,m),j(h,s,m),j(h,n,m),c(n,a),c(n,o),c(n,f),u=!0,p||(_=[pe(a,"click",r[20]),pe(f,"click",r[19])],p=!0)},p(h,m){const $={};m&64&&($.fileColumns=h[6].columns),m&64&&($.dataPreview=h[6].data_preview),m&2&&($.suggestedMapping=h[1]),m&4&&($.currentMapping=h[2]),e.$set($);const v={};m&64&&(v.data=h[6].data_preview),m&64&&(v.columns=h[6].columns),t.$set(v)},i(h){u||(N(e.$$.fragment,h),N(t.$$.fragment,h),u=!0)},o(h){q(e.$$.fragment,h),q(t.$$.fragment,h),u=!1},d(h){h&&(g(l),g(s),g(n)),W(e,h),W(t,h),p=!1,$l(_)}}}function vl(r){let e,l;return e=new zs({props:{result:r[8],onRetry:r[21],onNewImport:r[20]}}),{c(){K(e.$$.fragment)},l(t){Z(e.$$.fragment,t)},m(t,s){G(e,t,s),l=!0},p(t,s){const n={};s&256&&(n.result=t[8]),e.$set(n)},i(t){l||(N(e.$$.fragment,t),l=!0)},o(t){q(e.$$.fragment,t),l=!1},d(t){W(e,t)}}}function gl(r){let e,l,t="Error",s,n,a,i,o,f="Try Again",d,u;return{c(){e=C("div"),l=C("h3"),l.textContent=t,s=R(),n=C("p"),a=F(r[9]),i=R(),o=C("button"),o.textContent=f,this.h()},l(p){e=E(p,"DIV",{class:!0});var _=y(e);l=E(_,"H3",{class:!0,"data-svelte-h":!0}),te(l)!=="svelte-1tfa5tk"&&(l.textContent=t),s=V(_),n=E(_,"P",{class:!0});var h=y(n);a=L(h,r[9]),h.forEach(g),i=V(_),o=E(_,"BUTTON",{type:!0,class:!0,"data-svelte-h":!0}),te(o)!=="svelte-cf2jgw"&&(o.textContent=f),_.forEach(g),this.h()},h(){b(l,"class","svelte-16ur8w6"),b(n,"class","svelte-16ur8w6"),b(o,"type","button"),b(o,"class","btn-primary svelte-16ur8w6"),b(e,"class","error-message svelte-16ur8w6")},m(p,_){j(p,e,_),c(e,l),c(e,s),c(e,n),c(n,a),c(e,i),c(e,o),d||(u=pe(o,"click",r[20]),d=!0)},p(p,_){_&512&&Q(a,p[9])},d(p){p&&g(e),d=!1,u()}}}function Ls(r){let e,l,t,s='<div><h1 class="svelte-16ur8w6">Import Trades</h1> <p class="svelte-16ur8w6">Upload your trade history from CSV, Excel, or JSON files</p></div>',n,a,i,o,f,d,u=r[3]==="idle"&&ml(r),p=r[3]!=="idle"&&r[3]!=="complete"&&pl(r),_=r[3]==="mapping"&&r[6]&&_l(r),h=r[3]==="complete"&&r[8]&&vl(r),m=r[9]&&gl(r);return{c(){e=R(),l=C("div"),t=C("header"),t.innerHTML=s,n=R(),u&&u.c(),a=R(),p&&p.c(),i=R(),_&&_.c(),o=R(),h&&h.c(),f=R(),m&&m.c(),this.h()},l($){Dl("svelte-q5i65t",document.head).forEach(g),e=V($),l=E($,"DIV",{class:!0});var S=y(l);t=E(S,"HEADER",{class:!0,"data-svelte-h":!0}),te(t)!=="svelte-syphyz"&&(t.innerHTML=s),n=V(S),u&&u.l(S),a=V(S),p&&p.l(S),i=V(S),_&&_.l(S),o=V(S),h&&h.l(S),f=V(S),m&&m.l(S),S.forEach(g),this.h()},h(){document.title="Import Trades - TradeSense",b(t,"class","page-header svelte-16ur8w6"),b(l,"class","upload-page svelte-16ur8w6")},m($,v){j($,e,v),j($,l,v),c(l,t),c(l,n),u&&u.m(l,null),c(l,a),p&&p.m(l,null),c(l,i),_&&_.m(l,null),c(l,o),h&&h.m(l,null),c(l,f),m&&m.m(l,null),d=!0},p($,[v]){$[3]==="idle"?u?(u.p($,v),v&8&&N(u,1)):(u=ml($),u.c(),N(u,1),u.m(l,a)):u&&(ae(),q(u,1,1,()=>{u=null}),ie()),$[3]!=="idle"&&$[3]!=="complete"?p?(p.p($,v),v&8&&N(p,1)):(p=pl($),p.c(),N(p,1),p.m(l,i)):p&&(ae(),q(p,1,1,()=>{p=null}),ie()),$[3]==="mapping"&&$[6]?_?(_.p($,v),v&72&&N(_,1)):(_=_l($),_.c(),N(_,1),_.m(l,o)):_&&(ae(),q(_,1,1,()=>{_=null}),ie()),$[3]==="complete"&&$[8]?h?(h.p($,v),v&264&&N(h,1)):(h=vl($),h.c(),N(h,1),h.m(l,f)):h&&(ae(),q(h,1,1,()=>{h=null}),ie()),$[9]?m?m.p($,v):(m=gl($),m.c(),m.m(l,null)):m&&(m.d(1),m=null)},i($){d||(N(u),N(p),N(_),N(h),d=!0)},o($){q(u),q(p),q(_),q(h),d=!1},d($){$&&(g(e),g(l)),u&&u.d(),p&&p.d(),_&&_.d(),h&&h.d(),m&&m.d()}}}const bl=r=>`Row ${r.row}: ${r.message}`,kl=r=>`Row ${r.row}: ${r.message}`;function Fs(r,e,l){let t,s,n,a,i,o,f,d=null,u=null,p={},_={};const{stage:h,progress:m,message:$,uploadResponse:v,validationResult:S,importResult:k,error:w}=x;Oe(r,h,P=>l(3,t=P)),Oe(r,m,P=>l(4,s=P)),Oe(r,$,P=>l(5,n=P)),Oe(r,v,P=>l(6,a=P)),Oe(r,S,P=>l(7,i=P)),Oe(r,k,P=>l(8,o=P)),Oe(r,w,P=>l(9,f=P));async function D(P){const U=P.detail.files[0];if(U){l(0,d=U),x.setFile(U),x.setStage("uploading"),x.setProgress(0),x.setMessage("Uploading file...");try{const A=setInterval(()=>{x.setProgress(Y=>Math.min(Y+10,90))},200),H=await tt.uploadFile(U);clearInterval(A),x.setProgress(100),x.setUploadResponse(H),u=H.upload_id,l(1,p=await tt.getSuggestedMappings(H.columns)),l(2,_=p),x.setStage("mapping"),x.setMessage("Configure column mappings...")}catch(A){console.error("Upload failed:",A),x.setError(A.message||"Failed to upload file")}}}async function I(P){l(2,_=P.detail.mapping)}async function M(){if(u){x.setStage("validating"),x.setProgress(0),x.setMessage("Validating data...");try{const P=await tt.validateData(u,_);x.setValidationResult(P),x.setProgress(100),P.valid?await T():(x.setStage("mapping"),x.setMessage(`Validation failed: ${P.errors.length} errors found`))}catch(P){console.error("Validation failed:",P),x.setError(P.message||"Failed to validate data")}}}async function T(){if(u){x.setStage("importing"),x.setProgress(0),x.setMessage("Importing trades...");try{const P=setInterval(()=>{x.setProgress(A=>Math.min(A+5,95))},500),U=await tt.importTrades(u,_);clearInterval(P),x.setProgress(100),x.setImportResult(U),x.setStage("complete"),x.setMessage(U.message)}catch(P){console.error("Import failed:",P),x.setError(P.message||"Failed to import trades")}}}function z(){x.reset(),l(0,d=null),u=null,l(1,p={}),l(2,_={})}function O(){T()}return Ml(()=>{yl(Pl)||Sl("/login"),x.reset()}),[d,p,_,t,s,n,a,i,o,f,h,m,$,v,S,k,w,D,I,M,z,O]}class Xs extends be{constructor(e){super(),ke(this,e,Fs,Ls,$e,{})}}export{Xs as component};
